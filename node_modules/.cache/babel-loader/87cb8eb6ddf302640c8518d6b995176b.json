{"remainingRequest":"/Users/crocslut/Desktop/Git/primevue/node_modules/babel-loader/lib/index.js!/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/crocslut/Desktop/Git/primevue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/crocslut/Desktop/Git/primevue/src/components/datatable/DataTable.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/crocslut/Desktop/Git/primevue/src/components/datatable/DataTable.vue","mtime":1634633311574},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js","mtime":1634631121968},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/babel-loader/lib/index.js","mtime":1634631121902},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js","mtime":1634631121968},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/vue-loader-v16/dist/index.js","mtime":1634631132147}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9jcm9jc2x1dC9EZXNrdG9wL0dpdC9wcmltZXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9jcm9jc2x1dC9EZXNrdG9wL0dpdC9wcmltZXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvY3JvY3NsdXQvRGVza3RvcC9HaXQvcHJpbWV2dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy9jcm9jc2x1dC9EZXNrdG9wL0dpdC9wcmltZXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0IHsgT2JqZWN0VXRpbHMsIERvbUhhbmRsZXIsIFVuaXF1ZUNvbXBvbmVudElkIH0gZnJvbSAncHJpbWV2dWUvdXRpbHMnOwppbXBvcnQgeyBGaWx0ZXJNYXRjaE1vZGUsIEZpbHRlck9wZXJhdG9yLCBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAncHJpbWV2dWUvYXBpJzsKaW1wb3J0IFBhZ2luYXRvciBmcm9tICdwcmltZXZ1ZS9wYWdpbmF0b3InOwppbXBvcnQgVGFibGVIZWFkZXIgZnJvbSAnLi9UYWJsZUhlYWRlci52dWUnOwppbXBvcnQgVGFibGVCb2R5IGZyb20gJy4vVGFibGVCb2R5LnZ1ZSc7CmltcG9ydCBUYWJsZUZvb3RlciBmcm9tICcuL1RhYmxlRm9vdGVyLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGF0YVRhYmxlJywKICBlbWl0czogWyd2YWx1ZS1jaGFuZ2UnLCAndXBkYXRlOmZpcnN0JywgJ3VwZGF0ZTpyb3dzJywgJ3BhZ2UnLCAndXBkYXRlOnNvcnRGaWVsZCcsICd1cGRhdGU6c29ydE9yZGVyJywgJ3VwZGF0ZTptdWx0aVNvcnRNZXRhJywgJ3NvcnQnLCAnZmlsdGVyJywgJ3Jvdy1jbGljaycsICdyb3ctZGJsY2xpY2snLCAndXBkYXRlOnNlbGVjdGlvbicsICdyb3ctc2VsZWN0JywgJ3Jvdy11bnNlbGVjdCcsICd1cGRhdGU6Y29udGV4dE1lbnVTZWxlY3Rpb24nLCAncm93LWNvbnRleHRtZW51JywgJ3Jvdy11bnNlbGVjdC1hbGwnLCAncm93LXNlbGVjdC1hbGwnLCAnY29sdW1uLXJlc2l6ZS1lbmQnLCAnY29sdW1uLXJlb3JkZXInLCAncm93LXJlb3JkZXInLCAndXBkYXRlOmV4cGFuZGVkUm93cycsICdyb3ctY29sbGFwc2UnLCAncm93LWV4cGFuZCcsICd1cGRhdGU6ZXhwYW5kZWRSb3dHcm91cHMnLCAncm93Z3JvdXAtY29sbGFwc2UnLCAncm93Z3JvdXAtZXhwYW5kJywgJ3VwZGF0ZTpmaWx0ZXJzJywgJ3N0YXRlLXJlc3RvcmUnLCAnc3RhdGUtc2F2ZScsICdjZWxsLWVkaXQtaW5pdCcsICdjZWxsLWVkaXQtY29tcGxldGUnLCAnY2VsbC1lZGl0LWNhbmNlbCcsICd1cGRhdGU6ZWRpdGluZ1Jvd3MnLCAncm93LWVkaXQtaW5pdCcsICdyb3ctZWRpdC1zYXZlJywgJ3Jvdy1lZGl0LWNhbmNlbCddLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGRhdGFLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgcm93czogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICBmaXJzdDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICB0b3RhbFJlY29yZHM6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgcGFnaW5hdG9yOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcGFnaW5hdG9yUG9zaXRpb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnYm90dG9tJwogICAgfSwKICAgIGFsd2F5c1Nob3dQYWdpbmF0b3I6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHBhZ2luYXRvclRlbXBsYXRlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ0ZpcnN0UGFnZUxpbmsgUHJldlBhZ2VMaW5rIFBhZ2VMaW5rcyBOZXh0UGFnZUxpbmsgTGFzdFBhZ2VMaW5rIFJvd3NQZXJQYWdlRHJvcGRvd24nCiAgICB9LAogICAgcGFnZUxpbmtTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNQogICAgfSwKICAgIHJvd3NQZXJQYWdlT3B0aW9uczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGN1cnJlbnRQYWdlUmVwb3J0VGVtcGxhdGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnKHtjdXJyZW50UGFnZX0gb2Yge3RvdGFsUGFnZXN9KScKICAgIH0sCiAgICBsYXp5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbG9hZGluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGxvYWRpbmdJY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3BpIHBpLXNwaW5uZXInCiAgICB9LAogICAgc29ydEZpZWxkOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHNvcnRPcmRlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkZWZhdWx0U29ydE9yZGVyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIG11bHRpU29ydE1ldGE6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzb3J0TW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdzaW5nbGUnCiAgICB9LAogICAgcmVtb3ZhYmxlU29ydDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZmlsdGVyRGlzcGxheTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBnbG9iYWxGaWx0ZXJGaWVsZHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBmaWx0ZXJMb2NhbGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBzZWxlY3Rpb246IHsKICAgICAgdHlwZTogW0FycmF5LCBPYmplY3RdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgc2VsZWN0aW9uTW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBjb21wYXJlU2VsZWN0aW9uQnk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZGVlcEVxdWFscycKICAgIH0sCiAgICBtZXRhS2V5U2VsZWN0aW9uOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBjb250ZXh0TWVudTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNvbnRleHRNZW51U2VsZWN0aW9uOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHJvd0hvdmVyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY3N2U2VwYXJhdG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJywnCiAgICB9LAogICAgZXhwb3J0RmlsZW5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZG93bmxvYWQnCiAgICB9LAogICAgZXhwb3J0RnVuY3Rpb246IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBhdXRvTGF5b3V0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcmVzaXphYmxlQ29sdW1uczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNvbHVtblJlc2l6ZU1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZml0JwogICAgfSwKICAgIHJlb3JkZXJhYmxlQ29sdW1uczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGV4cGFuZGVkUm93czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGV4cGFuZGVkUm93SWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdwaS1jaGV2cm9uLWRvd24nCiAgICB9LAogICAgY29sbGFwc2VkUm93SWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdwaS1jaGV2cm9uLXJpZ2h0JwogICAgfSwKICAgIHJvd0dyb3VwTW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBncm91cFJvd3NCeTogewogICAgICB0eXBlOiBbQXJyYXksIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBleHBhbmRhYmxlUm93R3JvdXBzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZXhwYW5kZWRSb3dHcm91cHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzdGF0ZVN0b3JhZ2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnc2Vzc2lvbicKICAgIH0sCiAgICBzdGF0ZUtleTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBlZGl0TW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBlZGl0aW5nUm93czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHJvd0NsYXNzOiB7CiAgICAgIHR5cGU6IG51bGwsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzY3JvbGxhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2Nyb2xsRGlyZWN0aW9uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogInZlcnRpY2FsIgogICAgfSwKICAgIHNjcm9sbEhlaWdodDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBmcm96ZW5WYWx1ZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHJlc3BvbnNpdmVMYXlvdXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnc3RhY2snCiAgICB9LAogICAgYnJlYWtwb2ludDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICc5NjBweCcKICAgIH0sCiAgICBzaG93R3JpZGxpbmVzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc3RyaXBlZFJvd3M6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkX2ZpcnN0OiB0aGlzLmZpcnN0LAogICAgICBkX3Jvd3M6IHRoaXMucm93cywKICAgICAgZF9zb3J0RmllbGQ6IHRoaXMuc29ydEZpZWxkLAogICAgICBkX3NvcnRPcmRlcjogdGhpcy5zb3J0T3JkZXIsCiAgICAgIGRfbXVsdGlTb3J0TWV0YTogdGhpcy5tdWx0aVNvcnRNZXRhID8gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubXVsdGlTb3J0TWV0YSkgOiBbXSwKICAgICAgZF9ncm91cFJvd3NTb3J0TWV0YTogbnVsbCwKICAgICAgZF9zZWxlY3Rpb25LZXlzOiBudWxsLAogICAgICBkX2V4cGFuZGVkUm93S2V5czogbnVsbCwKICAgICAgZF9jb2x1bW5PcmRlcjogbnVsbCwKICAgICAgZF9lZGl0aW5nUm93S2V5czogbnVsbCwKICAgICAgZF9lZGl0aW5nTWV0YToge30sCiAgICAgIGRfZmlsdGVyczogdGhpcy5jbG9uZUZpbHRlcnModGhpcy5maWx0ZXJzKQogICAgfTsKICB9LAogIHJvd1RvdWNoZWQ6IGZhbHNlLAogIGFuY2hvclJvd0luZGV4OiBudWxsLAogIHJhbmdlUm93SW5kZXg6IG51bGwsCiAgZG9jdW1lbnRDb2x1bW5SZXNpemVMaXN0ZW5lcjogbnVsbCwKICBkb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyOiBudWxsLAogIGxhc3RSZXNpemVIZWxwZXJYOiBudWxsLAogIHJlc2l6ZUNvbHVtbkVsZW1lbnQ6IG51bGwsCiAgY29sdW1uUmVzaXppbmc6IGZhbHNlLAogIGNvbFJlb3JkZXJJY29uV2lkdGg6IG51bGwsCiAgY29sUmVvcmRlckljb25IZWlnaHQ6IG51bGwsCiAgZHJhZ2dlZENvbHVtbjogbnVsbCwKICBkcmFnZ2VkUm93SW5kZXg6IG51bGwsCiAgZHJvcHBlZFJvd0luZGV4OiBudWxsLAogIHJvd0RyYWdnaW5nOiBudWxsLAogIGNvbHVtbldpZHRoc1N0YXRlOiBudWxsLAogIHRhYmxlV2lkdGhTdGF0ZTogbnVsbCwKICBjb2x1bW5XaWR0aHNSZXN0b3JlZDogZmFsc2UsCiAgd2F0Y2g6IHsKICAgIGZpcnN0OiBmdW5jdGlvbiBmaXJzdChuZXdWYWx1ZSkgewogICAgICB0aGlzLmRfZmlyc3QgPSBuZXdWYWx1ZTsKICAgIH0sCiAgICByb3dzOiBmdW5jdGlvbiByb3dzKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuZF9yb3dzID0gbmV3VmFsdWU7CiAgICB9LAogICAgc29ydEZpZWxkOiBmdW5jdGlvbiBzb3J0RmllbGQobmV3VmFsdWUpIHsKICAgICAgdGhpcy5kX3NvcnRGaWVsZCA9IG5ld1ZhbHVlOwogICAgfSwKICAgIHNvcnRPcmRlcjogZnVuY3Rpb24gc29ydE9yZGVyKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuZF9zb3J0T3JkZXIgPSBuZXdWYWx1ZTsKICAgIH0sCiAgICBtdWx0aVNvcnRNZXRhOiBmdW5jdGlvbiBtdWx0aVNvcnRNZXRhKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuZF9tdWx0aVNvcnRNZXRhID0gbmV3VmFsdWU7CiAgICB9LAogICAgc2VsZWN0aW9uOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWx1ZSkgewogICAgICAgIGlmICh0aGlzLmRhdGFLZXkpIHsKICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uS2V5cyhuZXdWYWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZXhwYW5kZWRSb3dzOiBmdW5jdGlvbiBleHBhbmRlZFJvd3MobmV3VmFsdWUpIHsKICAgICAgaWYgKHRoaXMuZGF0YUtleSkgewogICAgICAgIHRoaXMudXBkYXRlRXhwYW5kZWRSb3dLZXlzKG5ld1ZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGVkaXRpbmdSb3dzOiBmdW5jdGlvbiBlZGl0aW5nUm93cyhuZXdWYWx1ZSkgewogICAgICBpZiAodGhpcy5kYXRhS2V5KSB7CiAgICAgICAgdGhpcy51cGRhdGVFZGl0aW5nUm93S2V5cyhuZXdWYWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBmaWx0ZXJzOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobmV3VmFsdWUpIHsKICAgICAgICB0aGlzLmRfZmlsdGVycyA9IHRoaXMuY2xvbmVGaWx0ZXJzKG5ld1ZhbHVlKTsKICAgICAgfQogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgaWYgKHRoaXMuaXNTdGF0ZWZ1bCgpKSB7CiAgICAgIHRoaXMucmVzdG9yZVN0YXRlKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy4kZWwuc2V0QXR0cmlidXRlKHRoaXMuYXR0cmlidXRlU2VsZWN0b3IsICcnKTsKCiAgICBpZiAodGhpcy5yZXNwb25zaXZlTGF5b3V0ID09PSAnc3RhY2snICYmICF0aGlzLnNjcm9sbGFibGUpIHsKICAgICAgdGhpcy5jcmVhdGVSZXNwb25zaXZlU3R5bGUoKTsKICAgIH0KCiAgICBpZiAodGhpcy5pc1N0YXRlZnVsKCkgJiYgdGhpcy5yZXNpemFibGVDb2x1bW5zKSB7CiAgICAgIHRoaXMucmVzdG9yZUNvbHVtbldpZHRocygpOwogICAgfQoKICAgIGlmICh0aGlzLmVkaXRNb2RlID09PSAncm93JyAmJiB0aGlzLmRhdGFLZXkgJiYgIXRoaXMuZF9lZGl0aW5nUm93S2V5cykgewogICAgICB0aGlzLnVwZGF0ZUVkaXRpbmdSb3dLZXlzKHRoaXMuZWRpdGluZ1Jvd3MpOwogICAgfQogIH0sCiAgYmVmb3JlVW5tb3VudDogZnVuY3Rpb24gYmVmb3JlVW5tb3VudCgpIHsKICAgIHRoaXMudW5iaW5kQ29sdW1uUmVzaXplRXZlbnRzKCk7CiAgICB0aGlzLmRlc3Ryb3lTdHlsZUVsZW1lbnQoKTsKICAgIHRoaXMuZGVzdHJveVJlc3BvbnNpdmVTdHlsZSgpOwogIH0sCiAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCgpIHsKICAgIGlmICh0aGlzLmlzU3RhdGVmdWwoKSkgewogICAgICB0aGlzLnNhdmVTdGF0ZSgpOwogICAgfQoKICAgIGlmICh0aGlzLmVkaXRNb2RlID09PSAncm93JyAmJiB0aGlzLmRhdGFLZXkgJiYgIXRoaXMuZF9lZGl0aW5nUm93S2V5cykgewogICAgICB0aGlzLnVwZGF0ZUVkaXRpbmdSb3dLZXlzKHRoaXMuZWRpdGluZ1Jvd3MpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY29sdW1uUHJvcDogZnVuY3Rpb24gY29sdW1uUHJvcChjb2wsIHByb3ApIHsKICAgICAgcmV0dXJuIE9iamVjdFV0aWxzLmdldFZOb2RlUHJvcChjb2wsIHByb3ApOwogICAgfSwKICAgIG9uUGFnZTogZnVuY3Rpb24gb25QYWdlKGV2ZW50KSB7CiAgICAgIHRoaXMuY2xlYXJFZGl0aW5nTWV0YURhdGEoKTsKICAgICAgdGhpcy5kX2ZpcnN0ID0gZXZlbnQuZmlyc3Q7CiAgICAgIHRoaXMuZF9yb3dzID0gZXZlbnQucm93czsKICAgICAgdmFyIHBhZ2VFdmVudCA9IHRoaXMuY3JlYXRlTGF6eUxvYWRFdmVudChldmVudCk7CiAgICAgIHBhZ2VFdmVudC5wYWdlQ291bnQgPSBldmVudC5wYWdlQ291bnQ7CiAgICAgIHBhZ2VFdmVudC5wYWdlID0gZXZlbnQucGFnZTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmZpcnN0JywgdGhpcy5kX2ZpcnN0KTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnJvd3MnLCB0aGlzLmRfcm93cyk7CiAgICAgIHRoaXMuJGVtaXQoJ3BhZ2UnLCBwYWdlRXZlbnQpOwogICAgICB0aGlzLiRlbWl0KCd2YWx1ZS1jaGFuZ2UnLCB0aGlzLnByb2Nlc3NlZERhdGEpOwogICAgfSwKICAgIG9uQ29sdW1uSGVhZGVyQ2xpY2s6IGZ1bmN0aW9uIG9uQ29sdW1uSGVhZGVyQ2xpY2soZSkgewogICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7CiAgICAgIHZhciBjb2x1bW4gPSBlLmNvbHVtbjsKCiAgICAgIGlmICh0aGlzLmNvbHVtblByb3AoY29sdW1uLCAnc29ydGFibGUnKSkgewogICAgICAgIHZhciB0YXJnZXROb2RlID0gZXZlbnQudGFyZ2V0OwogICAgICAgIHZhciBjb2x1bW5GaWVsZCA9IHRoaXMuY29sdW1uUHJvcChjb2x1bW4sICdzb3J0RmllbGQnKSB8fCB0aGlzLmNvbHVtblByb3AoY29sdW1uLCAnZmllbGQnKTsKCiAgICAgICAgaWYgKERvbUhhbmRsZXIuaGFzQ2xhc3ModGFyZ2V0Tm9kZSwgJ3Atc29ydGFibGUtY29sdW1uJykgfHwgRG9tSGFuZGxlci5oYXNDbGFzcyh0YXJnZXROb2RlLCAncC1jb2x1bW4tdGl0bGUnKSB8fCBEb21IYW5kbGVyLmhhc0NsYXNzKHRhcmdldE5vZGUsICdwLWNvbHVtbi1oZWFkZXItY29udGVudCcpIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3ModGFyZ2V0Tm9kZSwgJ3Atc29ydGFibGUtY29sdW1uLWljb24nKSB8fCBEb21IYW5kbGVyLmhhc0NsYXNzKHRhcmdldE5vZGUucGFyZW50RWxlbWVudCwgJ3Atc29ydGFibGUtY29sdW1uLWljb24nKSkgewogICAgICAgICAgRG9tSGFuZGxlci5jbGVhclNlbGVjdGlvbigpOwoKICAgICAgICAgIGlmICh0aGlzLnNvcnRNb2RlID09PSAnc2luZ2xlJykgewogICAgICAgICAgICBpZiAodGhpcy5kX3NvcnRGaWVsZCA9PT0gY29sdW1uRmllbGQpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5yZW1vdmFibGVTb3J0ICYmIHRoaXMuZF9zb3J0T3JkZXIgKiAtMSA9PT0gdGhpcy5kZWZhdWx0U29ydE9yZGVyKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRfc29ydE9yZGVyID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuZF9zb3J0RmllbGQgPSBudWxsOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmRfc29ydE9yZGVyID0gdGhpcy5kX3NvcnRPcmRlciAqIC0xOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmRfc29ydE9yZGVyID0gdGhpcy5kZWZhdWx0U29ydE9yZGVyOwogICAgICAgICAgICAgIHRoaXMuZF9zb3J0RmllbGQgPSBjb2x1bW5GaWVsZDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNvcnRGaWVsZCcsIHRoaXMuZF9zb3J0RmllbGQpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c29ydE9yZGVyJywgdGhpcy5kX3NvcnRPcmRlcik7CiAgICAgICAgICAgIHRoaXMucmVzZXRQYWdlKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc29ydE1vZGUgPT09ICdtdWx0aXBsZScpIHsKICAgICAgICAgICAgdmFyIG1ldGFLZXkgPSBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXk7CgogICAgICAgICAgICBpZiAoIW1ldGFLZXkpIHsKICAgICAgICAgICAgICB0aGlzLmRfbXVsdGlTb3J0TWV0YSA9IHRoaXMuZF9tdWx0aVNvcnRNZXRhLmZpbHRlcihmdW5jdGlvbiAobWV0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1ldGEuZmllbGQgPT09IGNvbHVtbkZpZWxkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmFkZE11bHRpU29ydEZpZWxkKGNvbHVtbkZpZWxkKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOm11bHRpU29ydE1ldGEnLCB0aGlzLmRfbXVsdGlTb3J0TWV0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy4kZW1pdCgnc29ydCcsIHRoaXMuY3JlYXRlTGF6eUxvYWRFdmVudChldmVudCkpOwogICAgICAgICAgdGhpcy4kZW1pdCgndmFsdWUtY2hhbmdlJywgdGhpcy5wcm9jZXNzZWREYXRhKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzb3J0U2luZ2xlOiBmdW5jdGlvbiBzb3J0U2luZ2xlKHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmNsZWFyRWRpdGluZ01ldGFEYXRhKCk7CgogICAgICBpZiAodGhpcy5ncm91cFJvd3NCeSAmJiB0aGlzLmdyb3VwUm93c0J5ID09PSB0aGlzLnNvcnRGaWVsZCkgewogICAgICAgIHRoaXMuZF9tdWx0aVNvcnRNZXRhID0gW3sKICAgICAgICAgIGZpZWxkOiB0aGlzLnNvcnRGaWVsZCwKICAgICAgICAgIG9yZGVyOiB0aGlzLnNvcnRPcmRlciB8fCB0aGlzLmRlZmF1bHRTb3J0T3JkZXIKICAgICAgICB9LCB7CiAgICAgICAgICBmaWVsZDogdGhpcy5kX3NvcnRGaWVsZCwKICAgICAgICAgIG9yZGVyOiB0aGlzLmRfc29ydE9yZGVyCiAgICAgICAgfV07CiAgICAgICAgcmV0dXJuIHRoaXMuc29ydE11bHRpcGxlKHZhbHVlKTsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSBfdG9Db25zdW1hYmxlQXJyYXkodmFsdWUpOwoKICAgICAgZGF0YS5zb3J0KGZ1bmN0aW9uIChkYXRhMSwgZGF0YTIpIHsKICAgICAgICB2YXIgdmFsdWUxID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhMSwgX3RoaXMuZF9zb3J0RmllbGQpOwogICAgICAgIHZhciB2YWx1ZTIgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGEyLCBfdGhpcy5kX3NvcnRGaWVsZCk7CiAgICAgICAgdmFyIHJlc3VsdCA9IG51bGw7CiAgICAgICAgaWYgKHZhbHVlMSA9PSBudWxsICYmIHZhbHVlMiAhPSBudWxsKSByZXN1bHQgPSAtMTtlbHNlIGlmICh2YWx1ZTEgIT0gbnVsbCAmJiB2YWx1ZTIgPT0gbnVsbCkgcmVzdWx0ID0gMTtlbHNlIGlmICh2YWx1ZTEgPT0gbnVsbCAmJiB2YWx1ZTIgPT0gbnVsbCkgcmVzdWx0ID0gMDtlbHNlIGlmICh0eXBlb2YgdmFsdWUxID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUyID09PSAnc3RyaW5nJykgcmVzdWx0ID0gdmFsdWUxLmxvY2FsZUNvbXBhcmUodmFsdWUyLCB1bmRlZmluZWQsIHsKICAgICAgICAgIG51bWVyaWM6IHRydWUKICAgICAgICB9KTtlbHNlIHJlc3VsdCA9IHZhbHVlMSA8IHZhbHVlMiA/IC0xIDogdmFsdWUxID4gdmFsdWUyID8gMSA6IDA7CiAgICAgICAgcmV0dXJuIF90aGlzLmRfc29ydE9yZGVyICogcmVzdWx0OwogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9LAogICAgc29ydE11bHRpcGxlOiBmdW5jdGlvbiBzb3J0TXVsdGlwbGUodmFsdWUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmNsZWFyRWRpdGluZ01ldGFEYXRhKCk7CgogICAgICBpZiAodGhpcy5ncm91cFJvd3NCeSAmJiAodGhpcy5kX2dyb3VwUm93c1NvcnRNZXRhIHx8IHRoaXMuZF9tdWx0aVNvcnRNZXRhLmxlbmd0aCAmJiB0aGlzLmdyb3VwUm93c0J5ID09PSB0aGlzLmRfbXVsdGlTb3J0TWV0YVswXS5maWVsZCkpIHsKICAgICAgICB2YXIgZmlyc3RTb3J0TWV0YSA9IHRoaXMuZF9tdWx0aVNvcnRNZXRhWzBdOwogICAgICAgICF0aGlzLmRfZ3JvdXBSb3dzU29ydE1ldGEgJiYgKHRoaXMuZF9ncm91cFJvd3NTb3J0TWV0YSA9IGZpcnN0U29ydE1ldGEpOwoKICAgICAgICBpZiAoZmlyc3RTb3J0TWV0YS5maWVsZCAhPT0gdGhpcy5kX2dyb3VwUm93c1NvcnRNZXRhLmZpZWxkKSB7CiAgICAgICAgICB0aGlzLmRfbXVsdGlTb3J0TWV0YSA9IFt0aGlzLmRfZ3JvdXBSb3dzU29ydE1ldGFdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5kX211bHRpU29ydE1ldGEpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gX3RvQ29uc3VtYWJsZUFycmF5KHZhbHVlKTsKCiAgICAgIGRhdGEuc29ydChmdW5jdGlvbiAoZGF0YTEsIGRhdGEyKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5tdWx0aXNvcnRGaWVsZChkYXRhMSwgZGF0YTIsIDApOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9LAogICAgbXVsdGlzb3J0RmllbGQ6IGZ1bmN0aW9uIG11bHRpc29ydEZpZWxkKGRhdGExLCBkYXRhMiwgaW5kZXgpIHsKICAgICAgdmFyIHZhbHVlMSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEoZGF0YTEsIHRoaXMuZF9tdWx0aVNvcnRNZXRhW2luZGV4XS5maWVsZCk7CiAgICAgIHZhciB2YWx1ZTIgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGEyLCB0aGlzLmRfbXVsdGlTb3J0TWV0YVtpbmRleF0uZmllbGQpOwogICAgICB2YXIgcmVzdWx0ID0gbnVsbDsKCiAgICAgIGlmICh0eXBlb2YgdmFsdWUxID09PSAnc3RyaW5nJyB8fCB2YWx1ZTEgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgICBpZiAodmFsdWUxLmxvY2FsZUNvbXBhcmUgJiYgdmFsdWUxICE9PSB2YWx1ZTIpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmRfbXVsdGlTb3J0TWV0YVtpbmRleF0ub3JkZXIgKiB2YWx1ZTEubG9jYWxlQ29tcGFyZSh2YWx1ZTIsIHVuZGVmaW5lZCwgewogICAgICAgICAgICBudW1lcmljOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0ID0gdmFsdWUxIDwgdmFsdWUyID8gLTEgOiAxOwogICAgICB9CgogICAgICBpZiAodmFsdWUxID09PSB2YWx1ZTIpIHsKICAgICAgICByZXR1cm4gdGhpcy5kX211bHRpU29ydE1ldGEubGVuZ3RoIC0gMSA+IGluZGV4ID8gdGhpcy5tdWx0aXNvcnRGaWVsZChkYXRhMSwgZGF0YTIsIGluZGV4ICsgMSkgOiAwOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5kX211bHRpU29ydE1ldGFbaW5kZXhdLm9yZGVyICogcmVzdWx0OwogICAgfSwKICAgIGFkZE11bHRpU29ydEZpZWxkOiBmdW5jdGlvbiBhZGRNdWx0aVNvcnRGaWVsZChmaWVsZCkgewogICAgICB2YXIgaW5kZXggPSB0aGlzLmRfbXVsdGlTb3J0TWV0YS5maW5kSW5kZXgoZnVuY3Rpb24gKG1ldGEpIHsKICAgICAgICByZXR1cm4gbWV0YS5maWVsZCA9PT0gZmllbGQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGluZGV4ID49IDApIHsKICAgICAgICBpZiAodGhpcy5yZW1vdmFibGVTb3J0ICYmIHRoaXMuZF9tdWx0aVNvcnRNZXRhW2luZGV4XS5vcmRlciAqIC0xID09PSB0aGlzLmRlZmF1bHRTb3J0T3JkZXIpIHRoaXMuZF9tdWx0aVNvcnRNZXRhLnNwbGljZShpbmRleCwgMSk7ZWxzZSB0aGlzLmRfbXVsdGlTb3J0TWV0YVtpbmRleF0gPSB7CiAgICAgICAgICBmaWVsZDogZmllbGQsCiAgICAgICAgICBvcmRlcjogdGhpcy5kX211bHRpU29ydE1ldGFbaW5kZXhdLm9yZGVyICogLTEKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZF9tdWx0aVNvcnRNZXRhLnB1c2goewogICAgICAgICAgZmllbGQ6IGZpZWxkLAogICAgICAgICAgb3JkZXI6IHRoaXMuZGVmYXVsdFNvcnRPcmRlcgogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmRfbXVsdGlTb3J0TWV0YSA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmRfbXVsdGlTb3J0TWV0YSk7CiAgICB9LAogICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghZGF0YSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckVkaXRpbmdNZXRhRGF0YSgpOwogICAgICB2YXIgZ2xvYmFsRmlsdGVyRmllbGRzQXJyYXk7CgogICAgICBpZiAodGhpcy5maWx0ZXJzWydnbG9iYWwnXSkgewogICAgICAgIGdsb2JhbEZpbHRlckZpZWxkc0FycmF5ID0gdGhpcy5nbG9iYWxGaWx0ZXJGaWVsZHMgfHwgdGhpcy5jb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmNvbHVtblByb3AoY29sLCAnZmlsdGVyRmllbGQnKSB8fCBfdGhpczMuY29sdW1uUHJvcChjb2wsICdmaWVsZCcpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgZmlsdGVyZWRWYWx1ZSA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxvY2FsTWF0Y2ggPSB0cnVlOwogICAgICAgIHZhciBnbG9iYWxNYXRjaCA9IGZhbHNlOwogICAgICAgIHZhciBsb2NhbEZpbHRlcmVkID0gZmFsc2U7CgogICAgICAgIGZvciAodmFyIHByb3AgaW4gdGhpcy5maWx0ZXJzKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuZmlsdGVycywgcHJvcCkgJiYgcHJvcCAhPT0gJ2dsb2JhbCcpIHsKICAgICAgICAgICAgbG9jYWxGaWx0ZXJlZCA9IHRydWU7CiAgICAgICAgICAgIHZhciBmaWx0ZXJGaWVsZCA9IHByb3A7CiAgICAgICAgICAgIHZhciBmaWx0ZXJNZXRhID0gdGhpcy5maWx0ZXJzW2ZpbHRlckZpZWxkXTsKCiAgICAgICAgICAgIGlmIChmaWx0ZXJNZXRhLm9wZXJhdG9yKSB7CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGZpbHRlck1ldGEuY29uc3RyYWludHMpLAogICAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJDb25zdHJhaW50ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgIGxvY2FsTWF0Y2ggPSB0aGlzLmV4ZWN1dGVMb2NhbEZpbHRlcihmaWx0ZXJGaWVsZCwgZGF0YVtpXSwgZmlsdGVyQ29uc3RyYWludCk7CgogICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyTWV0YS5vcGVyYXRvciA9PT0gRmlsdGVyT3BlcmF0b3IuT1IgJiYgbG9jYWxNYXRjaCB8fCBmaWx0ZXJNZXRhLm9wZXJhdG9yID09PSBGaWx0ZXJPcGVyYXRvci5BTkQgJiYgIWxvY2FsTWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbG9jYWxNYXRjaCA9IHRoaXMuZXhlY3V0ZUxvY2FsRmlsdGVyKGZpbHRlckZpZWxkLCBkYXRhW2ldLCBmaWx0ZXJNZXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFsb2NhbE1hdGNoKSB7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmZpbHRlcnNbJ2dsb2JhbCddICYmICFnbG9iYWxNYXRjaCAmJiBnbG9iYWxGaWx0ZXJGaWVsZHNBcnJheSkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBnbG9iYWxGaWx0ZXJGaWVsZHNBcnJheS5sZW5ndGg7IGorKykgewogICAgICAgICAgICB2YXIgZ2xvYmFsRmlsdGVyRmllbGQgPSBnbG9iYWxGaWx0ZXJGaWVsZHNBcnJheVtqXTsKICAgICAgICAgICAgZ2xvYmFsTWF0Y2ggPSBGaWx0ZXJTZXJ2aWNlLmZpbHRlcnNbdGhpcy5maWx0ZXJzWydnbG9iYWwnXS5tYXRjaE1vZGUgfHwgRmlsdGVyTWF0Y2hNb2RlLkNPTlRBSU5TXShPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGFbaV0sIGdsb2JhbEZpbHRlckZpZWxkKSwgdGhpcy5maWx0ZXJzWydnbG9iYWwnXS52YWx1ZSwgdGhpcy5maWx0ZXJMb2NhbGUpOwoKICAgICAgICAgICAgaWYgKGdsb2JhbE1hdGNoKSB7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBtYXRjaGVzID0gdm9pZCAwOwoKICAgICAgICBpZiAodGhpcy5maWx0ZXJzWydnbG9iYWwnXSkgewogICAgICAgICAgbWF0Y2hlcyA9IGxvY2FsRmlsdGVyZWQgPyBsb2NhbEZpbHRlcmVkICYmIGxvY2FsTWF0Y2ggJiYgZ2xvYmFsTWF0Y2ggOiBnbG9iYWxNYXRjaDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0Y2hlcyA9IGxvY2FsRmlsdGVyZWQgJiYgbG9jYWxNYXRjaDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXRjaGVzKSB7CiAgICAgICAgICBmaWx0ZXJlZFZhbHVlLnB1c2goZGF0YVtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZmlsdGVyZWRWYWx1ZS5sZW5ndGggPT09IHRoaXMudmFsdWUubGVuZ3RoKSB7CiAgICAgICAgZmlsdGVyZWRWYWx1ZSA9IGRhdGE7CiAgICAgIH0KCiAgICAgIHZhciBmaWx0ZXJFdmVudCA9IHRoaXMuY3JlYXRlTGF6eUxvYWRFdmVudCgpOwogICAgICBmaWx0ZXJFdmVudC5maWx0ZXJlZFZhbHVlID0gZmlsdGVyZWRWYWx1ZTsKICAgICAgdGhpcy4kZW1pdCgnZmlsdGVyJywgZmlsdGVyRXZlbnQpOwogICAgICB0aGlzLiRlbWl0KCd2YWx1ZS1jaGFuZ2UnLCBmaWx0ZXJlZFZhbHVlKTsKICAgICAgcmV0dXJuIGZpbHRlcmVkVmFsdWU7CiAgICB9LAogICAgZXhlY3V0ZUxvY2FsRmlsdGVyOiBmdW5jdGlvbiBleGVjdXRlTG9jYWxGaWx0ZXIoZmllbGQsIHJvd0RhdGEsIGZpbHRlck1ldGEpIHsKICAgICAgdmFyIGZpbHRlclZhbHVlID0gZmlsdGVyTWV0YS52YWx1ZTsKICAgICAgdmFyIGZpbHRlck1hdGNoTW9kZSA9IGZpbHRlck1ldGEubWF0Y2hNb2RlIHx8IEZpbHRlck1hdGNoTW9kZS5TVEFSVFNfV0lUSDsKICAgICAgdmFyIGRhdGFGaWVsZFZhbHVlID0gT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShyb3dEYXRhLCBmaWVsZCk7CiAgICAgIHZhciBmaWx0ZXJDb25zdHJhaW50ID0gRmlsdGVyU2VydmljZS5maWx0ZXJzW2ZpbHRlck1hdGNoTW9kZV07CiAgICAgIHJldHVybiBmaWx0ZXJDb25zdHJhaW50KGRhdGFGaWVsZFZhbHVlLCBmaWx0ZXJWYWx1ZSwgdGhpcy5maWx0ZXJMb2NhbGUpOwogICAgfSwKICAgIG9uUm93Q2xpY2s6IGZ1bmN0aW9uIG9uUm93Q2xpY2soZSkgewogICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7CgogICAgICBpZiAoRG9tSGFuZGxlci5pc0NsaWNrYWJsZShldmVudC50YXJnZXQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdyb3ctY2xpY2snLCBlKTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUpIHsKICAgICAgICB2YXIgcm93RGF0YSA9IGUuZGF0YTsKICAgICAgICB2YXIgcm93SW5kZXggPSBlLmluZGV4OwoKICAgICAgICBpZiAodGhpcy5pc011bHRpcGxlU2VsZWN0aW9uTW9kZSgpICYmIGV2ZW50LnNoaWZ0S2V5ICYmIHRoaXMuYW5jaG9yUm93SW5kZXggIT0gbnVsbCkgewogICAgICAgICAgRG9tSGFuZGxlci5jbGVhclNlbGVjdGlvbigpOwogICAgICAgICAgdGhpcy5yYW5nZVJvd0luZGV4ID0gcm93SW5kZXg7CiAgICAgICAgICB0aGlzLnNlbGVjdFJhbmdlKGV2ZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5pc1NlbGVjdGVkKHJvd0RhdGEpOwogICAgICAgICAgdmFyIG1ldGFTZWxlY3Rpb24gPSB0aGlzLnJvd1RvdWNoZWQgPyBmYWxzZSA6IHRoaXMubWV0YUtleVNlbGVjdGlvbjsKICAgICAgICAgIHRoaXMuYW5jaG9yUm93SW5kZXggPSByb3dJbmRleDsKICAgICAgICAgIHRoaXMucmFuZ2VSb3dJbmRleCA9IHJvd0luZGV4OwoKICAgICAgICAgIGlmIChtZXRhU2VsZWN0aW9uKSB7CiAgICAgICAgICAgIHZhciBtZXRhS2V5ID0gZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5OwoKICAgICAgICAgICAgaWYgKHNlbGVjdGVkICYmIG1ldGFLZXkpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5pc1NpbmdsZVNlbGVjdGlvbk1vZGUoKSkgewogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGlvbicsIG51bGwpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleEluU2VsZWN0aW9uKHJvd0RhdGEpOwoKICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgIT0gc2VsZWN0aW9uSW5kZXg7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgX3NlbGVjdGlvbik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyb3ctdW5zZWxlY3QnLCB7CiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCwKICAgICAgICAgICAgICAgIGRhdGE6IHJvd0RhdGEsCiAgICAgICAgICAgICAgICBpbmRleDogZXZlbnQuaW5kZXgsCiAgICAgICAgICAgICAgICB0eXBlOiAncm93JwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh0aGlzLmlzU2luZ2xlU2VsZWN0aW9uTW9kZSgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgcm93RGF0YSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTXVsdGlwbGVTZWxlY3Rpb25Nb2RlKCkpIHsKICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0aW9uMiA9IG1ldGFLZXkgPyB0aGlzLnNlbGVjdGlvbiB8fCBbXSA6IFtdOwoKICAgICAgICAgICAgICAgIF9zZWxlY3Rpb24yID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfc2VsZWN0aW9uMiksIFtyb3dEYXRhXSk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgX3NlbGVjdGlvbjIpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncm93LXNlbGVjdCcsIHsKICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgICAgICAgZGF0YTogcm93RGF0YSwKICAgICAgICAgICAgICAgIGluZGV4OiBldmVudC5pbmRleCwKICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdzaW5nbGUnKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgbnVsbCk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyb3ctdW5zZWxlY3QnLCB7CiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgICAgICAgICBpbmRleDogZXZlbnQuaW5kZXgsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGlvbicsIHJvd0RhdGEpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncm93LXNlbGVjdCcsIHsKICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHJvd0RhdGEsCiAgICAgICAgICAgICAgICAgIGluZGV4OiBldmVudC5pbmRleCwKICAgICAgICAgICAgICAgICAgdHlwZTogJ3JvdycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdtdWx0aXBsZScpIHsKICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleEluU2VsZWN0aW9uKHJvd0RhdGEpOwoKICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0aW9uMyA9IHRoaXMuc2VsZWN0aW9uLmZpbHRlcihmdW5jdGlvbiAodmFsLCBpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpICE9IF9zZWxlY3Rpb25JbmRleDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzZWxlY3Rpb24nLCBfc2VsZWN0aW9uMyk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdyb3ctdW5zZWxlY3QnLCB7CiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgICAgICAgICBpbmRleDogZXZlbnQuaW5kZXgsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIF9zZWxlY3Rpb240ID0gdGhpcy5zZWxlY3Rpb24gPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuc2VsZWN0aW9uKSwgW3Jvd0RhdGFdKSA6IFtyb3dEYXRhXTsKCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgX3NlbGVjdGlvbjQpOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncm93LXNlbGVjdCcsIHsKICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHJvd0RhdGEsCiAgICAgICAgICAgICAgICAgIGluZGV4OiBldmVudC5pbmRleCwKICAgICAgICAgICAgICAgICAgdHlwZTogJ3JvdycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5yb3dUb3VjaGVkID0gZmFsc2U7CiAgICB9LAogICAgb25Sb3dEYmxDbGljazogZnVuY3Rpb24gb25Sb3dEYmxDbGljayhlKSB7CiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDsKCiAgICAgIGlmIChEb21IYW5kbGVyLmlzQ2xpY2thYmxlKGV2ZW50LnRhcmdldCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ3Jvdy1kYmxjbGljaycsIGUpOwogICAgfSwKICAgIG9uUm93UmlnaHRDbGljazogZnVuY3Rpb24gb25Sb3dSaWdodENsaWNrKGV2ZW50KSB7CiAgICAgIERvbUhhbmRsZXIuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQuZm9jdXMoKTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmNvbnRleHRNZW51U2VsZWN0aW9uJywgZXZlbnQuZGF0YSk7CiAgICAgIHRoaXMuJGVtaXQoJ3Jvdy1jb250ZXh0bWVudScsIGV2ZW50KTsKICAgIH0sCiAgICBvblJvd1RvdWNoRW5kOiBmdW5jdGlvbiBvblJvd1RvdWNoRW5kKCkgewogICAgICB0aGlzLnJvd1RvdWNoZWQgPSB0cnVlOwogICAgfSwKICAgIG9uUm93S2V5RG93bjogZnVuY3Rpb24gb25Sb3dLZXlEb3duKGUpIHsKICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50OwogICAgICB2YXIgcm93RGF0YSA9IGUuZGF0YTsKICAgICAgdmFyIHJvd0luZGV4ID0gZS5pbmRleDsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUpIHsKICAgICAgICB2YXIgcm93ID0gZXZlbnQudGFyZ2V0OwoKICAgICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7CiAgICAgICAgICAvL2Rvd24gYXJyb3cKICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgIHZhciBuZXh0Um93ID0gdGhpcy5maW5kTmV4dFNlbGVjdGFibGVSb3cocm93KTsKCiAgICAgICAgICAgIGlmIChuZXh0Um93KSB7CiAgICAgICAgICAgICAgbmV4dFJvdy5mb2N1cygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vdXAgYXJyb3cKCiAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICB2YXIgcHJldlJvdyA9IHRoaXMuZmluZFByZXZTZWxlY3RhYmxlUm93KHJvdyk7CgogICAgICAgICAgICBpZiAocHJldlJvdykgewogICAgICAgICAgICAgIHByZXZSb3cuZm9jdXMoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvL2VudGVyCgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgdGhpcy5vblJvd0NsaWNrKHsKICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCwKICAgICAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgICAgIGluZGV4OiByb3dJbmRleAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgLy9ubyBvcAogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmaW5kTmV4dFNlbGVjdGFibGVSb3c6IGZ1bmN0aW9uIGZpbmROZXh0U2VsZWN0YWJsZVJvdyhyb3cpIHsKICAgICAgdmFyIG5leHRSb3cgPSByb3cubmV4dEVsZW1lbnRTaWJsaW5nOwoKICAgICAgaWYgKG5leHRSb3cpIHsKICAgICAgICBpZiAoRG9tSGFuZGxlci5oYXNDbGFzcyhuZXh0Um93LCAncC1zZWxlY3RhYmxlLXJvdycpKSByZXR1cm4gbmV4dFJvdztlbHNlIHJldHVybiB0aGlzLmZpbmROZXh0U2VsZWN0YWJsZVJvdyhuZXh0Um93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGZpbmRQcmV2U2VsZWN0YWJsZVJvdzogZnVuY3Rpb24gZmluZFByZXZTZWxlY3RhYmxlUm93KHJvdykgewogICAgICB2YXIgcHJldlJvdyA9IHJvdy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwoKICAgICAgaWYgKHByZXZSb3cpIHsKICAgICAgICBpZiAoRG9tSGFuZGxlci5oYXNDbGFzcyhwcmV2Um93LCAncC1zZWxlY3RhYmxlLXJvdycpKSByZXR1cm4gcHJldlJvdztlbHNlIHJldHVybiB0aGlzLmZpbmRQcmV2U2VsZWN0YWJsZVJvdyhwcmV2Um93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZVJvd1dpdGhSYWRpbzogZnVuY3Rpb24gdG9nZ2xlUm93V2l0aFJhZGlvKGV2ZW50KSB7CiAgICAgIHZhciByb3dEYXRhID0gZXZlbnQuZGF0YTsKCiAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQocm93RGF0YSkpIHsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgbnVsbCk7CiAgICAgICAgdGhpcy4kZW1pdCgncm93LXVuc2VsZWN0JywgewogICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgdHlwZTogJ3JhZGlvYnV0dG9uJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzZWxlY3Rpb24nLCByb3dEYXRhKTsKICAgICAgICB0aGlzLiRlbWl0KCdyb3ctc2VsZWN0JywgewogICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgdHlwZTogJ3JhZGlvYnV0dG9uJwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlUm93V2l0aENoZWNrYm94OiBmdW5jdGlvbiB0b2dnbGVSb3dXaXRoQ2hlY2tib3goZXZlbnQpIHsKICAgICAgdmFyIHJvd0RhdGEgPSBldmVudC5kYXRhOwoKICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZChyb3dEYXRhKSkgewogICAgICAgIHZhciBzZWxlY3Rpb25JbmRleCA9IHRoaXMuZmluZEluZGV4SW5TZWxlY3Rpb24ocm93RGF0YSk7CgogICAgICAgIHZhciBfc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uICh2YWwsIGkpIHsKICAgICAgICAgIHJldHVybiBpICE9IHNlbGVjdGlvbkluZGV4OwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0aW9uJywgX3NlbGVjdGlvbik7CiAgICAgICAgdGhpcy4kZW1pdCgncm93LXVuc2VsZWN0JywgewogICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICBkYXRhOiByb3dEYXRhLAogICAgICAgICAgdHlwZTogJ2NoZWNrYm94JwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfc2VsZWN0aW9uNSA9IHRoaXMuc2VsZWN0aW9uID8gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuc2VsZWN0aW9uKSA6IFtdOwoKICAgICAgICBfc2VsZWN0aW9uNSA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX3NlbGVjdGlvbjUpLCBbcm93RGF0YV0pOwogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzZWxlY3Rpb24nLCBfc2VsZWN0aW9uNSk7CiAgICAgICAgdGhpcy4kZW1pdCgncm93LXNlbGVjdCcsIHsKICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgZGF0YTogcm93RGF0YSwKICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZVJvd3NXaXRoQ2hlY2tib3g6IGZ1bmN0aW9uIHRvZ2dsZVJvd3NXaXRoQ2hlY2tib3goZXZlbnQpIHsKICAgICAgdmFyIHByb2Nlc3NlZERhdGEgPSB0aGlzLnByb2Nlc3NlZERhdGE7CiAgICAgIHZhciBjaGVja2VkID0gdGhpcy5hbGxSb3dzU2VsZWN0ZWQ7CgogICAgICB2YXIgX3NlbGVjdGlvbiA9IGNoZWNrZWQgPyBbXSA6IHRoaXMuZnJvemVuVmFsdWUgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZnJvemVuVmFsdWUpLCBfdG9Db25zdW1hYmxlQXJyYXkocHJvY2Vzc2VkRGF0YSkpIDogcHJvY2Vzc2VkRGF0YTsKCiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzZWxlY3Rpb24nLCBfc2VsZWN0aW9uKTsKICAgICAgaWYgKGNoZWNrZWQpIHRoaXMuJGVtaXQoJ3Jvdy11bnNlbGVjdC1hbGwnLCB7CiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQKICAgICAgfSk7ZWxzZSB0aGlzLiRlbWl0KCdyb3ctc2VsZWN0LWFsbCcsIHsKICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCwKICAgICAgICBkYXRhOiBfc2VsZWN0aW9uCiAgICAgIH0pOwogICAgfSwKICAgIGlzU2luZ2xlU2VsZWN0aW9uTW9kZTogZnVuY3Rpb24gaXNTaW5nbGVTZWxlY3Rpb25Nb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnc2luZ2xlJzsKICAgIH0sCiAgICBpc011bHRpcGxlU2VsZWN0aW9uTW9kZTogZnVuY3Rpb24gaXNNdWx0aXBsZVNlbGVjdGlvbk1vZGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdtdWx0aXBsZSc7CiAgICB9LAogICAgaXNTZWxlY3RlZDogZnVuY3Rpb24gaXNTZWxlY3RlZChyb3dEYXRhKSB7CiAgICAgIGlmIChyb3dEYXRhICYmIHRoaXMuc2VsZWN0aW9uKSB7CiAgICAgICAgaWYgKHRoaXMuZGF0YUtleSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZF9zZWxlY3Rpb25LZXlzID8gdGhpcy5kX3NlbGVjdGlvbktleXNbT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShyb3dEYXRhLCB0aGlzLmRhdGFLZXkpXSAhPT0gdW5kZWZpbmVkIDogZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gdGhpcy5maW5kSW5kZXhJblNlbGVjdGlvbihyb3dEYXRhKSA+IC0xO2Vsc2UgcmV0dXJuIHRoaXMuZXF1YWxzKHJvd0RhdGEsIHRoaXMuc2VsZWN0aW9uKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBmaW5kSW5kZXhJblNlbGVjdGlvbjogZnVuY3Rpb24gZmluZEluZGV4SW5TZWxlY3Rpb24ocm93RGF0YSkgewogICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXgocm93RGF0YSwgdGhpcy5zZWxlY3Rpb24pOwogICAgfSwKICAgIGZpbmRJbmRleDogZnVuY3Rpb24gZmluZEluZGV4KHJvd0RhdGEsIGNvbGxlY3Rpb24pIHsKICAgICAgdmFyIGluZGV4ID0gLTE7CgogICAgICBpZiAoY29sbGVjdGlvbiAmJiBjb2xsZWN0aW9uLmxlbmd0aCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMuZXF1YWxzKHJvd0RhdGEsIGNvbGxlY3Rpb25baV0pKSB7CiAgICAgICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaW5kZXg7CiAgICB9LAogICAgdXBkYXRlU2VsZWN0aW9uS2V5czogZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uS2V5cyhzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5kX3NlbGVjdGlvbktleXMgPSB7fTsKCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdGlvbikpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlbGVjdGlvbiksCiAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICB0aGlzLmRfc2VsZWN0aW9uS2V5c1tTdHJpbmcoT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShkYXRhLCB0aGlzLmRhdGFLZXkpKV0gPSAxOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRfc2VsZWN0aW9uS2V5c1tTdHJpbmcoT2JqZWN0VXRpbHMucmVzb2x2ZUZpZWxkRGF0YShzZWxlY3Rpb24sIHRoaXMuZGF0YUtleSkpXSA9IDE7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVFeHBhbmRlZFJvd0tleXM6IGZ1bmN0aW9uIHVwZGF0ZUV4cGFuZGVkUm93S2V5cyhleHBhbmRlZFJvd3MpIHsKICAgICAgaWYgKGV4cGFuZGVkUm93cyAmJiBleHBhbmRlZFJvd3MubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5kX2V4cGFuZGVkUm93S2V5cyA9IHt9OwoKICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGV4cGFuZGVkUm93cyksCiAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICB0aGlzLmRfZXhwYW5kZWRSb3dLZXlzW1N0cmluZyhPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGEsIHRoaXMuZGF0YUtleSkpXSA9IDE7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZF9leHBhbmRlZFJvd0tleXMgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlRWRpdGluZ1Jvd0tleXM6IGZ1bmN0aW9uIHVwZGF0ZUVkaXRpbmdSb3dLZXlzKGVkaXRpbmdSb3dzKSB7CiAgICAgIGlmIChlZGl0aW5nUm93cyAmJiBlZGl0aW5nUm93cy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmRfZWRpdGluZ1Jvd0tleXMgPSB7fTsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlZGl0aW5nUm93cyksCiAgICAgICAgICAgIF9zdGVwNDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgICB0aGlzLmRfZWRpdGluZ1Jvd0tleXNbU3RyaW5nKE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEoZGF0YSwgdGhpcy5kYXRhS2V5KSldID0gMTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kX2VkaXRpbmdSb3dLZXlzID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKGRhdGExLCBkYXRhMikgewogICAgICByZXR1cm4gdGhpcy5jb21wYXJlU2VsZWN0aW9uQnkgPT09ICdlcXVhbHMnID8gZGF0YTEgPT09IGRhdGEyIDogT2JqZWN0VXRpbHMuZXF1YWxzKGRhdGExLCBkYXRhMiwgdGhpcy5kYXRhS2V5KTsKICAgIH0sCiAgICBzZWxlY3RSYW5nZTogZnVuY3Rpb24gc2VsZWN0UmFuZ2UoZXZlbnQpIHsKICAgICAgdmFyIHJhbmdlU3RhcnQsIHJhbmdlRW5kOwoKICAgICAgaWYgKHRoaXMucmFuZ2VSb3dJbmRleCA+IHRoaXMuYW5jaG9yUm93SW5kZXgpIHsKICAgICAgICByYW5nZVN0YXJ0ID0gdGhpcy5hbmNob3JSb3dJbmRleDsKICAgICAgICByYW5nZUVuZCA9IHRoaXMucmFuZ2VSb3dJbmRleDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlUm93SW5kZXggPCB0aGlzLmFuY2hvclJvd0luZGV4KSB7CiAgICAgICAgcmFuZ2VTdGFydCA9IHRoaXMucmFuZ2VSb3dJbmRleDsKICAgICAgICByYW5nZUVuZCA9IHRoaXMuYW5jaG9yUm93SW5kZXg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmFuZ2VTdGFydCA9IHRoaXMucmFuZ2VSb3dJbmRleDsKICAgICAgICByYW5nZUVuZCA9IHRoaXMucmFuZ2VSb3dJbmRleDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGF6eSAmJiB0aGlzLnBhZ2luYXRvcikgewogICAgICAgIHJhbmdlU3RhcnQgLT0gdGhpcy5maXJzdDsKICAgICAgICByYW5nZUVuZCAtPSB0aGlzLmZpcnN0OwogICAgICB9CgogICAgICB2YXIgdmFsdWUgPSB0aGlzLnByb2Nlc3NlZERhdGE7CiAgICAgIHZhciBfc2VsZWN0aW9uID0gW107CgogICAgICBmb3IgKHZhciBpID0gcmFuZ2VTdGFydDsgaSA8PSByYW5nZUVuZDsgaSsrKSB7CiAgICAgICAgdmFyIHJhbmdlUm93RGF0YSA9IHZhbHVlW2ldOwoKICAgICAgICBfc2VsZWN0aW9uLnB1c2gocmFuZ2VSb3dEYXRhKTsKCiAgICAgICAgdGhpcy4kZW1pdCgncm93LXNlbGVjdCcsIHsKICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgZGF0YTogcmFuZ2VSb3dEYXRhLAogICAgICAgICAgdHlwZTogJ3JvdycKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGlvbicsIF9zZWxlY3Rpb24pOwogICAgfSwKICAgIGV4cG9ydENTVjogZnVuY3Rpb24gZXhwb3J0Q1NWKG9wdGlvbnMpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHRoaXMucHJvY2Vzc2VkRGF0YTsKICAgICAgdmFyIGNzdiA9ICJcdUZFRkYiOwogICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNlbGVjdGlvbk9ubHkpIGRhdGEgPSB0aGlzLnNlbGVjdGlvbiB8fCBbXTtlbHNlIGlmICh0aGlzLmZyb3plblZhbHVlKSBkYXRhID0gZGF0YSA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5mcm96ZW5WYWx1ZSksIF90b0NvbnN1bWFibGVBcnJheShkYXRhKSkgOiB0aGlzLmZyb3plblZhbHVlOyAvL2hlYWRlcnMKCiAgICAgIHZhciBoZWFkZXJJbml0aWF0ZWQgPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuY29sdW1uc1tpXTsKCiAgICAgICAgaWYgKHRoaXMuY29sdW1uUHJvcChjb2x1bW4sICdleHBvcnRhYmxlJykgIT09IGZhbHNlICYmIHRoaXMuY29sdW1uUHJvcChjb2x1bW4sICdmaWVsZCcpKSB7CiAgICAgICAgICBpZiAoaGVhZGVySW5pdGlhdGVkKSBjc3YgKz0gdGhpcy5jc3ZTZXBhcmF0b3I7ZWxzZSBoZWFkZXJJbml0aWF0ZWQgPSB0cnVlOwogICAgICAgICAgY3N2ICs9ICciJyArICh0aGlzLmNvbHVtblByb3AoY29sdW1uLCAnaGVhZGVyJykgfHwgdGhpcy5jb2x1bW5Qcm9wKGNvbHVtbiwgJ2ZpZWxkJykpICsgJyInOwogICAgICAgIH0KICAgICAgfSAvL2JvZHkKCgogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICBjc3YgKz0gJ1xuJzsKICAgICAgICAgIHZhciByb3dJbml0aWF0ZWQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX3RoaXM0LmNvbHVtbnMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgIHZhciBfY29sdW1uID0gX3RoaXM0LmNvbHVtbnNbX2ldOwoKICAgICAgICAgICAgaWYgKF90aGlzNC5jb2x1bW5Qcm9wKF9jb2x1bW4sICdleHBvcnRhYmxlJykgIT09IGZhbHNlICYmIF90aGlzNC5jb2x1bW5Qcm9wKF9jb2x1bW4sICdmaWVsZCcpKSB7CiAgICAgICAgICAgICAgaWYgKHJvd0luaXRpYXRlZCkgY3N2ICs9IF90aGlzNC5jc3ZTZXBhcmF0b3I7ZWxzZSByb3dJbml0aWF0ZWQgPSB0cnVlOwogICAgICAgICAgICAgIHZhciBjZWxsRGF0YSA9IE9iamVjdFV0aWxzLnJlc29sdmVGaWVsZERhdGEocmVjb3JkLCBfdGhpczQuY29sdW1uUHJvcChfY29sdW1uLCAnZmllbGQnKSk7CgogICAgICAgICAgICAgIGlmIChjZWxsRGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LmV4cG9ydEZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgIGNlbGxEYXRhID0gX3RoaXM0LmV4cG9ydEZ1bmN0aW9uKHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiBjZWxsRGF0YSwKICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3RoaXM0LmNvbHVtblByb3AoX2NvbHVtbiwgJ2ZpZWxkJykKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgY2VsbERhdGEgPSBTdHJpbmcoY2VsbERhdGEpLnJlcGxhY2UoLyIvZywgJyIiJyk7CiAgICAgICAgICAgICAgfSBlbHNlIGNlbGxEYXRhID0gJyc7CgogICAgICAgICAgICAgIGNzdiArPSAnIicgKyBjZWxsRGF0YSArICciJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7CiAgICAgICAgdHlwZTogJ3RleHQvY3N2O2NoYXJzZXQ9dXRmLTg7JwogICAgICB9KTsKCiAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHsKICAgICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihibG9iLCB0aGlzLmV4cG9ydEZpbGVuYW1lICsgJy5jc3YnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKCiAgICAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTsKICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIHRoaXMuZXhwb3J0RmlsZW5hbWUgKyAnLmNzdicpOwogICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjc3YgPSAnZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LCcgKyBjc3Y7CiAgICAgICAgICB3aW5kb3cub3BlbihlbmNvZGVVUkkoY3N2KSk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICB9CiAgICB9LAogICAgcmVzZXRQYWdlOiBmdW5jdGlvbiByZXNldFBhZ2UoKSB7CiAgICAgIHRoaXMuZF9maXJzdCA9IDA7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpmaXJzdCcsIHRoaXMuZF9maXJzdCk7CiAgICB9LAogICAgb25Db2x1bW5SZXNpemVTdGFydDogZnVuY3Rpb24gb25Db2x1bW5SZXNpemVTdGFydChldmVudCkgewogICAgICB2YXIgY29udGFpbmVyTGVmdCA9IERvbUhhbmRsZXIuZ2V0T2Zmc2V0KHRoaXMuJGVsKS5sZWZ0OwogICAgICB0aGlzLnJlc2l6ZUNvbHVtbkVsZW1lbnQgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudDsKICAgICAgdGhpcy5jb2x1bW5SZXNpemluZyA9IHRydWU7CiAgICAgIHRoaXMubGFzdFJlc2l6ZUhlbHBlclggPSBldmVudC5wYWdlWCAtIGNvbnRhaW5lckxlZnQgKyB0aGlzLiRlbC5zY3JvbGxMZWZ0OwogICAgICB0aGlzLmJpbmRDb2x1bW5SZXNpemVFdmVudHMoKTsKICAgIH0sCiAgICBvbkNvbHVtblJlc2l6ZTogZnVuY3Rpb24gb25Db2x1bW5SZXNpemUoZXZlbnQpIHsKICAgICAgdmFyIGNvbnRhaW5lckxlZnQgPSBEb21IYW5kbGVyLmdldE9mZnNldCh0aGlzLiRlbCkubGVmdDsKICAgICAgRG9tSGFuZGxlci5hZGRDbGFzcyh0aGlzLiRlbCwgJ3AtdW5zZWxlY3RhYmxlLXRleHQnKTsKICAgICAgdGhpcy4kcmVmcy5yZXNpemVIZWxwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy4kZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4JzsKICAgICAgdGhpcy4kcmVmcy5yZXNpemVIZWxwZXIuc3R5bGUudG9wID0gMCArICdweCc7CiAgICAgIHRoaXMuJHJlZnMucmVzaXplSGVscGVyLnN0eWxlLmxlZnQgPSBldmVudC5wYWdlWCAtIGNvbnRhaW5lckxlZnQgKyB0aGlzLiRlbC5zY3JvbGxMZWZ0ICsgJ3B4JzsKICAgICAgdGhpcy4kcmVmcy5yZXNpemVIZWxwZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICB9LAogICAgb25Db2x1bW5SZXNpemVFbmQ6IGZ1bmN0aW9uIG9uQ29sdW1uUmVzaXplRW5kKCkgewogICAgICB2YXIgZGVsdGEgPSB0aGlzLiRyZWZzLnJlc2l6ZUhlbHBlci5vZmZzZXRMZWZ0IC0gdGhpcy5sYXN0UmVzaXplSGVscGVyWDsKICAgICAgdmFyIGNvbHVtbldpZHRoID0gdGhpcy5yZXNpemVDb2x1bW5FbGVtZW50Lm9mZnNldFdpZHRoOwogICAgICB2YXIgbmV3Q29sdW1uV2lkdGggPSBjb2x1bW5XaWR0aCArIGRlbHRhOwogICAgICB2YXIgbWluV2lkdGggPSB0aGlzLnJlc2l6ZUNvbHVtbkVsZW1lbnQuc3R5bGUubWluV2lkdGggfHwgMTU7CgogICAgICBpZiAoY29sdW1uV2lkdGggKyBkZWx0YSA+IHBhcnNlSW50KG1pbldpZHRoLCAxMCkpIHsKICAgICAgICBpZiAodGhpcy5jb2x1bW5SZXNpemVNb2RlID09PSAnZml0JykgewogICAgICAgICAgdmFyIG5leHRDb2x1bW4gPSB0aGlzLnJlc2l6ZUNvbHVtbkVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgICAgdmFyIG5leHRDb2x1bW5XaWR0aCA9IG5leHRDb2x1bW4ub2Zmc2V0V2lkdGggLSBkZWx0YTsKCiAgICAgICAgICBpZiAobmV3Q29sdW1uV2lkdGggPiAxNSAmJiBuZXh0Q29sdW1uV2lkdGggPiAxNSkgewogICAgICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsYWJsZSkgewogICAgICAgICAgICAgIHRoaXMucmVzaXplQ29sdW1uRWxlbWVudC5zdHlsZS53aWR0aCA9IG5ld0NvbHVtbldpZHRoICsgJ3B4JzsKCiAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW4pIHsKICAgICAgICAgICAgICAgIG5leHRDb2x1bW4uc3R5bGUud2lkdGggPSBuZXh0Q29sdW1uV2lkdGggKyAncHgnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVRhYmxlQ2VsbHMobmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29sdW1uUmVzaXplTW9kZSA9PT0gJ2V4cGFuZCcpIHsKICAgICAgICAgIHZhciB0YWJsZVdpZHRoID0gdGhpcy4kcmVmcy50YWJsZS5vZmZzZXRXaWR0aCArIGRlbHRhICsgJ3B4JzsKICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUuc3R5bGUud2lkdGggPSB0YWJsZVdpZHRoOwogICAgICAgICAgdGhpcy4kcmVmcy50YWJsZS5zdHlsZS5taW5XaWR0aCA9IHRhYmxlV2lkdGg7CiAgICAgICAgICBpZiAoIXRoaXMuc2Nyb2xsYWJsZSkgdGhpcy5yZXNpemVDb2x1bW5FbGVtZW50LnN0eWxlLndpZHRoID0gbmV3Q29sdW1uV2lkdGggKyAncHgnO2Vsc2UgdGhpcy5yZXNpemVUYWJsZUNlbGxzKG5ld0NvbHVtbldpZHRoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuJGVtaXQoJ2NvbHVtbi1yZXNpemUtZW5kJywgewogICAgICAgICAgZWxlbWVudDogdGhpcy5yZXNpemVDb2x1bW5FbGVtZW50LAogICAgICAgICAgZGVsdGE6IGRlbHRhCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnMucmVzaXplSGVscGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIHRoaXMucmVzaXplQ29sdW1uID0gbnVsbDsKICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLiRlbCwgJ3AtdW5zZWxlY3RhYmxlLXRleHQnKTsKICAgICAgdGhpcy51bmJpbmRDb2x1bW5SZXNpemVFdmVudHMoKTsKCiAgICAgIGlmICh0aGlzLmlzU3RhdGVmdWwoKSkgewogICAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICByZXNpemVUYWJsZUNlbGxzOiBmdW5jdGlvbiByZXNpemVUYWJsZUNlbGxzKG5ld0NvbHVtbldpZHRoLCBuZXh0Q29sdW1uV2lkdGgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgY29sSW5kZXggPSBEb21IYW5kbGVyLmluZGV4KHRoaXMucmVzaXplQ29sdW1uRWxlbWVudCk7CiAgICAgIHZhciB3aWR0aHMgPSBbXTsKICAgICAgdmFyIGhlYWRlcnMgPSBEb21IYW5kbGVyLmZpbmQodGhpcy4kcmVmcy50YWJsZSwgJy5wLWRhdGF0YWJsZS10aGVhZCA+IHRyID4gdGgnKTsKICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHsKICAgICAgICByZXR1cm4gd2lkdGhzLnB1c2goRG9tSGFuZGxlci5nZXRPdXRlcldpZHRoKGhlYWRlcikpOwogICAgICB9KTsKICAgICAgdGhpcy5kZXN0cm95U3R5bGVFbGVtZW50KCk7CiAgICAgIHRoaXMuY3JlYXRlU3R5bGVFbGVtZW50KCk7CiAgICAgIHZhciBpbm5lckhUTUwgPSAnJzsKICAgICAgd2lkdGhzLmZvckVhY2goZnVuY3Rpb24gKHdpZHRoLCBpbmRleCkgewogICAgICAgIHZhciBjb2xXaWR0aCA9IGluZGV4ID09PSBjb2xJbmRleCA/IG5ld0NvbHVtbldpZHRoIDogbmV4dENvbHVtbldpZHRoICYmIGluZGV4ID09PSBjb2xJbmRleCArIDEgPyBuZXh0Q29sdW1uV2lkdGggOiB3aWR0aDsKICAgICAgICBpbm5lckhUTUwgKz0gIlxuICAgICAgICAgICAgICAgICAgICAucC1kYXRhdGFibGVbIi5jb25jYXQoX3RoaXM1LmF0dHJpYnV0ZVNlbGVjdG9yLCAiXSAucC1kYXRhdGFibGUtdGhlYWQgPiB0ciA+IHRoOm50aC1jaGlsZCgiKS5jb25jYXQoaW5kZXggKyAxLCAiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAwIDAgIikuY29uY2F0KGNvbFdpZHRoLCAicHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC5wLWRhdGF0YWJsZVsiKS5jb25jYXQoX3RoaXM1LmF0dHJpYnV0ZVNlbGVjdG9yLCAiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZCgiKS5jb25jYXQoaW5kZXggKyAxLCAiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4OiAwIDAgIikuY29uY2F0KGNvbFdpZHRoLCAicHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICIpOwogICAgICB9KTsKICAgICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gaW5uZXJIVE1MOwogICAgfSwKICAgIGJpbmRDb2x1bW5SZXNpemVFdmVudHM6IGZ1bmN0aW9uIGJpbmRDb2x1bW5SZXNpemVFdmVudHMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIpIHsKICAgICAgICB0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIgPSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX3RoaXM2LmNvbHVtblJlc2l6aW5nKSB7CiAgICAgICAgICAgIF90aGlzNi5vbkNvbHVtblJlc2l6ZShldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyKSB7CiAgICAgICAgdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyID0gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpczYuY29sdW1uUmVzaXppbmcpIHsKICAgICAgICAgICAgX3RoaXM2LmNvbHVtblJlc2l6aW5nID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczYub25Db2x1bW5SZXNpemVFbmQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHVuYmluZENvbHVtblJlc2l6ZUV2ZW50czogZnVuY3Rpb24gdW5iaW5kQ29sdW1uUmVzaXplRXZlbnRzKCkgewogICAgICBpZiAodGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUxpc3RlbmVyKSB7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZG9jdW1lbnQnLCB0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplTGlzdGVuZXIpOwogICAgICAgIHRoaXMuZG9jdW1lbnRDb2x1bW5SZXNpemVMaXN0ZW5lciA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRvY3VtZW50Q29sdW1uUmVzaXplRW5kTGlzdGVuZXIpIHsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkb2N1bWVudCcsIHRoaXMuZG9jdW1lbnRDb2x1bW5SZXNpemVFbmRMaXN0ZW5lcik7CiAgICAgICAgdGhpcy5kb2N1bWVudENvbHVtblJlc2l6ZUVuZExpc3RlbmVyID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIG9uQ29sdW1uSGVhZGVyTW91c2VEb3duOiBmdW5jdGlvbiBvbkNvbHVtbkhlYWRlck1vdXNlRG93bihlKSB7CiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDsKICAgICAgdmFyIGNvbHVtbiA9IGUuY29sdW1uOwoKICAgICAgaWYgKHRoaXMucmVvcmRlcmFibGVDb2x1bW5zICYmIHRoaXMuY29sdW1uUHJvcChjb2x1bW4sICdyZW9yZGVyYWJsZUNvbHVtbicpICE9PSBmYWxzZSkgewogICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnIHx8IERvbUhhbmRsZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAncC1jb2x1bW4tcmVzaXplcicpKSBldmVudC5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZSA9IGZhbHNlO2Vsc2UgZXZlbnQuY3VycmVudFRhcmdldC5kcmFnZ2FibGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgb25Db2x1bW5IZWFkZXJEcmFnU3RhcnQ6IGZ1bmN0aW9uIG9uQ29sdW1uSGVhZGVyRHJhZ1N0YXJ0KGV2ZW50KSB7CiAgICAgIGlmICh0aGlzLmNvbHVtblJlc2l6aW5nKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29sUmVvcmRlckljb25XaWR0aCA9IERvbUhhbmRsZXIuZ2V0SGlkZGVuRWxlbWVudE91dGVyV2lkdGgodGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yVXApOwogICAgICB0aGlzLmNvbFJlb3JkZXJJY29uSGVpZ2h0ID0gRG9tSGFuZGxlci5nZXRIaWRkZW5FbGVtZW50T3V0ZXJIZWlnaHQodGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yVXApOwogICAgICB0aGlzLmRyYWdnZWRDb2x1bW4gPSB0aGlzLmZpbmRQYXJlbnRIZWFkZXIoZXZlbnQudGFyZ2V0KTsKICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQnLCAnYicpOyAvLyBGaXJlZm94IHJlcXVpcmVzIHRoaXMgdG8gbWFrZSBkcmFnZ2luZyBwb3NzaWJsZQogICAgfSwKICAgIG9uQ29sdW1uSGVhZGVyRHJhZ092ZXI6IGZ1bmN0aW9uIG9uQ29sdW1uSGVhZGVyRHJhZ092ZXIoZXZlbnQpIHsKICAgICAgdmFyIGRyb3BIZWFkZXIgPSB0aGlzLmZpbmRQYXJlbnRIZWFkZXIoZXZlbnQudGFyZ2V0KTsKCiAgICAgIGlmICh0aGlzLnJlb3JkZXJhYmxlQ29sdW1ucyAmJiB0aGlzLmRyYWdnZWRDb2x1bW4gJiYgZHJvcEhlYWRlcikgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdmFyIGNvbnRhaW5lck9mZnNldCA9IERvbUhhbmRsZXIuZ2V0T2Zmc2V0KHRoaXMuJGVsKTsKICAgICAgICB2YXIgZHJvcEhlYWRlck9mZnNldCA9IERvbUhhbmRsZXIuZ2V0T2Zmc2V0KGRyb3BIZWFkZXIpOwoKICAgICAgICBpZiAodGhpcy5kcmFnZ2VkQ29sdW1uICE9PSBkcm9wSGVhZGVyKSB7CiAgICAgICAgICB2YXIgdGFyZ2V0TGVmdCA9IGRyb3BIZWFkZXJPZmZzZXQubGVmdCAtIGNvbnRhaW5lck9mZnNldC5sZWZ0OwogICAgICAgICAgdmFyIGNvbHVtbkNlbnRlciA9IGRyb3BIZWFkZXJPZmZzZXQubGVmdCArIGRyb3BIZWFkZXIub2Zmc2V0V2lkdGggLyAyOwogICAgICAgICAgdGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yVXAuc3R5bGUudG9wID0gZHJvcEhlYWRlck9mZnNldC50b3AgLSBjb250YWluZXJPZmZzZXQudG9wIC0gKHRoaXMuY29sUmVvcmRlckljb25IZWlnaHQgLSAxKSArICdweCc7CiAgICAgICAgICB0aGlzLiRyZWZzLnJlb3JkZXJJbmRpY2F0b3JEb3duLnN0eWxlLnRvcCA9IGRyb3BIZWFkZXJPZmZzZXQudG9wIC0gY29udGFpbmVyT2Zmc2V0LnRvcCArIGRyb3BIZWFkZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JzsKCiAgICAgICAgICBpZiAoZXZlbnQucGFnZVggPiBjb2x1bW5DZW50ZXIpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yVXAuc3R5bGUubGVmdCA9IHRhcmdldExlZnQgKyBkcm9wSGVhZGVyLm9mZnNldFdpZHRoIC0gTWF0aC5jZWlsKHRoaXMuY29sUmVvcmRlckljb25XaWR0aCAvIDIpICsgJ3B4JzsKICAgICAgICAgICAgdGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yRG93bi5zdHlsZS5sZWZ0ID0gdGFyZ2V0TGVmdCArIGRyb3BIZWFkZXIub2Zmc2V0V2lkdGggLSBNYXRoLmNlaWwodGhpcy5jb2xSZW9yZGVySWNvbldpZHRoIC8gMikgKyAncHgnOwogICAgICAgICAgICB0aGlzLmRyb3BQb3NpdGlvbiA9IDE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRyZWZzLnJlb3JkZXJJbmRpY2F0b3JVcC5zdHlsZS5sZWZ0ID0gdGFyZ2V0TGVmdCAtIE1hdGguY2VpbCh0aGlzLmNvbFJlb3JkZXJJY29uV2lkdGggLyAyKSArICdweCc7CiAgICAgICAgICAgIHRoaXMuJHJlZnMucmVvcmRlckluZGljYXRvckRvd24uc3R5bGUubGVmdCA9IHRhcmdldExlZnQgLSBNYXRoLmNlaWwodGhpcy5jb2xSZW9yZGVySWNvbldpZHRoIC8gMikgKyAncHgnOwogICAgICAgICAgICB0aGlzLmRyb3BQb3NpdGlvbiA9IC0xOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuJHJlZnMucmVvcmRlckluZGljYXRvclVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgdGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yRG93bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbkNvbHVtbkhlYWRlckRyYWdMZWF2ZTogZnVuY3Rpb24gb25Db2x1bW5IZWFkZXJEcmFnTGVhdmUoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMucmVvcmRlcmFibGVDb2x1bW5zICYmIHRoaXMuZHJhZ2dlZENvbHVtbikgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdGhpcy4kcmVmcy5yZW9yZGVySW5kaWNhdG9yVXAuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLiRyZWZzLnJlb3JkZXJJbmRpY2F0b3JEb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0KICAgIH0sCiAgICBvbkNvbHVtbkhlYWRlckRyb3A6IGZ1bmN0aW9uIG9uQ29sdW1uSGVhZGVyRHJvcChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgaWYgKHRoaXMuZHJhZ2dlZENvbHVtbikgewogICAgICAgIHZhciBkcmFnSW5kZXggPSBEb21IYW5kbGVyLmluZGV4KHRoaXMuZHJhZ2dlZENvbHVtbik7CiAgICAgICAgdmFyIGRyb3BJbmRleCA9IERvbUhhbmRsZXIuaW5kZXgodGhpcy5maW5kUGFyZW50SGVhZGVyKGV2ZW50LnRhcmdldCkpOwogICAgICAgIHZhciBhbGxvd0Ryb3AgPSBkcmFnSW5kZXggIT09IGRyb3BJbmRleDsKCiAgICAgICAgaWYgKGFsbG93RHJvcCAmJiAoZHJvcEluZGV4IC0gZHJhZ0luZGV4ID09PSAxICYmIHRoaXMuZHJvcFBvc2l0aW9uID09PSAtMSB8fCBkcmFnSW5kZXggLSBkcm9wSW5kZXggPT09IDEgJiYgdGhpcy5kcm9wUG9zaXRpb24gPT09IDEpKSB7CiAgICAgICAgICBhbGxvd0Ryb3AgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChhbGxvd0Ryb3ApIHsKICAgICAgICAgIE9iamVjdFV0aWxzLnJlb3JkZXJBcnJheSh0aGlzLmNvbHVtbnMsIGRyYWdJbmRleCwgZHJvcEluZGV4KTsKICAgICAgICAgIHRoaXMudXBkYXRlUmVvcmRlcmFibGVDb2x1bW5zKCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCdjb2x1bW4tcmVvcmRlcicsIHsKICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICAgIGRyYWdJbmRleDogZHJhZ0luZGV4LAogICAgICAgICAgICBkcm9wSW5kZXg6IGRyb3BJbmRleAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRyZWZzLnJlb3JkZXJJbmRpY2F0b3JVcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIHRoaXMuJHJlZnMucmVvcmRlckluZGljYXRvckRvd24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLmRyYWdnZWRDb2x1bW4uZHJhZ2dhYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5kcmFnZ2VkQ29sdW1uID0gbnVsbDsKICAgICAgICB0aGlzLmRyb3BQb3NpdGlvbiA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kUGFyZW50SGVhZGVyOiBmdW5jdGlvbiBmaW5kUGFyZW50SGVhZGVyKGVsZW1lbnQpIHsKICAgICAgaWYgKGVsZW1lbnQubm9kZU5hbWUgPT09ICdUSCcpIHsKICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50OwoKICAgICAgICB3aGlsZSAocGFyZW50Lm5vZGVOYW1lICE9PSAnVEgnKSB7CiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDsKICAgICAgICAgIGlmICghcGFyZW50KSBicmVhazsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwYXJlbnQ7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kQ29sdW1uQnlLZXk6IGZ1bmN0aW9uIGZpbmRDb2x1bW5CeUtleShjb2x1bW5zLCBrZXkpIHsKICAgICAgaWYgKGNvbHVtbnMgJiYgY29sdW1ucy5sZW5ndGgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zW2ldOwoKICAgICAgICAgIGlmICh0aGlzLmNvbHVtblByb3AoY29sdW1uLCAnY29sdW1uS2V5JykgPT09IGtleSB8fCB0aGlzLmNvbHVtblByb3AoY29sdW1uLCAnZmllbGQnKSA9PT0ga2V5KSB7CiAgICAgICAgICAgIHJldHVybiBjb2x1bW47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICBvblJvd01vdXNlRG93bjogZnVuY3Rpb24gb25Sb3dNb3VzZURvd24oZXZlbnQpIHsKICAgICAgaWYgKERvbUhhbmRsZXIuaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAncC1kYXRhdGFibGUtcmVvcmRlcmFibGVyb3ctaGFuZGxlJykpIGV2ZW50LmN1cnJlbnRUYXJnZXQuZHJhZ2dhYmxlID0gdHJ1ZTtlbHNlIGV2ZW50LmN1cnJlbnRUYXJnZXQuZHJhZ2dhYmxlID0gZmFsc2U7CiAgICB9LAogICAgb25Sb3dEcmFnU3RhcnQ6IGZ1bmN0aW9uIG9uUm93RHJhZ1N0YXJ0KGUpIHsKICAgICAgdmFyIGV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50OwogICAgICB2YXIgaW5kZXggPSBlLmluZGV4OwogICAgICB0aGlzLnJvd0RyYWdnaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5kcmFnZ2VkUm93SW5kZXggPSBpbmRleDsKICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQnLCAnYicpOyAvLyBGb3IgZmlyZWZveAogICAgfSwKICAgIG9uUm93RHJhZ092ZXI6IGZ1bmN0aW9uIG9uUm93RHJhZ092ZXIoZSkgewogICAgICB2YXIgZXZlbnQgPSBlLm9yaWdpbmFsRXZlbnQ7CiAgICAgIHZhciBpbmRleCA9IGUuaW5kZXg7CgogICAgICBpZiAodGhpcy5yb3dEcmFnZ2luZyAmJiB0aGlzLmRyYWdnZWRSb3dJbmRleCAhPT0gaW5kZXgpIHsKICAgICAgICB2YXIgcm93RWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgdmFyIHJvd1kgPSBEb21IYW5kbGVyLmdldE9mZnNldChyb3dFbGVtZW50KS50b3AgKyBEb21IYW5kbGVyLmdldFdpbmRvd1Njcm9sbFRvcCgpOwogICAgICAgIHZhciBwYWdlWSA9IGV2ZW50LnBhZ2VZOwogICAgICAgIHZhciByb3dNaWRZID0gcm93WSArIERvbUhhbmRsZXIuZ2V0T3V0ZXJIZWlnaHQocm93RWxlbWVudCkgLyAyOwogICAgICAgIHZhciBwcmV2Um93RWxlbWVudCA9IHJvd0VsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZzsKCiAgICAgICAgaWYgKHBhZ2VZIDwgcm93TWlkWSkgewogICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyhyb3dFbGVtZW50LCAncC1kYXRhdGFibGUtZHJhZ3BvaW50LWJvdHRvbScpOwogICAgICAgICAgdGhpcy5kcm9wcGVkUm93SW5kZXggPSBpbmRleDsKICAgICAgICAgIGlmIChwcmV2Um93RWxlbWVudCkgRG9tSGFuZGxlci5hZGRDbGFzcyhwcmV2Um93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC1ib3R0b20nKTtlbHNlIERvbUhhbmRsZXIuYWRkQ2xhc3Mocm93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC10b3AnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHByZXZSb3dFbGVtZW50KSBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHByZXZSb3dFbGVtZW50LCAncC1kYXRhdGFibGUtZHJhZ3BvaW50LWJvdHRvbScpO2Vsc2UgRG9tSGFuZGxlci5hZGRDbGFzcyhyb3dFbGVtZW50LCAncC1kYXRhdGFibGUtZHJhZ3BvaW50LXRvcCcpOwogICAgICAgICAgdGhpcy5kcm9wcGVkUm93SW5kZXggPSBpbmRleCArIDE7CiAgICAgICAgICBEb21IYW5kbGVyLmFkZENsYXNzKHJvd0VsZW1lbnQsICdwLWRhdGF0YWJsZS1kcmFncG9pbnQtYm90dG9tJyk7CiAgICAgICAgfQoKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25Sb3dEcmFnTGVhdmU6IGZ1bmN0aW9uIG9uUm93RHJhZ0xlYXZlKGV2ZW50KSB7CiAgICAgIHZhciByb3dFbGVtZW50ID0gZXZlbnQuY3VycmVudFRhcmdldDsKICAgICAgdmFyIHByZXZSb3dFbGVtZW50ID0gcm93RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOwoKICAgICAgaWYgKHByZXZSb3dFbGVtZW50KSB7CiAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyhwcmV2Um93RWxlbWVudCwgJ3AtZGF0YXRhYmxlLWRyYWdwb2ludC1ib3R0b20nKTsKICAgICAgfQoKICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyhyb3dFbGVtZW50LCAncC1kYXRhdGFibGUtZHJhZ3BvaW50LWJvdHRvbScpOwogICAgICBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHJvd0VsZW1lbnQsICdwLWRhdGF0YWJsZS1kcmFncG9pbnQtdG9wJyk7CiAgICB9LAogICAgb25Sb3dEcmFnRW5kOiBmdW5jdGlvbiBvblJvd0RyYWdFbmQoZXZlbnQpIHsKICAgICAgdGhpcy5yb3dEcmFnZ2luZyA9IGZhbHNlOwogICAgICB0aGlzLmRyYWdnZWRSb3dJbmRleCA9IG51bGw7CiAgICAgIHRoaXMuZHJvcHBlZFJvd0luZGV4ID0gbnVsbDsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kcmFnZ2FibGUgPSBmYWxzZTsKICAgIH0sCiAgICBvblJvd0Ryb3A6IGZ1bmN0aW9uIG9uUm93RHJvcChldmVudCkgewogICAgICBpZiAodGhpcy5kcm9wcGVkUm93SW5kZXggIT0gbnVsbCkgewogICAgICAgIHZhciBkcm9wSW5kZXggPSB0aGlzLmRyYWdnZWRSb3dJbmRleCA+IHRoaXMuZHJvcHBlZFJvd0luZGV4ID8gdGhpcy5kcm9wcGVkUm93SW5kZXggOiB0aGlzLmRyb3BwZWRSb3dJbmRleCA9PT0gMCA/IDAgOiB0aGlzLmRyb3BwZWRSb3dJbmRleCAtIDE7CgogICAgICAgIHZhciBwcm9jZXNzZWREYXRhID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucHJvY2Vzc2VkRGF0YSk7CgogICAgICAgIE9iamVjdFV0aWxzLnJlb3JkZXJBcnJheShwcm9jZXNzZWREYXRhLCB0aGlzLmRyYWdnZWRSb3dJbmRleCwgZHJvcEluZGV4KTsKICAgICAgICB0aGlzLiRlbWl0KCdyb3ctcmVvcmRlcicsIHsKICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgZHJhZ0luZGV4OiB0aGlzLmRyYWdnZWRSb3dJbmRleCwKICAgICAgICAgIGRyb3BJbmRleDogZHJvcEluZGV4LAogICAgICAgICAgdmFsdWU6IHByb2Nlc3NlZERhdGEKICAgICAgICB9KTsKICAgICAgfSAvL2NsZWFudXAKCgogICAgICB0aGlzLm9uUm93RHJhZ0xlYXZlKGV2ZW50KTsKICAgICAgdGhpcy5vblJvd0RyYWdFbmQoZXZlbnQpOwogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKICAgIHRvZ2dsZVJvdzogZnVuY3Rpb24gdG9nZ2xlUm93KGV2ZW50KSB7CiAgICAgIHZhciByb3dEYXRhID0gZXZlbnQuZGF0YTsKICAgICAgdmFyIGV4cGFuZGVkOwogICAgICB2YXIgZXhwYW5kZWRSb3dJbmRleDsKCiAgICAgIHZhciBfZXhwYW5kZWRSb3dzID0gdGhpcy5leHBhbmRlZFJvd3MgPyBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5leHBhbmRlZFJvd3MpIDogW107CgogICAgICBpZiAodGhpcy5kYXRhS2V5KSB7CiAgICAgICAgZXhwYW5kZWQgPSB0aGlzLmRfZXhwYW5kZWRSb3dLZXlzID8gdGhpcy5kX2V4cGFuZGVkUm93S2V5c1tPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHJvd0RhdGEsIHRoaXMuZGF0YUtleSldICE9PSB1bmRlZmluZWQgOiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBleHBhbmRlZFJvd0luZGV4ID0gdGhpcy5maW5kSW5kZXgocm93RGF0YSwgdGhpcy5leHBhbmRlZFJvd3MpOwogICAgICAgIGV4cGFuZGVkID0gZXhwYW5kZWRSb3dJbmRleCA+IC0xOwogICAgICB9CgogICAgICBpZiAoZXhwYW5kZWQpIHsKICAgICAgICBpZiAoZXhwYW5kZWRSb3dJbmRleCA9PSBudWxsKSB7CiAgICAgICAgICBleHBhbmRlZFJvd0luZGV4ID0gdGhpcy5maW5kSW5kZXgocm93RGF0YSwgdGhpcy5leHBhbmRlZFJvd3MpOwogICAgICAgIH0KCiAgICAgICAgX2V4cGFuZGVkUm93cy5zcGxpY2UoZXhwYW5kZWRSb3dJbmRleCwgMSk7CgogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpleHBhbmRlZFJvd3MnLCBfZXhwYW5kZWRSb3dzKTsKICAgICAgICB0aGlzLiRlbWl0KCdyb3ctY29sbGFwc2UnLCBldmVudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2V4cGFuZGVkUm93cy5wdXNoKHJvd0RhdGEpOwoKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZXhwYW5kZWRSb3dzJywgX2V4cGFuZGVkUm93cyk7CiAgICAgICAgdGhpcy4kZW1pdCgncm93LWV4cGFuZCcsIGV2ZW50KTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZVJvd0dyb3VwOiBmdW5jdGlvbiB0b2dnbGVSb3dHcm91cChlKSB7CiAgICAgIHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDsKICAgICAgdmFyIGRhdGEgPSBlLmRhdGE7CiAgICAgIHZhciBncm91cEZpZWxkVmFsdWUgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKGRhdGEsIHRoaXMuZ3JvdXBSb3dzQnkpOwoKICAgICAgdmFyIF9leHBhbmRlZFJvd0dyb3VwcyA9IHRoaXMuZXhwYW5kZWRSb3dHcm91cHMgPyBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5leHBhbmRlZFJvd0dyb3VwcykgOiBbXTsKCiAgICAgIGlmICh0aGlzLmlzUm93R3JvdXBFeHBhbmRlZChkYXRhKSkgewogICAgICAgIF9leHBhbmRlZFJvd0dyb3VwcyA9IF9leHBhbmRlZFJvd0dyb3Vwcy5maWx0ZXIoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgICByZXR1cm4gZ3JvdXAgIT09IGdyb3VwRmllbGRWYWx1ZTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZXhwYW5kZWRSb3dHcm91cHMnLCBfZXhwYW5kZWRSb3dHcm91cHMpOwogICAgICAgIHRoaXMuJGVtaXQoJ3Jvd2dyb3VwLWNvbGxhcHNlJywgewogICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICBkYXRhOiBncm91cEZpZWxkVmFsdWUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfZXhwYW5kZWRSb3dHcm91cHMucHVzaChncm91cEZpZWxkVmFsdWUpOwoKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZXhwYW5kZWRSb3dHcm91cHMnLCBfZXhwYW5kZWRSb3dHcm91cHMpOwogICAgICAgIHRoaXMuJGVtaXQoJ3Jvd2dyb3VwLWV4cGFuZCcsIHsKICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LAogICAgICAgICAgZGF0YTogZ3JvdXBGaWVsZFZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpc1Jvd0dyb3VwRXhwYW5kZWQ6IGZ1bmN0aW9uIGlzUm93R3JvdXBFeHBhbmRlZChyb3dEYXRhKSB7CiAgICAgIGlmICh0aGlzLmV4cGFuZGFibGVSb3dHcm91cHMgJiYgdGhpcy5leHBhbmRlZFJvd0dyb3VwcykgewogICAgICAgIHZhciBncm91cEZpZWxkVmFsdWUgPSBPYmplY3RVdGlscy5yZXNvbHZlRmllbGREYXRhKHJvd0RhdGEsIHRoaXMuZ3JvdXBSb3dzQnkpOwogICAgICAgIHJldHVybiB0aGlzLmV4cGFuZGVkUm93R3JvdXBzLmluZGV4T2YoZ3JvdXBGaWVsZFZhbHVlKSA+IC0xOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaXNTdGF0ZWZ1bDogZnVuY3Rpb24gaXNTdGF0ZWZ1bCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdGVLZXkgIT0gbnVsbDsKICAgIH0sCiAgICBnZXRTdG9yYWdlOiBmdW5jdGlvbiBnZXRTdG9yYWdlKCkgewogICAgICBzd2l0Y2ggKHRoaXMuc3RhdGVTdG9yYWdlKSB7CiAgICAgICAgY2FzZSAnbG9jYWwnOgogICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7CgogICAgICAgIGNhc2UgJ3Nlc3Npb24nOgogICAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXNzaW9uU3RvcmFnZTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLnN0YXRlU3RvcmFnZSArICcgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yIHRoZSBzdGF0ZSBzdG9yYWdlLCBzdXBwb3J0ZWQgdmFsdWVzIGFyZSAibG9jYWwiIGFuZCAic2Vzc2lvbiIuJyk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlU3RhdGU6IGZ1bmN0aW9uIHNhdmVTdGF0ZSgpIHsKICAgICAgdmFyIHN0b3JhZ2UgPSB0aGlzLmdldFN0b3JhZ2UoKTsKICAgICAgdmFyIHN0YXRlID0ge307CgogICAgICBpZiAodGhpcy5wYWdpbmF0b3IpIHsKICAgICAgICBzdGF0ZS5maXJzdCA9IHRoaXMuZF9maXJzdDsKICAgICAgICBzdGF0ZS5yb3dzID0gdGhpcy5kX3Jvd3M7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRfc29ydEZpZWxkKSB7CiAgICAgICAgc3RhdGUuc29ydEZpZWxkID0gdGhpcy5kX3NvcnRGaWVsZDsKICAgICAgICBzdGF0ZS5zb3J0T3JkZXIgPSB0aGlzLmRfc29ydE9yZGVyOwogICAgICB9CgogICAgICBpZiAodGhpcy5kX211bHRpU29ydE1ldGEpIHsKICAgICAgICBzdGF0ZS5tdWx0aVNvcnRNZXRhID0gdGhpcy5kX211bHRpU29ydE1ldGE7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmhhc0ZpbHRlcnMpIHsKICAgICAgICBzdGF0ZS5maWx0ZXJzID0gdGhpcy5maWx0ZXJzOwogICAgICB9CgogICAgICBpZiAodGhpcy5yZXNpemFibGVDb2x1bW5zKSB7CiAgICAgICAgdGhpcy5zYXZlQ29sdW1uV2lkdGhzKHN0YXRlKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVvcmRlcmFibGVDb2x1bW5zKSB7CiAgICAgICAgc3RhdGUuY29sdW1uT3JkZXIgPSB0aGlzLmRfY29sdW1uT3JkZXI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmV4cGFuZGVkUm93cykgewogICAgICAgIHN0YXRlLmV4cGFuZGVkUm93cyA9IHRoaXMuZXhwYW5kZWRSb3dzOwogICAgICAgIHN0YXRlLmV4cGFuZGVkUm93S2V5cyA9IHRoaXMuZF9leHBhbmRlZFJvd0tleXM7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmV4cGFuZGVkUm93R3JvdXBzKSB7CiAgICAgICAgc3RhdGUuZXhwYW5kZWRSb3dHcm91cHMgPSB0aGlzLmV4cGFuZGVkUm93R3JvdXBzOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3Rpb24pIHsKICAgICAgICBzdGF0ZS5zZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbjsKICAgICAgICBzdGF0ZS5zZWxlY3Rpb25LZXlzID0gdGhpcy5kX3NlbGVjdGlvbktleXM7CiAgICAgIH0KCiAgICAgIGlmIChPYmplY3Qua2V5cyhzdGF0ZSkubGVuZ3RoKSB7CiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RhdGVLZXksIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ3N0YXRlLXNhdmUnLCBzdGF0ZSk7CiAgICB9LAogICAgcmVzdG9yZVN0YXRlOiBmdW5jdGlvbiByZXN0b3JlU3RhdGUoKSB7CiAgICAgIHZhciBzdG9yYWdlID0gdGhpcy5nZXRTdG9yYWdlKCk7CiAgICAgIHZhciBzdGF0ZVN0cmluZyA9IHN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0YXRlS2V5KTsKICAgICAgdmFyIGRhdGVGb3JtYXQgPSAvXGR7NH0tXGR7Mn0tXGR7Mn1UXGR7Mn06XGR7Mn06XGR7Mn0uXGR7M31aLzsKCiAgICAgIHZhciByZXZpdmVyID0gZnVuY3Rpb24gcmV2aXZlcihrZXksIHZhbHVlKSB7CiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgZGF0ZUZvcm1hdC50ZXN0KHZhbHVlKSkgewogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfTsKCiAgICAgIGlmIChzdGF0ZVN0cmluZykgewogICAgICAgIHZhciByZXN0b3JlZFN0YXRlID0gSlNPTi5wYXJzZShzdGF0ZVN0cmluZywgcmV2aXZlcik7CgogICAgICAgIGlmICh0aGlzLnBhZ2luYXRvcikgewogICAgICAgICAgdGhpcy5kX2ZpcnN0ID0gcmVzdG9yZWRTdGF0ZS5maXJzdDsKICAgICAgICAgIHRoaXMuZF9yb3dzID0gcmVzdG9yZWRTdGF0ZS5yb3dzOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuc29ydEZpZWxkKSB7CiAgICAgICAgICB0aGlzLmRfc29ydEZpZWxkID0gcmVzdG9yZWRTdGF0ZS5zb3J0RmllbGQ7CiAgICAgICAgICB0aGlzLmRfc29ydE9yZGVyID0gcmVzdG9yZWRTdGF0ZS5zb3J0T3JkZXI7CiAgICAgICAgfQoKICAgICAgICBpZiAocmVzdG9yZWRTdGF0ZS5tdWx0aVNvcnRNZXRhKSB7CiAgICAgICAgICB0aGlzLmRfbXVsdGlTb3J0TWV0YSA9IHJlc3RvcmVkU3RhdGUubXVsdGlTb3J0TWV0YTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXN0b3JlZFN0YXRlLmZpbHRlcnMpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpmaWx0ZXJzJywgcmVzdG9yZWRTdGF0ZS5maWx0ZXJzKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnJlc2l6YWJsZUNvbHVtbnMpIHsKICAgICAgICAgIHRoaXMuY29sdW1uV2lkdGhzU3RhdGUgPSByZXN0b3JlZFN0YXRlLmNvbHVtbldpZHRoczsKICAgICAgICAgIHRoaXMudGFibGVXaWR0aFN0YXRlID0gcmVzdG9yZWRTdGF0ZS50YWJsZVdpZHRoOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVvcmRlcmFibGVDb2x1bW5zKSB7CiAgICAgICAgICB0aGlzLmRfY29sdW1uT3JkZXIgPSByZXN0b3JlZFN0YXRlLmNvbHVtbk9yZGVyOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuZXhwYW5kZWRSb3dzKSB7CiAgICAgICAgICB0aGlzLmRfZXhwYW5kZWRSb3dLZXlzID0gcmVzdG9yZWRTdGF0ZS5leHBhbmRlZFJvd0tleXM7CiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZXhwYW5kZWRSb3dzJywgcmVzdG9yZWRTdGF0ZS5leHBhbmRlZFJvd3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuZXhwYW5kZWRSb3dHcm91cHMpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpleHBhbmRlZFJvd0dyb3VwcycsIHJlc3RvcmVkU3RhdGUuZXhwYW5kZWRSb3dHcm91cHMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3RvcmVkU3RhdGUuc2VsZWN0aW9uKSB7CiAgICAgICAgICB0aGlzLmRfc2VsZWN0aW9uS2V5cyA9IHJlc3RvcmVkU3RhdGUuZF9zZWxlY3Rpb25LZXlzOwogICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGlvbicsIHJlc3RvcmVkU3RhdGUuc2VsZWN0aW9uKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuJGVtaXQoJ3N0YXRlLXJlc3RvcmUnLCByZXN0b3JlZFN0YXRlKTsKICAgICAgfQogICAgfSwKICAgIHNhdmVDb2x1bW5XaWR0aHM6IGZ1bmN0aW9uIHNhdmVDb2x1bW5XaWR0aHMoc3RhdGUpIHsKICAgICAgdmFyIHdpZHRocyA9IFtdOwogICAgICB2YXIgaGVhZGVycyA9IERvbUhhbmRsZXIuZmluZCh0aGlzLiRlbCwgJy5wLWRhdGF0YWJsZS10aGVhZCA+IHRyID4gdGgnKTsKICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHsKICAgICAgICByZXR1cm4gd2lkdGhzLnB1c2goRG9tSGFuZGxlci5nZXRPdXRlcldpZHRoKGhlYWRlcikpOwogICAgICB9KTsKICAgICAgc3RhdGUuY29sdW1uV2lkdGhzID0gd2lkdGhzLmpvaW4oJywnKTsKCiAgICAgIGlmICh0aGlzLmNvbHVtblJlc2l6ZU1vZGUgPT09ICdleHBhbmQnKSB7CiAgICAgICAgc3RhdGUudGFibGVXaWR0aCA9IERvbUhhbmRsZXIuZ2V0T3V0ZXJXaWR0aCh0aGlzLiRyZWZzLnRhYmxlKSArICdweCc7CiAgICAgIH0KICAgIH0sCiAgICByZXN0b3JlQ29sdW1uV2lkdGhzOiBmdW5jdGlvbiByZXN0b3JlQ29sdW1uV2lkdGhzKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmNvbHVtbldpZHRoc1N0YXRlKSB7CiAgICAgICAgdmFyIHdpZHRocyA9IHRoaXMuY29sdW1uV2lkdGhzU3RhdGUuc3BsaXQoJywnKTsKCiAgICAgICAgaWYgKHRoaXMuY29sdW1uUmVzaXplTW9kZSA9PT0gJ2V4cGFuZCcgJiYgdGhpcy50YWJsZVdpZHRoU3RhdGUpIHsKICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUuc3R5bGUud2lkdGggPSB0aGlzLnRhYmxlV2lkdGhTdGF0ZTsKICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUuc3R5bGUubWluV2lkdGggPSB0aGlzLnRhYmxlV2lkdGhTdGF0ZTsKICAgICAgICAgIHRoaXMuJGVsLnN0eWxlLndpZHRoID0gdGhpcy50YWJsZVdpZHRoU3RhdGU7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNyZWF0ZVN0eWxlRWxlbWVudCgpOwoKICAgICAgICBpZiAodGhpcy5zY3JvbGxhYmxlICYmIHdpZHRocyAmJiB3aWR0aHMubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIGlubmVySFRNTCA9ICcnOwogICAgICAgICAgd2lkdGhzLmZvckVhY2goZnVuY3Rpb24gKHdpZHRoLCBpbmRleCkgewogICAgICAgICAgICBpbm5lckhUTUwgKz0gIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wLWRhdGF0YWJsZVsiLmNvbmNhdChfdGhpczcuYXR0cmlidXRlU2VsZWN0b3IsICJdIC5wLWRhdGF0YWJsZS10aGVhZCA+IHRyID4gdGg6bnRoLWNoaWxkKCIpLmNvbmNhdChpbmRleCArIDEsICIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMCAwICIpLmNvbmNhdCh3aWR0aCwgInB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wLWRhdGF0YWJsZVsiKS5jb25jYXQoX3RoaXM3LmF0dHJpYnV0ZVNlbGVjdG9yLCAiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZCgiKS5jb25jYXQoaW5kZXggKyAxLCAiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXg6IDAgMCAiKS5jb25jYXQod2lkdGgsICJweDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAiKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5zdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBEb21IYW5kbGVyLmZpbmQodGhpcy4kcmVmcy50YWJsZSwgJy5wLWRhdGF0YWJsZS10aGVhZCA+IHRyID4gdGgnKS5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIsIGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiBoZWFkZXIuc3R5bGUud2lkdGggPSB3aWR0aHNbaW5kZXhdICsgJ3B4JzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uQ2VsbEVkaXRJbml0OiBmdW5jdGlvbiBvbkNlbGxFZGl0SW5pdChldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjZWxsLWVkaXQtaW5pdCcsIGV2ZW50KTsKICAgIH0sCiAgICBvbkNlbGxFZGl0Q29tcGxldGU6IGZ1bmN0aW9uIG9uQ2VsbEVkaXRDb21wbGV0ZShldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjZWxsLWVkaXQtY29tcGxldGUnLCBldmVudCk7CiAgICB9LAogICAgb25DZWxsRWRpdENhbmNlbDogZnVuY3Rpb24gb25DZWxsRWRpdENhbmNlbChldmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjZWxsLWVkaXQtY2FuY2VsJywgZXZlbnQpOwogICAgfSwKICAgIG9uUm93RWRpdEluaXQ6IGZ1bmN0aW9uIG9uUm93RWRpdEluaXQoZXZlbnQpIHsKICAgICAgdmFyIF9lZGl0aW5nUm93cyA9IHRoaXMuZWRpdGluZ1Jvd3MgPyBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5lZGl0aW5nUm93cykgOiBbXTsKCiAgICAgIF9lZGl0aW5nUm93cy5wdXNoKGV2ZW50LmRhdGEpOwoKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmVkaXRpbmdSb3dzJywgX2VkaXRpbmdSb3dzKTsKICAgICAgdGhpcy4kZW1pdCgncm93LWVkaXQtaW5pdCcsIGV2ZW50KTsKICAgIH0sCiAgICBvblJvd0VkaXRTYXZlOiBmdW5jdGlvbiBvblJvd0VkaXRTYXZlKGV2ZW50KSB7CiAgICAgIHZhciBfZWRpdGluZ1Jvd3MgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5lZGl0aW5nUm93cyk7CgogICAgICBfZWRpdGluZ1Jvd3Muc3BsaWNlKHRoaXMuZmluZEluZGV4KGV2ZW50LmRhdGEsIF9lZGl0aW5nUm93cyksIDEpOwoKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmVkaXRpbmdSb3dzJywgX2VkaXRpbmdSb3dzKTsKICAgICAgdGhpcy4kZW1pdCgncm93LWVkaXQtc2F2ZScsIGV2ZW50KTsKICAgIH0sCiAgICBvblJvd0VkaXRDYW5jZWw6IGZ1bmN0aW9uIG9uUm93RWRpdENhbmNlbChldmVudCkgewogICAgICB2YXIgX2VkaXRpbmdSb3dzID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZWRpdGluZ1Jvd3MpOwoKICAgICAgX2VkaXRpbmdSb3dzLnNwbGljZSh0aGlzLmZpbmRJbmRleChldmVudC5kYXRhLCBfZWRpdGluZ1Jvd3MpLCAxKTsKCiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTplZGl0aW5nUm93cycsIF9lZGl0aW5nUm93cyk7CiAgICAgIHRoaXMuJGVtaXQoJ3Jvdy1lZGl0LWNhbmNlbCcsIGV2ZW50KTsKICAgIH0sCiAgICBvbkVkaXRpbmdNZXRhQ2hhbmdlOiBmdW5jdGlvbiBvbkVkaXRpbmdNZXRhQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciBkYXRhID0gZXZlbnQuZGF0YSwKICAgICAgICAgIGZpZWxkID0gZXZlbnQuZmllbGQsCiAgICAgICAgICBpbmRleCA9IGV2ZW50LmluZGV4LAogICAgICAgICAgZWRpdGluZyA9IGV2ZW50LmVkaXRpbmc7CiAgICAgIHZhciBtZXRhID0gdGhpcy5kX2VkaXRpbmdNZXRhW2luZGV4XTsKCiAgICAgIGlmIChlZGl0aW5nKSB7CiAgICAgICAgIW1ldGEgJiYgKG1ldGEgPSB0aGlzLmRfZWRpdGluZ01ldGFbaW5kZXhdID0gewogICAgICAgICAgZGF0YTogX29iamVjdFNwcmVhZCh7fSwgZGF0YSksCiAgICAgICAgICBmaWVsZHM6IFtdCiAgICAgICAgfSk7CiAgICAgICAgbWV0YVsnZmllbGRzJ10ucHVzaChmaWVsZCk7CiAgICAgIH0gZWxzZSBpZiAobWV0YSkgewogICAgICAgIHZhciBmaWVsZHMgPSBtZXRhWydmaWVsZHMnXS5maWx0ZXIoZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIHJldHVybiBmICE9PSBmaWVsZDsKICAgICAgICB9KTsKICAgICAgICAhZmllbGRzLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmRfZWRpdGluZ01ldGFbaW5kZXhdIDogbWV0YVsnZmllbGRzJ10gPSBmaWVsZHM7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckVkaXRpbmdNZXRhRGF0YTogZnVuY3Rpb24gY2xlYXJFZGl0aW5nTWV0YURhdGEoKSB7CiAgICAgIGlmICh0aGlzLmVkaXRNb2RlKSB7CiAgICAgICAgdGhpcy5kX2VkaXRpbmdNZXRhID0ge307CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVMYXp5TG9hZEV2ZW50OiBmdW5jdGlvbiBjcmVhdGVMYXp5TG9hZEV2ZW50KGV2ZW50KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgZmlyc3Q6IHRoaXMuZF9maXJzdCwKICAgICAgICByb3dzOiB0aGlzLmRfcm93cywKICAgICAgICBzb3J0RmllbGQ6IHRoaXMuZF9zb3J0RmllbGQsCiAgICAgICAgc29ydE9yZGVyOiB0aGlzLmRfc29ydE9yZGVyLAogICAgICAgIG11bHRpU29ydE1ldGE6IHRoaXMuZF9tdWx0aVNvcnRNZXRhLAogICAgICAgIGZpbHRlcnM6IHRoaXMuZF9maWx0ZXJzCiAgICAgIH07CiAgICB9LAogICAgaGFzR2xvYmFsRmlsdGVyOiBmdW5jdGlvbiBoYXNHbG9iYWxGaWx0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuZmlsdGVycywgJ2dsb2JhbCcpOwogICAgfSwKICAgIGdldENoaWxkcmVuOiBmdW5jdGlvbiBnZXRDaGlsZHJlbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHNsb3RzLmRlZmF1bHQgPyB0aGlzLiRzbG90cy5kZWZhdWx0KCkgOiBudWxsOwogICAgfSwKICAgIG9uRmlsdGVyQ2hhbmdlOiBmdW5jdGlvbiBvbkZpbHRlckNoYW5nZShmaWx0ZXJzKSB7CiAgICAgIHRoaXMuZF9maWx0ZXJzID0gZmlsdGVyczsKICAgIH0sCiAgICBvbkZpbHRlckFwcGx5OiBmdW5jdGlvbiBvbkZpbHRlckFwcGx5KCkgewogICAgICB0aGlzLmRfZmlyc3QgPSAwOwogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6Zmlyc3QnLCB0aGlzLmRfZmlyc3QpOwogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZmlsdGVycycsIHRoaXMuZF9maWx0ZXJzKTsKCiAgICAgIGlmICh0aGlzLmxhenkpIHsKICAgICAgICB0aGlzLiRlbWl0KCdmaWx0ZXInLCB0aGlzLmNyZWF0ZUxhenlMb2FkRXZlbnQoKSk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9uZUZpbHRlcnM6IGZ1bmN0aW9uIGNsb25lRmlsdGVycygpIHsKICAgICAgdmFyIGNsb25lZCA9IHt9OwoKICAgICAgaWYgKHRoaXMuZmlsdGVycykgewogICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICAgICAgcHJvcCA9IF9yZWYyWzBdLAogICAgICAgICAgICAgIHZhbHVlID0gX3JlZjJbMV07CgogICAgICAgICAgY2xvbmVkW3Byb3BdID0gdmFsdWUub3BlcmF0b3IgPyB7CiAgICAgICAgICAgIG9wZXJhdG9yOiB2YWx1ZS5vcGVyYXRvciwKICAgICAgICAgICAgY29uc3RyYWludHM6IHZhbHVlLmNvbnN0cmFpbnRzLm1hcChmdW5jdGlvbiAoY29uc3RyYWludCkgewogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBjb25zdHJhaW50KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gOiBfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjbG9uZWQ7CiAgICB9LAogICAgdXBkYXRlUmVvcmRlcmFibGVDb2x1bW5zOiBmdW5jdGlvbiB1cGRhdGVSZW9yZGVyYWJsZUNvbHVtbnMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIGNvbHVtbk9yZGVyID0gW107CiAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2wpIHsKICAgICAgICByZXR1cm4gY29sdW1uT3JkZXIucHVzaChfdGhpczguY29sdW1uUHJvcChjb2wsICdjb2x1bW5LZXknKSB8fCBfdGhpczguY29sdW1uUHJvcChjb2wsICdmaWVsZCcpKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZF9jb2x1bW5PcmRlciA9IGNvbHVtbk9yZGVyOwogICAgfSwKICAgIGNyZWF0ZVN0eWxlRWxlbWVudDogZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KCkgewogICAgICB0aGlzLnN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgIHRoaXMuc3R5bGVFbGVtZW50LnR5cGUgPSAndGV4dC9jc3MnOwogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbGVtZW50KTsKICAgIH0sCiAgICBjcmVhdGVSZXNwb25zaXZlU3R5bGU6IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNpdmVTdHlsZSgpIHsKICAgICAgaWYgKCF0aGlzLnJlc3BvbnNpdmVTdHlsZUVsZW1lbnQpIHsKICAgICAgICB0aGlzLnJlc3BvbnNpdmVTdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIHRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudC50eXBlID0gJ3RleHQvY3NzJzsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudCk7CiAgICAgICAgdmFyIGlubmVySFRNTCA9ICJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICIuY29uY2F0KHRoaXMuYnJlYWtwb2ludCwgIikge1xuICAgIC5wLWRhdGF0YWJsZVsiKS5jb25jYXQodGhpcy5hdHRyaWJ1dGVTZWxlY3RvciwgIl0gLnAtZGF0YXRhYmxlLXRoZWFkID4gdHIgPiB0aCxcbiAgICAucC1kYXRhdGFibGVbIikuY29uY2F0KHRoaXMuYXR0cmlidXRlU2VsZWN0b3IsICJdIC5wLWRhdGF0YWJsZS10Zm9vdCA+IHRyID4gdGQge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgLnAtZGF0YXRhYmxlWyIpLmNvbmNhdCh0aGlzLmF0dHJpYnV0ZVNlbGVjdG9yLCAiXSAucC1kYXRhdGFibGUtdGJvZHkgPiB0ciA+IHRkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIH1cblxuICAgIC5wLWRhdGF0YWJsZVsiKS5jb25jYXQodGhpcy5hdHRyaWJ1dGVTZWxlY3RvciwgIl0gLnAtZGF0YXRhYmxlLXRib2R5ID4gdHIgPiB0ZDpub3QoOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgYm9yZGVyOiAwIG5vbmU7XG4gICAgfVxuXG4gICAgLnAtZGF0YXRhYmxlWyIpLmNvbmNhdCh0aGlzLmF0dHJpYnV0ZVNlbGVjdG9yLCAiXS5wLWRhdGF0YWJsZS1ncmlkbGluZXMgLnAtZGF0YXRhYmxlLXRib2R5ID4gdHIgPiB0ZDpsYXN0LWNoaWxkIHtcbiAgICAgICAgYm9yZGVyLXRvcDogMDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiAwO1xuICAgICAgICBib3JkZXItbGVmdDogMDtcbiAgICB9XG5cbiAgICAucC1kYXRhdGFibGVbIikuY29uY2F0KHRoaXMuYXR0cmlidXRlU2VsZWN0b3IsICJdIC5wLWRhdGF0YWJsZS10Ym9keSA+IHRyID4gdGQgPiAucC1jb2x1bW4tdGl0bGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG59XG4iKTsKICAgICAgICB0aGlzLnJlc3BvbnNpdmVTdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gaW5uZXJIVE1MOwogICAgICB9CiAgICB9LAogICAgZGVzdHJveVJlc3BvbnNpdmVTdHlsZTogZnVuY3Rpb24gZGVzdHJveVJlc3BvbnNpdmVTdHlsZSgpIHsKICAgICAgaWYgKHRoaXMucmVzcG9uc2l2ZVN0eWxlRWxlbWVudCkgewogICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQodGhpcy5yZXNwb25zaXZlU3R5bGVFbGVtZW50KTsKICAgICAgICB0aGlzLnJlc3BvbnNpdmVTdHlsZUVsZW1lbnQgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgZGVzdHJveVN0eWxlRWxlbWVudDogZnVuY3Rpb24gZGVzdHJveVN0eWxlRWxlbWVudCgpIHsKICAgICAgaWYgKHRoaXMuc3R5bGVFbGVtZW50KSB7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZCh0aGlzLnN0eWxlRWxlbWVudCk7CiAgICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY29udGFpbmVyQ2xhc3M6IGZ1bmN0aW9uIGNvbnRhaW5lckNsYXNzKCkgewogICAgICByZXR1cm4gWydwLWRhdGF0YWJsZSBwLWNvbXBvbmVudCcsIHsKICAgICAgICAncC1kYXRhdGFibGUtaG92ZXJhYmxlLXJvd3MnOiB0aGlzLnJvd0hvdmVyIHx8IHRoaXMuc2VsZWN0aW9uTW9kZSwKICAgICAgICAncC1kYXRhdGFibGUtYXV0by1sYXlvdXQnOiB0aGlzLmF1dG9MYXlvdXQsCiAgICAgICAgJ3AtZGF0YXRhYmxlLXJlc2l6YWJsZSc6IHRoaXMucmVzaXphYmxlQ29sdW1ucywKICAgICAgICAncC1kYXRhdGFibGUtcmVzaXphYmxlLWZpdCc6IHRoaXMucmVzaXphYmxlQ29sdW1ucyAmJiB0aGlzLmNvbHVtblJlc2l6ZU1vZGUgPT09ICdmaXQnLAogICAgICAgICdwLWRhdGF0YWJsZS1zY3JvbGxhYmxlJzogdGhpcy5zY3JvbGxhYmxlLAogICAgICAgICdwLWRhdGF0YWJsZS1zY3JvbGxhYmxlLXZlcnRpY2FsJzogdGhpcy5zY3JvbGxhYmxlICYmIHRoaXMuc2Nyb2xsRGlyZWN0aW9uID09PSAndmVydGljYWwnLAogICAgICAgICdwLWRhdGF0YWJsZS1zY3JvbGxhYmxlLWhvcml6b250YWwnOiB0aGlzLnNjcm9sbGFibGUgJiYgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJywKICAgICAgICAncC1kYXRhdGFibGUtc2Nyb2xsYWJsZS1ib3RoJzogdGhpcy5zY3JvbGxhYmxlICYmIHRoaXMuc2Nyb2xsRGlyZWN0aW9uID09PSAnYm90aCcsCiAgICAgICAgJ3AtZGF0YXRhYmxlLWZsZXgtc2Nyb2xsYWJsZSc6IHRoaXMuc2Nyb2xsYWJsZSAmJiB0aGlzLnNjcm9sbEhlaWdodCA9PT0gJ2ZsZXgnLAogICAgICAgICdwLWRhdGF0YWJsZS1yZXNwb25zaXZlLXN0YWNrJzogdGhpcy5yZXNwb25zaXZlTGF5b3V0ID09PSAnc3RhY2snLAogICAgICAgICdwLWRhdGF0YWJsZS1yZXNwb25zaXZlLXNjcm9sbCc6IHRoaXMucmVzcG9uc2l2ZUxheW91dCA9PT0gJ3Njcm9sbCcsCiAgICAgICAgJ3AtZGF0YXRhYmxlLXN0cmlwZWQnOiB0aGlzLnN0cmlwZWRSb3dzLAogICAgICAgICdwLWRhdGF0YWJsZS1ncmlkbGluZXMnOiB0aGlzLnNob3dHcmlkbGluZXMsCiAgICAgICAgJ3AtZGF0YXRhYmxlLWdyb3VwZWQtaGVhZGVyJzogdGhpcy5oZWFkZXJDb2x1bW5Hcm91cCAhPSBudWxsLAogICAgICAgICdwLWRhdGF0YWJsZS1ncm91cGVkLWZvb3Rlcic6IHRoaXMuZm9vdGVyQ29sdW1uR3JvdXAgIT0gbnVsbAogICAgICB9XTsKICAgIH0sCiAgICBjb2x1bW5zOiBmdW5jdGlvbiBjb2x1bW5zKCkgewogICAgICB2YXIgY29scyA9IFtdOwogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmdldENoaWxkcmVuKCk7CgogICAgICBpZiAoIWNoaWxkcmVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiBjaGlsZC5jaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSBjb2xzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjb2xzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGNoaWxkLmNoaWxkcmVuKSk7ZWxzZSBpZiAoY2hpbGQudHlwZS5uYW1lID09PSAnQ29sdW1uJykgY29scy5wdXNoKGNoaWxkKTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5yZW9yZGVyYWJsZUNvbHVtbnMgJiYgdGhpcy5kX2NvbHVtbk9yZGVyKSB7CiAgICAgICAgdmFyIG9yZGVyZWRDb2x1bW5zID0gW107CgogICAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5kX2NvbHVtbk9yZGVyKSwKICAgICAgICAgICAgX3N0ZXA1OwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGNvbHVtbktleSA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuZmluZENvbHVtbkJ5S2V5KGNvbHMsIGNvbHVtbktleSk7CgogICAgICAgICAgICBpZiAoY29sdW1uKSB7CiAgICAgICAgICAgICAgb3JkZXJlZENvbHVtbnMucHVzaChjb2x1bW4pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gW10uY29uY2F0KG9yZGVyZWRDb2x1bW5zLCBfdG9Db25zdW1hYmxlQXJyYXkoY29scy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBvcmRlcmVkQ29sdW1ucy5pbmRleE9mKGl0ZW0pIDwgMDsKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICByZXR1cm4gY29sczsKICAgIH0sCiAgICBoZWFkZXJDb2x1bW5Hcm91cDogZnVuY3Rpb24gaGVhZGVyQ29sdW1uR3JvdXAoKSB7CiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKTsKCiAgICAgIGlmIChjaGlsZHJlbikgewogICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY2hpbGRyZW4pLAogICAgICAgICAgICBfc3RlcDY7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDYudmFsdWU7CgogICAgICAgICAgICBpZiAoY2hpbGQudHlwZS5uYW1lID09PSAnQ29sdW1uR3JvdXAnICYmIHRoaXMuY29sdW1uUHJvcChjaGlsZCwgJ3R5cGUnKSA9PT0gJ2hlYWRlcicpIHsKICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjYuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmYoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGZvb3RlckNvbHVtbkdyb3VwOiBmdW5jdGlvbiBmb290ZXJDb2x1bW5Hcm91cCgpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5nZXRDaGlsZHJlbigpOwoKICAgICAgaWYgKGNoaWxkcmVuKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjaGlsZHJlbiksCiAgICAgICAgICAgIF9zdGVwNzsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBjaGlsZCA9IF9zdGVwNy52YWx1ZTsKCiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlLm5hbWUgPT09ICdDb2x1bW5Hcm91cCcgJiYgdGhpcy5jb2x1bW5Qcm9wKGNoaWxkLCAndHlwZScpID09PSAnZm9vdGVyJykgewogICAgICAgICAgICAgIHJldHVybiBjaGlsZDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgaGFzRmlsdGVyczogZnVuY3Rpb24gaGFzRmlsdGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycyAmJiBPYmplY3Qua2V5cyh0aGlzLmZpbHRlcnMpLmxlbmd0aCA+IDAgJiYgdGhpcy5maWx0ZXJzLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7CiAgICB9LAogICAgcHJvY2Vzc2VkRGF0YTogZnVuY3Rpb24gcHJvY2Vzc2VkRGF0YSgpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLnZhbHVlIHx8IFtdOwoKICAgICAgaWYgKCF0aGlzLmxhenkpIHsKICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkgewogICAgICAgICAgaWYgKHRoaXMuaGFzRmlsdGVycykgewogICAgICAgICAgICBkYXRhID0gdGhpcy5maWx0ZXIoZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuc29ydGVkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRNb2RlID09PSAnc2luZ2xlJykgZGF0YSA9IHRoaXMuc29ydFNpbmdsZShkYXRhKTtlbHNlIGlmICh0aGlzLnNvcnRNb2RlID09PSAnbXVsdGlwbGUnKSBkYXRhID0gdGhpcy5zb3J0TXVsdGlwbGUoZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZGF0YTsKICAgIH0sCiAgICBkYXRhVG9SZW5kZXI6IGZ1bmN0aW9uIGRhdGFUb1JlbmRlcigpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb2Nlc3NlZERhdGE7CgogICAgICBpZiAoZGF0YSAmJiB0aGlzLnBhZ2luYXRvcikgewogICAgICAgIHZhciBmaXJzdCA9IHRoaXMubGF6eSA/IDAgOiB0aGlzLmRfZmlyc3Q7CiAgICAgICAgcmV0dXJuIGRhdGEuc2xpY2UoZmlyc3QsIGZpcnN0ICsgdGhpcy5kX3Jvd3MpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CiAgICB9LAogICAgdG90YWxSZWNvcmRzTGVuZ3RoOiBmdW5jdGlvbiB0b3RhbFJlY29yZHNMZW5ndGgoKSB7CiAgICAgIGlmICh0aGlzLmxhenkpIHsKICAgICAgICByZXR1cm4gdGhpcy50b3RhbFJlY29yZHM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb2Nlc3NlZERhdGE7CiAgICAgICAgcmV0dXJuIGRhdGEgPyBkYXRhLmxlbmd0aCA6IDA7CiAgICAgIH0KICAgIH0sCiAgICBlbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5wcm9jZXNzZWREYXRhOwogICAgICByZXR1cm4gIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDA7CiAgICB9LAogICAgcGFnaW5hdG9yVG9wOiBmdW5jdGlvbiBwYWdpbmF0b3JUb3AoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRvciAmJiAodGhpcy5wYWdpbmF0b3JQb3NpdGlvbiAhPT0gJ2JvdHRvbScgfHwgdGhpcy5wYWdpbmF0b3JQb3NpdGlvbiA9PT0gJ2JvdGgnKTsKICAgIH0sCiAgICBwYWdpbmF0b3JCb3R0b206IGZ1bmN0aW9uIHBhZ2luYXRvckJvdHRvbSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdG9yICYmICh0aGlzLnBhZ2luYXRvclBvc2l0aW9uICE9PSAndG9wJyB8fCB0aGlzLnBhZ2luYXRvclBvc2l0aW9uID09PSAnYm90aCcpOwogICAgfSwKICAgIHNvcnRlZDogZnVuY3Rpb24gc29ydGVkKCkgewogICAgICByZXR1cm4gdGhpcy5kX3NvcnRGaWVsZCB8fCB0aGlzLmRfbXVsdGlTb3J0TWV0YSAmJiB0aGlzLmRfbXVsdGlTb3J0TWV0YS5sZW5ndGggPiAwOwogICAgfSwKICAgIGxvYWRpbmdJY29uQ2xhc3M6IGZ1bmN0aW9uIGxvYWRpbmdJY29uQ2xhc3MoKSB7CiAgICAgIHJldHVybiBbJ3AtZGF0YXRhYmxlLWxvYWRpbmctaWNvbiBwaS1zcGluJywgdGhpcy5sb2FkaW5nSWNvbl07CiAgICB9LAogICAgYWxsUm93c1NlbGVjdGVkOiBmdW5jdGlvbiBhbGxSb3dzU2VsZWN0ZWQoKSB7CiAgICAgIHZhciB2YWwgPSB0aGlzLmZyb3plblZhbHVlID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmZyb3plblZhbHVlKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucHJvY2Vzc2VkRGF0YSkpIDogdGhpcy5wcm9jZXNzZWREYXRhOwogICAgICB2YXIgbGVuZ3RoID0gdGhpcy5sYXp5ID8gdGhpcy50b3RhbFJlY29yZHMgOiB2YWwgPyB2YWwubGVuZ3RoIDogMDsKICAgICAgcmV0dXJuIHZhbCAmJiBsZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0aW9uICYmIHRoaXMuc2VsZWN0aW9uLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3Rpb24ubGVuZ3RoID09PSBsZW5ndGg7CiAgICB9LAogICAgYXR0cmlidXRlU2VsZWN0b3I6IGZ1bmN0aW9uIGF0dHJpYnV0ZVNlbGVjdG9yKCkgewogICAgICByZXR1cm4gVW5pcXVlQ29tcG9uZW50SWQoKTsKICAgIH0sCiAgICBncm91cFJvd1NvcnRGaWVsZDogZnVuY3Rpb24gZ3JvdXBSb3dTb3J0RmllbGQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNvcnRNb2RlID09PSAnc2luZ2xlJyA/IHRoaXMuc29ydEZpZWxkIDogdGhpcy5kX2dyb3VwUm93c1NvcnRNZXRhID8gdGhpcy5kX2dyb3VwUm93c1NvcnRNZXRhLmZpZWxkIDogbnVsbDsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICdEVFBhZ2luYXRvcic6IFBhZ2luYXRvciwKICAgICdEVFRhYmxlSGVhZGVyJzogVGFibGVIZWFkZXIsCiAgICAnRFRUYWJsZUJvZHknOiBUYWJsZUJvZHksCiAgICAnRFRUYWJsZUZvb3Rlcic6IFRhYmxlRm9vdGVyCiAgfQp9Ow=="},{"version":3,"sources":["/Users/crocslut/Desktop/Git/primevue/src/components/datatable/DataTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div :class=\"containerClass\" data-scrollselectors=\".p-datatable-wrapper\">\n        <slot></slot>\n        <div class=\"p-datatable-loading-overlay p-component-overlay\" v-if=\"loading\">\n            <i :class=\"loadingIconClass\"></i>\n        </div>\n        <div class=\"p-datatable-header\" v-if=\"$slots.header\">\n            <slot name=\"header\"></slot>\n        </div>\n        <DTPaginator v-if=\"paginatorTop\" :rows=\"d_rows\" :first=\"d_first\" :totalRecords=\"totalRecordsLength\" :pageLinkSize=\"pageLinkSize\" :template=\"paginatorTemplate\" :rowsPerPageOptions=\"rowsPerPageOptions\"\n                :currentPageReportTemplate=\"currentPageReportTemplate\" class=\"p-paginator-top\" @page=\"onPage($event)\" :alwaysShow=\"alwaysShowPaginator\">\n            <template #left v-if=\"$slots.paginatorLeft\">\n                <slot name=\"paginatorLeft\"></slot>\n            </template>\n            <template #right v-if=\"$slots.paginatorRight\">\n                <slot name=\"paginatorRight\"></slot>\n            </template>\n        </DTPaginator>\n        <div class=\"p-datatable-wrapper\" :style=\"{maxHeight: scrollHeight}\">\n            <table ref=\"table\" role=\"table\" class=\"p-datatable-table\">\n                <DTTableHeader :columnGroup=\"headerColumnGroup\" :columns=\"columns\" :rowGroupMode=\"rowGroupMode\"\n                        :groupRowsBy=\"groupRowsBy\" :groupRowSortField=\"groupRowSortField\" :resizableColumns=\"resizableColumns\" :allRowsSelected=\"allRowsSelected\" :empty=\"empty\"\n                        :sortMode=\"sortMode\" :sortField=\"d_sortField\" :sortOrder=\"d_sortOrder\" :multiSortMeta=\"d_multiSortMeta\" :filters=\"d_filters\" :filtersStore=\"filters\" :filterDisplay=\"filterDisplay\"\n                        @column-click=\"onColumnHeaderClick($event)\" @column-mousedown=\"onColumnHeaderMouseDown($event)\" @filter-change=\"onFilterChange\" @filter-apply=\"onFilterApply\"\n                        @column-dragstart=\"onColumnHeaderDragStart($event)\" @column-dragover=\"onColumnHeaderDragOver($event)\" @column-dragleave=\"onColumnHeaderDragLeave($event)\" @column-drop=\"onColumnHeaderDrop($event)\"\n                        @column-resizestart=\"onColumnResizeStart($event)\" @checkbox-change=\"toggleRowsWithCheckbox($event)\" />\n                <DTTableBody v-if=\"frozenValue\" :value=\"frozenValue\" :frozenRow=\"true\" class=\"p-datatable-frozen-tbody\" :columns=\"columns\" :dataKey=\"dataKey\" :selection=\"selection\" :selectionKeys=\"d_selectionKeys\" :selectionMode=\"selectionMode\" :contextMenu=\"contextMenu\" :contextMenuSelection=\"contextMenuSelection\"\n                    :rowGroupMode=\"rowGroupMode\" :groupRowsBy=\"groupRowsBy\" :expandableRowGroups=\"expandableRowGroups\" :rowClass=\"rowClass\" :editMode=\"editMode\" :compareSelectionBy=\"compareSelectionBy\" :scrollable=\"scrollable\"\n                    :expandedRowIcon=\"expandedRowIcon\" :collapsedRowIcon=\"collapsedRowIcon\" :expandedRows=\"expandedRows\" :expandedRowKeys=\"d_expandedRowKeys\" :expandedRowGroups=\"expandedRowGroups\"\n                    :editingRows=\"editingRows\" :editingRowKeys=\"d_editingRowKeys\" :templates=\"$slots\" :loading=\"loading\" :responsiveLayout=\"responsiveLayout\"\n                    @rowgroup-toggle=\"toggleRowGroup\" @row-click=\"onRowClick($event)\" @row-dblclick=\"onRowDblClick($event)\" @row-rightclick=\"onRowRightClick($event)\" @row-touchend=\"onRowTouchEnd\" @row-keydown=\"onRowKeyDown\"\n                    @row-mousedown=\"onRowMouseDown\" @row-dragstart=\"onRowDragStart($event)\" @row-dragover=\"onRowDragOver($event)\" @row-dragleave=\"onRowDragLeave($event)\" @row-dragend=\"onRowDragEnd($event)\" @row-drop=\"onRowDrop($event)\"\n                    @row-toggle=\"toggleRow($event)\" @radio-change=\"toggleRowWithRadio($event)\" @checkbox-change=\"toggleRowWithCheckbox($event)\"\n                    @cell-edit-init=\"onCellEditInit($event)\" @cell-edit-complete=\"onCellEditComplete($event)\" @cell-edit-cancel=\"onCellEditCancel($event)\"\n                    @row-edit-init=\"onRowEditInit($event)\" @row-edit-save=\"onRowEditSave($event)\" @row-edit-cancel=\"onRowEditCancel($event)\"\n                    :editingMeta=\"d_editingMeta\" @editing-meta-change=\"onEditingMetaChange\" />\n                <DTTableBody :value=\"dataToRender\" :columns=\"columns\" :empty=\"empty\" :dataKey=\"dataKey\" :selection=\"selection\" :selectionKeys=\"d_selectionKeys\" :selectionMode=\"selectionMode\" :contextMenu=\"contextMenu\" :contextMenuSelection=\"contextMenuSelection\"\n                    :rowGroupMode=\"rowGroupMode\" :groupRowsBy=\"groupRowsBy\" :expandableRowGroups=\"expandableRowGroups\" :rowClass=\"rowClass\" :editMode=\"editMode\" :compareSelectionBy=\"compareSelectionBy\" :scrollable=\"scrollable\"\n                    :expandedRowIcon=\"expandedRowIcon\" :collapsedRowIcon=\"collapsedRowIcon\" :expandedRows=\"expandedRows\" :expandedRowKeys=\"d_expandedRowKeys\" :expandedRowGroups=\"expandedRowGroups\"\n                    :editingRows=\"editingRows\" :editingRowKeys=\"d_editingRowKeys\" :templates=\"$slots\" :loading=\"loading\" :responsiveLayout=\"responsiveLayout\"\n                    @rowgroup-toggle=\"toggleRowGroup\" @row-click=\"onRowClick($event)\" @row-dblclick=\"onRowDblClick($event)\" @row-rightclick=\"onRowRightClick($event)\" @row-touchend=\"onRowTouchEnd\" @row-keydown=\"onRowKeyDown\"\n                    @row-mousedown=\"onRowMouseDown\" @row-dragstart=\"onRowDragStart($event)\" @row-dragover=\"onRowDragOver($event)\" @row-dragleave=\"onRowDragLeave($event)\" @row-dragend=\"onRowDragEnd($event)\" @row-drop=\"onRowDrop($event)\"\n                    @row-toggle=\"toggleRow($event)\" @radio-change=\"toggleRowWithRadio($event)\" @checkbox-change=\"toggleRowWithCheckbox($event)\"\n                    @cell-edit-init=\"onCellEditInit($event)\" @cell-edit-complete=\"onCellEditComplete($event)\" @cell-edit-cancel=\"onCellEditCancel($event)\"\n                    @row-edit-init=\"onRowEditInit($event)\" @row-edit-save=\"onRowEditSave($event)\" @row-edit-cancel=\"onRowEditCancel($event)\"\n                    :editingMeta=\"d_editingMeta\" @editing-meta-change=\"onEditingMetaChange\" />\n                <DTTableFooter :columnGroup=\"footerColumnGroup\" :columns=\"columns\" />\n            </table>\n        </div>\n        <DTPaginator v-if=\"paginatorBottom\" :rows=\"d_rows\" :first=\"d_first\" :totalRecords=\"totalRecordsLength\" :pageLinkSize=\"pageLinkSize\" :template=\"paginatorTemplate\" :rowsPerPageOptions=\"rowsPerPageOptions\"\n                :currentPageReportTemplate=\"currentPageReportTemplate\" class=\"p-paginator-bottom\" @page=\"onPage($event)\" :alwaysShow=\"alwaysShowPaginator\">\n            <template #left v-if=\"$slots.paginatorLeft\">\n                <slot name=\"paginatorLeft\"></slot>\n            </template>\n            <template #right v-if=\"$slots.paginatorRight\">\n                <slot name=\"paginatorRight\"></slot>\n            </template>\n        </DTPaginator>\n        <div class=\"p-datatable-footer\" v-if=\"$slots.footer\">\n            <slot name=\"footer\"></slot>\n        </div>\n        <div ref=\"resizeHelper\" class=\"p-column-resizer-helper\" style=\"display: none\"></div>\n        <span ref=\"reorderIndicatorUp\" class=\"pi pi-arrow-down p-datatable-reorder-indicator-up\" style=\"position: absolute; display: none\" v-if=\"reorderableColumns\" />\n        <span ref=\"reorderIndicatorDown\" class=\"pi pi-arrow-up p-datatable-reorder-indicator-down\" style=\"position: absolute; display: none\" v-if=\"reorderableColumns\" />\n    </div>\n</template>\n\n<script>\nimport {ObjectUtils,DomHandler,UniqueComponentId} from 'primevue/utils';\nimport {FilterMatchMode,FilterOperator,FilterService} from 'primevue/api';\nimport Paginator from 'primevue/paginator';\nimport TableHeader from './TableHeader.vue';\nimport TableBody from './TableBody.vue';\nimport TableFooter from './TableFooter.vue';\n\nexport default {\n    name: 'DataTable',\n    emits: ['value-change', 'update:first', 'update:rows', 'page', 'update:sortField', 'update:sortOrder', 'update:multiSortMeta', 'sort', 'filter', 'row-click', 'row-dblclick',\n        'update:selection', 'row-select', 'row-unselect', 'update:contextMenuSelection', 'row-contextmenu', 'row-unselect-all', 'row-select-all',\n        'column-resize-end', 'column-reorder', 'row-reorder', 'update:expandedRows', 'row-collapse', 'row-expand',\n        'update:expandedRowGroups', 'rowgroup-collapse', 'rowgroup-expand', 'update:filters', 'state-restore', 'state-save',\n        'cell-edit-init', 'cell-edit-complete', 'cell-edit-cancel', 'update:editingRows', 'row-edit-init', 'row-edit-save', 'row-edit-cancel'],\n    props: {\n        value: {\n            type: Array,\n            default: null\n        },\n        dataKey: {\n            type: String,\n            default: null\n        },\n        rows: {\n            type: Number,\n            default: 0\n        },\n        first: {\n            type: Number,\n            default: 0\n        },\n        totalRecords: {\n            type: Number,\n            default: 0\n        },\n        paginator: {\n            type: Boolean,\n            default: false\n        },\n        paginatorPosition: {\n            type: String,\n            default: 'bottom'\n        },\n        alwaysShowPaginator: {\n            type: Boolean,\n            default: true\n        },\n        paginatorTemplate: {\n            type: String,\n            default: 'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown'\n        },\n        pageLinkSize: {\n            type: Number,\n            default: 5\n        },\n        rowsPerPageOptions: {\n            type: Array,\n            default: null\n        },\n        currentPageReportTemplate: {\n            type: String,\n            default: '({currentPage} of {totalPages})'\n        },\n        lazy: {\n            type: Boolean,\n            default: false\n        },\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        loadingIcon: {\n            type: String,\n            default: 'pi pi-spinner'\n        },\n        sortField: {\n            type: [String, Function],\n            default: null\n        },\n        sortOrder: {\n            type: Number,\n            default: null\n        },\n        defaultSortOrder: {\n            type: Number,\n            default: 1\n        },\n        multiSortMeta: {\n            type: Array,\n            default: null\n        },\n        sortMode: {\n            type: String,\n            default: 'single'\n        },\n        removableSort: {\n            type: Boolean,\n            default: false\n        },\n        filters: {\n            type: Object,\n            default: null\n        },\n        filterDisplay: {\n            type: String,\n            default: null\n        },\n        globalFilterFields: {\n            type: Array,\n            default: null\n        },\n        filterLocale: {\n            type: String,\n            default: undefined\n        },\n        selection: {\n            type: [Array,Object],\n            default: null\n        },\n        selectionMode: {\n            type: String,\n            default: null\n        },\n        compareSelectionBy: {\n            type: String,\n            default: 'deepEquals'\n        },\n        metaKeySelection: {\n            type: Boolean,\n            default: true\n        },\n        contextMenu: {\n            type: Boolean,\n            default: false\n        },\n        contextMenuSelection: {\n            type: Object,\n            default: null\n        },\n        rowHover: {\n            type: Boolean,\n            default: false\n        },\n        csvSeparator: {\n            type: String,\n            default: ','\n        },\n        exportFilename: {\n            type: String,\n            default: 'download'\n        },\n        exportFunction: {\n            type: Function,\n            default: null\n        },\n        autoLayout: {\n            type: Boolean,\n            default: false\n        },\n        resizableColumns: {\n            type: Boolean,\n            default: false\n        },\n        columnResizeMode: {\n            type: String,\n            default: 'fit'\n        },\n        reorderableColumns: {\n            type: Boolean,\n            default: false\n        },\n        expandedRows: {\n            type: Array,\n            default: null\n        },\n        expandedRowIcon: {\n            type: String,\n            default: 'pi-chevron-down'\n        },\n        collapsedRowIcon: {\n            type: String,\n            default: 'pi-chevron-right'\n        },\n        rowGroupMode: {\n            type: String,\n            default: null\n        },\n        groupRowsBy: {\n            type: [Array,String],\n            default: null\n        },\n        expandableRowGroups: {\n            type: Boolean,\n            default: false\n        },\n        expandedRowGroups: {\n            type: Array,\n            default: null\n        },\n        stateStorage: {\n            type: String,\n            default: 'session'\n        },\n        stateKey: {\n            type: String,\n            default: null\n        },\n        editMode: {\n            type: String,\n            default: null\n        },\n        editingRows: {\n            type: Array,\n            default: null\n        },\n        rowClass: {\n            type: null,\n            default: null\n        },\n        scrollable: {\n            type: Boolean,\n            default: false\n        },\n        scrollDirection: {\n            type: String,\n            default: \"vertical\"\n        },\n        scrollHeight: {\n            type: String,\n            default: null\n        },\n        frozenValue: {\n            type: Array,\n            default: null\n        },\n        responsiveLayout: {\n            type: String,\n            default: 'stack'\n        },\n        breakpoint: {\n            type: String,\n            default: '960px'\n        },\n        showGridlines: {\n            type: Boolean,\n            default: false\n        },\n        stripedRows: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            d_first: this.first,\n            d_rows: this.rows,\n            d_sortField: this.sortField,\n            d_sortOrder: this.sortOrder,\n            d_multiSortMeta: this.multiSortMeta ? [...this.multiSortMeta] : [],\n            d_groupRowsSortMeta: null,\n            d_selectionKeys: null,\n            d_expandedRowKeys: null,\n            d_columnOrder: null,\n            d_editingRowKeys: null,\n            d_editingMeta: {},\n            d_filters: this.cloneFilters(this.filters)\n        };\n    },\n    rowTouched: false,\n    anchorRowIndex: null,\n    rangeRowIndex: null,\n    documentColumnResizeListener: null,\n    documentColumnResizeEndListener: null,\n    lastResizeHelperX: null,\n    resizeColumnElement: null,\n    columnResizing: false,\n    colReorderIconWidth: null,\n    colReorderIconHeight: null,\n    draggedColumn: null,\n    draggedRowIndex: null,\n    droppedRowIndex: null,\n    rowDragging: null,\n    columnWidthsState: null,\n    tableWidthState: null,\n    columnWidthsRestored: false,\n    watch: {\n        first(newValue) {\n            this.d_first = newValue;\n        },\n        rows(newValue) {\n            this.d_rows = newValue;\n        },\n        sortField(newValue) {\n            this.d_sortField = newValue;\n        },\n        sortOrder(newValue) {\n            this.d_sortOrder = newValue;\n        },\n        multiSortMeta(newValue) {\n            this.d_multiSortMeta = newValue;\n        },\n        selection: {\n            immediate: true,\n            handler(newValue) {\n                if (this.dataKey) {\n                    this.updateSelectionKeys(newValue);\n                }\n            }\n        },\n        expandedRows(newValue) {\n            if (this.dataKey) {\n                this.updateExpandedRowKeys(newValue);\n            }\n        },\n        editingRows(newValue) {\n            if (this.dataKey) {\n                this.updateEditingRowKeys(newValue);\n            }\n        },\n        filters: {\n            deep: true,\n            handler: function(newValue) {\n                this.d_filters = this.cloneFilters(newValue);\n            }\n        }\n    },\n    beforeMount() {\n        if (this.isStateful()) {\n            this.restoreState();\n        }\n    },\n    mounted() {\n        this.$el.setAttribute(this.attributeSelector, '');\n\n        if (this.responsiveLayout === 'stack' && !this.scrollable) {\n            this.createResponsiveStyle();\n        }\n\n        if (this.isStateful() && this.resizableColumns) {\n            this.restoreColumnWidths();\n        }\n\n        if (this.editMode === 'row' && this.dataKey && !this.d_editingRowKeys) {\n            this.updateEditingRowKeys(this.editingRows);\n        }\n    },\n    beforeUnmount() {\n        this.unbindColumnResizeEvents();\n        this.destroyStyleElement();\n        this.destroyResponsiveStyle();\n    },\n    updated() {\n        if (this.isStateful()) {\n            this.saveState();\n        }\n\n        if (this.editMode === 'row' && this.dataKey && !this.d_editingRowKeys) {\n            this.updateEditingRowKeys(this.editingRows);\n        }\n    },\n    methods: {\n        columnProp(col, prop) {\n            return ObjectUtils.getVNodeProp(col, prop);\n        },\n        onPage(event) {\n            this.clearEditingMetaData();\n\n            this.d_first = event.first;\n            this.d_rows = event.rows;\n\n            let pageEvent = this.createLazyLoadEvent(event);\n            pageEvent.pageCount = event.pageCount;\n            pageEvent.page = event.page;\n\n            this.$emit('update:first', this.d_first);\n            this.$emit('update:rows', this.d_rows);\n            this.$emit('page', pageEvent);\n            this.$emit('value-change', this.processedData);\n        },\n        onColumnHeaderClick(e) {\n            const event = e.originalEvent;\n            const column = e.column;\n\n            if (this.columnProp(column, 'sortable')) {\n                const targetNode = event.target;\n                const columnField = this.columnProp(column, 'sortField') || this.columnProp(column, 'field');\n\n                if (DomHandler.hasClass(targetNode, 'p-sortable-column') || DomHandler.hasClass(targetNode, 'p-column-title') || DomHandler.hasClass(targetNode, 'p-column-header-content')\n                    || DomHandler.hasClass(targetNode, 'p-sortable-column-icon') || DomHandler.hasClass(targetNode.parentElement, 'p-sortable-column-icon')) {\n                    DomHandler.clearSelection();\n\n                    if (this.sortMode === 'single') {\n                        if (this.d_sortField === columnField) {\n                            if (this.removableSort && (this.d_sortOrder * -1 === this.defaultSortOrder)) {\n                                this.d_sortOrder = null;\n                                this.d_sortField = null;\n                            }\n                            else {\n                                this.d_sortOrder = this.d_sortOrder * -1;\n                            }\n                        }\n                        else {\n                            this.d_sortOrder = this.defaultSortOrder;\n                            this.d_sortField = columnField;\n                        }\n\n                        this.$emit('update:sortField', this.d_sortField);\n                        this.$emit('update:sortOrder', this.d_sortOrder);\n                        this.resetPage();\n                    }\n                    else if (this.sortMode === 'multiple') {\n                        let metaKey = event.metaKey || event.ctrlKey;\n                        if (!metaKey) {\n                            this.d_multiSortMeta =  this.d_multiSortMeta.filter(meta => meta.field === columnField);\n                        }\n\n                        this.addMultiSortField(columnField);\n                        this.$emit('update:multiSortMeta', this.d_multiSortMeta);\n                    }\n\n                    this.$emit('sort', this.createLazyLoadEvent(event));\n                    this.$emit('value-change', this.processedData);\n                }\n            }\n        },\n        sortSingle(value) {\n            this.clearEditingMetaData();\n\n            if (this.groupRowsBy && this.groupRowsBy === this.sortField) {\n                this.d_multiSortMeta = [\n                    {field: this.sortField, order: this.sortOrder || this.defaultSortOrder},\n                    {field: this.d_sortField, order: this.d_sortOrder}\n                ];\n\n                return this.sortMultiple(value);\n            }\n\n            let data = [...value];\n\n            data.sort((data1, data2) => {\n                let value1 = ObjectUtils.resolveFieldData(data1, this.d_sortField);\n                let value2 = ObjectUtils.resolveFieldData(data2, this.d_sortField);\n\n                let result = null;\n\n                if (value1 == null && value2 != null)\n                    result = -1;\n                else if (value1 != null && value2 == null)\n                    result = 1;\n                else if (value1 == null && value2 == null)\n                    result = 0;\n                else if (typeof value1 === 'string' && typeof value2 === 'string')\n                    result = value1.localeCompare(value2, undefined, { numeric: true });\n                else\n                    result = (value1 < value2) ? -1 : (value1 > value2) ? 1 : 0;\n\n                return (this.d_sortOrder * result);\n            });\n\n            return data;\n        },\n        sortMultiple(value) {\n            this.clearEditingMetaData();\n\n            if (this.groupRowsBy && (this.d_groupRowsSortMeta || (this.d_multiSortMeta.length && this.groupRowsBy === this.d_multiSortMeta[0].field))) {\n                const firstSortMeta = this.d_multiSortMeta[0];\n                !this.d_groupRowsSortMeta && (this.d_groupRowsSortMeta = firstSortMeta);\n\n                if (firstSortMeta.field !== this.d_groupRowsSortMeta.field) {\n                    this.d_multiSortMeta = [this.d_groupRowsSortMeta, ...this.d_multiSortMeta];\n                }\n            }\n\n            let data = [...value];\n\n            data.sort((data1, data2) => {\n                return this.multisortField(data1, data2, 0);\n            });\n\n            return data;\n        },\n        multisortField(data1, data2, index) {\n            const value1 = ObjectUtils.resolveFieldData(data1, this.d_multiSortMeta[index].field);\n            const value2 = ObjectUtils.resolveFieldData(data2, this.d_multiSortMeta[index].field);\n            let result = null;\n\n            if (typeof value1 === 'string' || value1 instanceof String) {\n                if (value1.localeCompare && (value1 !== value2)) {\n                    return (this.d_multiSortMeta[index].order * value1.localeCompare(value2, undefined, { numeric: true }));\n                }\n            }\n            else {\n                result = (value1 < value2) ? -1 : 1;\n            }\n\n            if (value1 === value2)  {\n                return (this.d_multiSortMeta.length - 1) > (index) ? (this.multisortField(data1, data2, index + 1)) : 0;\n            }\n\n            return (this.d_multiSortMeta[index].order * result);\n        },\n        addMultiSortField(field) {\n            let index =  this.d_multiSortMeta.findIndex(meta => meta.field === field);\n\n            if (index >= 0) {\n                if (this.removableSort && (this.d_multiSortMeta[index].order * -1 === this.defaultSortOrder))\n                    this.d_multiSortMeta.splice(index, 1);\n                else\n                    this.d_multiSortMeta[index] = {field: field, order: this.d_multiSortMeta[index].order * -1};\n            }\n            else {\n                this.d_multiSortMeta.push({field: field, order: this.defaultSortOrder});\n            }\n\n            this.d_multiSortMeta = [...this.d_multiSortMeta];\n        },\n        filter(data) {\n            if (!data) {\n                return;\n            }\n\n            this.clearEditingMetaData();\n\n            let globalFilterFieldsArray;\n            if (this.filters['global']) {\n                globalFilterFieldsArray = this.globalFilterFields|| this.columns.map(col => this.columnProp(col, 'filterField') || this.columnProp(col, 'field'));\n            }\n\n            let filteredValue = [];\n\n            for (let i = 0; i < data.length; i++) {\n                let localMatch = true;\n                let globalMatch = false;\n                let localFiltered = false;\n\n                for (let prop in this.filters) {\n                    if (Object.prototype.hasOwnProperty.call(this.filters, prop) && prop !== 'global') {\n                        localFiltered = true;\n                        let filterField = prop;\n                        let filterMeta = this.filters[filterField];\n\n                        if (filterMeta.operator) {\n                            for (let filterConstraint of filterMeta.constraints) {\n                                localMatch = this.executeLocalFilter(filterField, data[i], filterConstraint);\n\n                                if ((filterMeta.operator === FilterOperator.OR && localMatch) || (filterMeta.operator === FilterOperator.AND && !localMatch)) {\n                                    break;\n                                }\n                            }\n                        }\n                        else {\n                            localMatch = this.executeLocalFilter(filterField, data[i], filterMeta);\n                        }\n\n                        if (!localMatch) {\n                            break;\n                        }\n                    }\n                }\n\n                if (this.filters['global'] && !globalMatch && globalFilterFieldsArray) {\n                    for(let j = 0; j < globalFilterFieldsArray.length; j++) {\n                        let globalFilterField = globalFilterFieldsArray[j];\n                        globalMatch = FilterService.filters[this.filters['global'].matchMode || FilterMatchMode.CONTAINS](ObjectUtils.resolveFieldData(data[i], globalFilterField), this.filters['global'].value, this.filterLocale);\n\n                        if (globalMatch) {\n                            break;\n                        }\n                    }\n                }\n\n                let matches;\n                if (this.filters['global']) {\n                    matches = localFiltered ? (localFiltered && localMatch && globalMatch) : globalMatch;\n                }\n                else {\n                    matches = localFiltered && localMatch;\n                }\n\n                if (matches) {\n                    filteredValue.push(data[i]);\n                }\n            }\n\n            if (filteredValue.length === this.value.length) {\n                filteredValue = data;\n            }\n\n            let filterEvent = this.createLazyLoadEvent();\n            filterEvent.filteredValue = filteredValue;\n            this.$emit('filter', filterEvent);\n            this.$emit('value-change', filteredValue);\n\n            return filteredValue;\n        },\n        executeLocalFilter(field, rowData, filterMeta) {\n            let filterValue = filterMeta.value;\n            let filterMatchMode = filterMeta.matchMode || FilterMatchMode.STARTS_WITH;\n            let dataFieldValue = ObjectUtils.resolveFieldData(rowData, field);\n            let filterConstraint = FilterService.filters[filterMatchMode];\n\n            return filterConstraint(dataFieldValue, filterValue, this.filterLocale);\n        },\n        onRowClick(e) {\n            const event = e.originalEvent;\n            if (DomHandler.isClickable(event.target)) {\n                return;\n            }\n\n            this.$emit('row-click', e);\n\n            if (this.selectionMode) {\n                const rowData = e.data;\n                const rowIndex = e.index;\n\n                if (this.isMultipleSelectionMode() && event.shiftKey && this.anchorRowIndex != null) {\n                    DomHandler.clearSelection();\n                    this.rangeRowIndex = rowIndex;\n                    this.selectRange(event);\n                }\n                else {\n                    const selected = this.isSelected(rowData);\n                    const metaSelection = this.rowTouched ? false : this.metaKeySelection;\n                    this.anchorRowIndex = rowIndex;\n                    this.rangeRowIndex = rowIndex;\n\n                    if (metaSelection) {\n                        let metaKey = event.metaKey || event.ctrlKey;\n\n                        if (selected && metaKey) {\n                            if(this.isSingleSelectionMode()) {\n                                this.$emit('update:selection', null);\n                            }\n                            else {\n                                const selectionIndex = this.findIndexInSelection(rowData);\n                                const _selection = this.selection.filter((val,i) => i != selectionIndex);\n                                this.$emit('update:selection', _selection);\n                            }\n\n                            this.$emit('row-unselect', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                        }\n                        else {\n                            if(this.isSingleSelectionMode()) {\n                                this.$emit('update:selection', rowData);\n                            }\n                            else if (this.isMultipleSelectionMode()) {\n                                let _selection = metaKey ? (this.selection || []) : [];\n                                _selection = [..._selection, rowData];\n                                this.$emit('update:selection', _selection);\n                            }\n\n                            this.$emit('row-select', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                        }\n                    }\n                    else {\n                        if (this.selectionMode === 'single') {\n                            if (selected) {\n                                this.$emit('update:selection', null);\n                                this.$emit('row-unselect', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                            }\n                            else {\n                                this.$emit('update:selection', rowData);\n                                this.$emit('row-select', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                            }\n                        }\n                        else if (this.selectionMode === 'multiple') {\n                            if (selected) {\n                                const selectionIndex = this.findIndexInSelection(rowData);\n                                const _selection = this.selection.filter((val, i) => i != selectionIndex);\n                                this.$emit('update:selection', _selection);\n                                this.$emit('row-unselect', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                            }\n                            else {\n                                const _selection = this.selection ? [...this.selection, rowData] : [rowData];\n                                this.$emit('update:selection', _selection);\n                                this.$emit('row-select', {originalEvent: event, data: rowData, index: event.index, type: 'row'});\n                            }\n                        }\n                    }\n                }\n            }\n\n            this.rowTouched = false;\n        },\n        onRowDblClick(e) {\n            const event = e.originalEvent;\n            if (DomHandler.isClickable(event.target)) {\n                return;\n            }\n\n            this.$emit('row-dblclick', e);\n        },\n        onRowRightClick(event) {\n            DomHandler.clearSelection();\n            event.originalEvent.target.focus();\n\n            this.$emit('update:contextMenuSelection', event.data);\n            this.$emit('row-contextmenu', event);\n        },\n        onRowTouchEnd() {\n            this.rowTouched = true;\n        },\n        onRowKeyDown(e) {\n            const event = e.originalEvent;\n            const rowData = e.data;\n            const rowIndex = e.index;\n\n            if (this.selectionMode) {\n                const row = event.target;\n\n                switch (event.which) {\n                    //down arrow\n                    case 40:\n                        var nextRow = this.findNextSelectableRow(row);\n                        if (nextRow) {\n                            nextRow.focus();\n                        }\n\n                        event.preventDefault();\n                    break;\n\n                    //up arrow\n                    case 38:\n                        var prevRow = this.findPrevSelectableRow(row);\n                        if (prevRow) {\n                            prevRow.focus();\n                        }\n\n                        event.preventDefault();\n                    break;\n\n                    //enter\n                    case 13:\n                        this.onRowClick({originalEvent: event, data: rowData, index: rowIndex});\n                    break;\n\n                    default:\n                        //no op\n                    break;\n                }\n            }\n        },\n        findNextSelectableRow(row) {\n            let nextRow = row.nextElementSibling;\n            if (nextRow) {\n                if (DomHandler.hasClass(nextRow, 'p-selectable-row'))\n                    return nextRow;\n                else\n                    return this.findNextSelectableRow(nextRow);\n            }\n            else {\n                return null;\n            }\n        },\n        findPrevSelectableRow(row) {\n            let prevRow = row.previousElementSibling;\n            if (prevRow) {\n                if (DomHandler.hasClass(prevRow, 'p-selectable-row'))\n                    return prevRow;\n                else\n                    return this.findPrevSelectableRow(prevRow);\n            }\n            else {\n                return null;\n            }\n        },\n        toggleRowWithRadio(event) {\n            const rowData = event.data;\n\n            if (this.isSelected(rowData)) {\n                this.$emit('update:selection', null);\n                this.$emit('row-unselect', {originalEvent: event, data: rowData, type: 'radiobutton'});\n            }\n            else {\n                this.$emit('update:selection', rowData);\n                this.$emit('row-select', {originalEvent: event, data: rowData, type: 'radiobutton'});\n            }\n        },\n        toggleRowWithCheckbox(event) {\n            const rowData = event.data;\n\n            if (this.isSelected(rowData)) {\n                const selectionIndex = this.findIndexInSelection(rowData);\n                const _selection = this.selection.filter((val, i) => i != selectionIndex);\n                this.$emit('update:selection', _selection);\n                this.$emit('row-unselect', {originalEvent: event, data: rowData, type: 'checkbox'});\n            }\n            else {\n                let _selection = this.selection ? [...this.selection] : [];\n                _selection = [..._selection, rowData];\n                this.$emit('update:selection', _selection);\n                this.$emit('row-select', {originalEvent: event, data: rowData, type: 'checkbox'});\n            }\n        },\n        toggleRowsWithCheckbox(event) {\n            const processedData = this.processedData;\n            const checked = this.allRowsSelected;\n            const _selection = checked ? [] : (this.frozenValue ? [...this.frozenValue, ...processedData]: processedData);\n            this.$emit('update:selection', _selection);\n\n            if (checked)\n                this.$emit('row-unselect-all', {originalEvent: event});\n            else\n                this.$emit('row-select-all', {originalEvent: event, data: _selection});\n        },\n        isSingleSelectionMode() {\n            return this.selectionMode === 'single';\n        },\n        isMultipleSelectionMode() {\n            return this.selectionMode === 'multiple';\n        },\n        isSelected(rowData) {\n            if (rowData && this.selection) {\n                if (this.dataKey) {\n                    return this.d_selectionKeys ? this.d_selectionKeys[ObjectUtils.resolveFieldData(rowData, this.dataKey)] !== undefined : false;\n                }\n                else {\n                    if (this.selection instanceof Array)\n                        return this.findIndexInSelection(rowData) > -1;\n                    else\n                        return this.equals(rowData, this.selection);\n                }\n            }\n\n            return false;\n        },\n        findIndexInSelection(rowData) {\n            return this.findIndex(rowData, this.selection);\n        },\n        findIndex(rowData, collection) {\n            let index = -1;\n            if (collection && collection.length) {\n                for (let i = 0; i < collection.length; i++) {\n                    if (this.equals(rowData, collection[i])) {\n                        index = i;\n                        break;\n                    }\n                }\n            }\n\n            return index;\n        },\n        updateSelectionKeys(selection) {\n            this.d_selectionKeys = {};\n            if (Array.isArray(selection)) {\n                for (let data of selection) {\n                    this.d_selectionKeys[String(ObjectUtils.resolveFieldData(data, this.dataKey))] = 1;\n                }\n            }\n            else {\n                this.d_selectionKeys[String(ObjectUtils.resolveFieldData(selection, this.dataKey))] = 1;\n            }\n        },\n        updateExpandedRowKeys(expandedRows) {\n            if (expandedRows && expandedRows.length) {\n                this.d_expandedRowKeys = {};\n                for (let data of expandedRows) {\n                    this.d_expandedRowKeys[String(ObjectUtils.resolveFieldData(data, this.dataKey))] = 1;\n                }\n            }\n            else {\n                this.d_expandedRowKeys = null;\n            }\n        },\n        updateEditingRowKeys(editingRows) {\n            if (editingRows && editingRows.length) {\n                this.d_editingRowKeys = {};\n                for (let data of editingRows) {\n                    this.d_editingRowKeys[String(ObjectUtils.resolveFieldData(data, this.dataKey))] = 1;\n                }\n            }\n            else {\n                this.d_editingRowKeys = null;\n            }\n        },\n        equals(data1, data2) {\n            return this.compareSelectionBy === 'equals' ? (data1 === data2) : ObjectUtils.equals(data1, data2, this.dataKey);\n        },\n        selectRange(event) {\n            let rangeStart, rangeEnd;\n\n            if (this.rangeRowIndex > this.anchorRowIndex) {\n                rangeStart = this.anchorRowIndex;\n                rangeEnd = this.rangeRowIndex;\n            }\n            else if(this.rangeRowIndex < this.anchorRowIndex) {\n                rangeStart = this.rangeRowIndex;\n                rangeEnd = this.anchorRowIndex;\n            }\n            else {\n                rangeStart = this.rangeRowIndex;\n                rangeEnd = this.rangeRowIndex;\n            }\n\n            if (this.lazy && this.paginator) {\n                rangeStart -= this.first;\n                rangeEnd -= this.first;\n            }\n\n            const value = this.processedData;\n            let _selection = [];\n            for(let i = rangeStart; i <= rangeEnd; i++) {\n                let rangeRowData = value[i];\n                _selection.push(rangeRowData);\n                this.$emit('row-select', {originalEvent: event, data: rangeRowData, type: 'row'});\n            }\n\n            this.$emit('update:selection', _selection);\n        },\n        exportCSV(options) {\n            let data = this.processedData;\n            let csv = '\\ufeff';\n\n            if (options && options.selectionOnly)\n                data = this.selection || [];\n            else if (this.frozenValue)\n                data = data ? [...this.frozenValue, ...data] : this.frozenValue;\n\n            //headers\n            let headerInitiated = false;\n            for (let i = 0; i < this.columns.length; i++) {\n                let column = this.columns[i];\n\n                if (this.columnProp(column, 'exportable') !== false && this.columnProp(column, 'field')) {\n                    if (headerInitiated)\n                        csv += this.csvSeparator;\n                    else\n                        headerInitiated = true;\n\n                    csv += '\"' + (this.columnProp(column, 'header') || this.columnProp(column, 'field')) + '\"';\n                }\n            }\n\n            //body\n            if (data) {\n                data.forEach(record => {\n                    csv += '\\n';\n                    let rowInitiated = false;\n                    for (let i = 0; i < this.columns.length; i++) {\n                        let column = this.columns[i];\n                        if (this.columnProp(column, 'exportable') !== false && this.columnProp(column, 'field')) {\n                            if (rowInitiated)\n                                csv += this.csvSeparator;\n                            else\n                                rowInitiated = true;\n\n                            let cellData = ObjectUtils.resolveFieldData(record, this.columnProp(column, 'field'));\n\n                            if (cellData != null) {\n                                if (this.exportFunction) {\n                                    cellData = this.exportFunction({\n                                        data: cellData,\n                                        field: this.columnProp(column, 'field')\n                                    });\n                                }\n                                else\n                                    cellData = String(cellData).replace(/\"/g, '\"\"');\n                            }\n                            else\n                                cellData = '';\n\n                            csv += '\"' + cellData + '\"';\n                        }\n                    }\n                });\n            }\n\n            let blob = new Blob([csv], {\n                type: 'text/csv;charset=utf-8;'\n            });\n\n            if (window.navigator.msSaveOrOpenBlob) {\n                navigator.msSaveOrOpenBlob(blob, this.exportFilename + '.csv');\n            }\n            else {\n                let link = document.createElement(\"a\");\n                link.style.display = 'none';\n                document.body.appendChild(link);\n                if (link.download !== undefined) {\n                    link.setAttribute('href', URL.createObjectURL(blob));\n                    link.setAttribute('download', this.exportFilename + '.csv');\n                    link.click();\n                }\n                else {\n                    csv = 'data:text/csv;charset=utf-8,' + csv;\n                    window.open(encodeURI(csv));\n                }\n                document.body.removeChild(link);\n            }\n        },\n        resetPage() {\n            this.d_first = 0;\n            this.$emit('update:first', this.d_first);\n        },\n        onColumnResizeStart(event) {\n            let containerLeft = DomHandler.getOffset(this.$el).left;\n            this.resizeColumnElement = event.target.parentElement;\n            this.columnResizing = true;\n            this.lastResizeHelperX = (event.pageX - containerLeft + this.$el.scrollLeft);\n\n            this.bindColumnResizeEvents();\n        },\n        onColumnResize(event) {\n            let containerLeft = DomHandler.getOffset(this.$el).left;\n            DomHandler.addClass(this.$el, 'p-unselectable-text');\n            this.$refs.resizeHelper.style.height = this.$el.offsetHeight + 'px';\n            this.$refs.resizeHelper.style.top = 0 + 'px';\n            this.$refs.resizeHelper.style.left = (event.pageX - containerLeft + this.$el.scrollLeft) + 'px';\n\n            this.$refs.resizeHelper.style.display = 'block';\n        },\n        onColumnResizeEnd() {\n            let delta = this.$refs.resizeHelper.offsetLeft - this.lastResizeHelperX;\n            let columnWidth = this.resizeColumnElement.offsetWidth;\n            let newColumnWidth = columnWidth + delta;\n            let minWidth = this.resizeColumnElement.style.minWidth||15;\n\n            if (columnWidth + delta > parseInt(minWidth, 10)) {\n                if (this.columnResizeMode === 'fit') {\n                    let nextColumn = this.resizeColumnElement.nextElementSibling;\n                    let nextColumnWidth = nextColumn.offsetWidth - delta;\n\n                    if (newColumnWidth > 15 && nextColumnWidth > 15) {\n                        if (!this.scrollable) {\n                            this.resizeColumnElement.style.width = newColumnWidth + 'px';\n                            if(nextColumn) {\n                                nextColumn.style.width = nextColumnWidth + 'px';\n                            }\n                        }\n                        else {\n                            this.resizeTableCells(newColumnWidth, nextColumnWidth);\n                        }\n                    }\n                }\n                else if (this.columnResizeMode === 'expand') {\n                    const tableWidth = this.$refs.table.offsetWidth + delta + 'px';\n                    this.$refs.table.style.width = tableWidth;\n                    this.$refs.table.style.minWidth = tableWidth;\n\n                    if (!this.scrollable)\n                        this.resizeColumnElement.style.width = newColumnWidth + 'px';\n                    else\n                        this.resizeTableCells(newColumnWidth);\n                }\n\n                this.$emit('column-resize-end', {\n                    element: this.resizeColumnElement,\n                    delta: delta\n                });\n            }\n\n            this.$refs.resizeHelper.style.display = 'none';\n            this.resizeColumn = null;\n            DomHandler.removeClass(this.$el, 'p-unselectable-text');\n\n            this.unbindColumnResizeEvents();\n\n            if (this.isStateful()) {\n                this.saveState();\n            }\n        },\n        resizeTableCells(newColumnWidth, nextColumnWidth) {\n            let colIndex = DomHandler.index(this.resizeColumnElement);\n            let widths = [];\n            let headers = DomHandler.find(this.$refs.table, '.p-datatable-thead > tr > th');\n            headers.forEach(header => widths.push(DomHandler.getOuterWidth(header)));\n\n            this.destroyStyleElement();\n            this.createStyleElement();\n\n            let innerHTML = '';\n            widths.forEach((width,index) => {\n                let colWidth = index === colIndex ? newColumnWidth : (nextColumnWidth && index === colIndex + 1) ? nextColumnWidth : width;\n                innerHTML += `\n                    .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th:nth-child(${index+1}) {\n                        flex: 0 0 ${colWidth}px !important;\n                    }\n\n                    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:nth-child(${index+1}) {\n                        flex: 0 0 ${colWidth}px !important;\n                    }\n                `\n            });\n            this.styleElement.innerHTML = innerHTML;\n        },\n        bindColumnResizeEvents() {\n            if (!this.documentColumnResizeListener) {\n                this.documentColumnResizeListener = document.addEventListener('mousemove', () => {\n                    if(this.columnResizing) {\n                        this.onColumnResize(event);\n                    }\n                });\n            }\n\n            if (!this.documentColumnResizeEndListener) {\n                this.documentColumnResizeEndListener = document.addEventListener('mouseup', () => {\n                    if(this.columnResizing) {\n                        this.columnResizing = false;\n                        this.onColumnResizeEnd();\n                    }\n                });\n            }\n\n        },\n        unbindColumnResizeEvents() {\n            if (this.documentColumnResizeListener) {\n                document.removeEventListener('document', this.documentColumnResizeListener);\n                this.documentColumnResizeListener = null;\n            }\n\n            if (this.documentColumnResizeEndListener) {\n                document.removeEventListener('document', this.documentColumnResizeEndListener);\n                 this.documentColumnResizeEndListener = null;\n            }\n        },\n        onColumnHeaderMouseDown(e) {\n            const event = e.originalEvent;\n            const column = e.column;\n\n            if (this.reorderableColumns && this.columnProp(column, 'reorderableColumn') !== false) {\n                if (event.target.nodeName === 'INPUT' || event.target.nodeName === 'TEXTAREA' || DomHandler.hasClass(event.target, 'p-column-resizer'))\n                    event.currentTarget.draggable = false;\n                else\n                    event.currentTarget.draggable = true;\n            }\n        },\n        onColumnHeaderDragStart(event) {\n            if (this.columnResizing) {\n                event.preventDefault();\n                return;\n            }\n\n            this.colReorderIconWidth = DomHandler.getHiddenElementOuterWidth(this.$refs.reorderIndicatorUp);\n            this.colReorderIconHeight = DomHandler.getHiddenElementOuterHeight(this.$refs.reorderIndicatorUp);\n\n            this.draggedColumn = this.findParentHeader(event.target);\n            event.dataTransfer.setData('text', 'b'); // Firefox requires this to make dragging possible\n        },\n        onColumnHeaderDragOver(event) {\n            let dropHeader = this.findParentHeader(event.target);\n            if(this.reorderableColumns && this.draggedColumn && dropHeader) {\n                event.preventDefault();\n                let containerOffset = DomHandler.getOffset(this.$el);\n                let dropHeaderOffset = DomHandler.getOffset(dropHeader);\n\n                if (this.draggedColumn !== dropHeader) {\n                    let targetLeft =  dropHeaderOffset.left - containerOffset.left;\n                    let columnCenter = dropHeaderOffset.left + dropHeader.offsetWidth / 2;\n\n                    this.$refs.reorderIndicatorUp.style.top = dropHeaderOffset.top - containerOffset.top - (this.colReorderIconHeight - 1) + 'px';\n                    this.$refs.reorderIndicatorDown.style.top = dropHeaderOffset.top - containerOffset.top + dropHeader.offsetHeight + 'px';\n\n                    if(event.pageX > columnCenter) {\n                        this.$refs.reorderIndicatorUp.style.left = (targetLeft + dropHeader.offsetWidth - Math.ceil(this.colReorderIconWidth / 2)) + 'px';\n                        this.$refs.reorderIndicatorDown.style.left = (targetLeft + dropHeader.offsetWidth - Math.ceil(this.colReorderIconWidth / 2))+ 'px';\n                        this.dropPosition = 1;\n                    }\n                    else {\n                        this.$refs.reorderIndicatorUp.style.left = (targetLeft - Math.ceil(this.colReorderIconWidth / 2)) + 'px';\n                        this.$refs.reorderIndicatorDown.style.left = (targetLeft - Math.ceil(this.colReorderIconWidth / 2))+ 'px';\n                        this.dropPosition = -1;\n                    }\n\n                    this.$refs.reorderIndicatorUp.style.display = 'block';\n                    this.$refs.reorderIndicatorDown.style.display = 'block';\n                }\n            }\n        },\n        onColumnHeaderDragLeave(event) {\n            if(this.reorderableColumns && this.draggedColumn) {\n                event.preventDefault();\n                this.$refs.reorderIndicatorUp.style.display = 'none';\n                this.$refs.reorderIndicatorDown.style.display = 'none';\n            }\n        },\n        onColumnHeaderDrop(event) {\n            event.preventDefault();\n            if (this.draggedColumn) {\n                let dragIndex = DomHandler.index(this.draggedColumn);\n                let dropIndex = DomHandler.index(this.findParentHeader(event.target));\n                let allowDrop = (dragIndex !== dropIndex);\n                if (allowDrop && ((dropIndex - dragIndex === 1 && this.dropPosition === -1) || (dragIndex - dropIndex === 1 && this.dropPosition === 1))) {\n                    allowDrop = false;\n                }\n\n                if (allowDrop) {\n                    ObjectUtils.reorderArray(this.columns, dragIndex, dropIndex);\n                    this.updateReorderableColumns();\n\n                    this.$emit('column-reorder', {\n                        originalEvent: event,\n                        dragIndex: dragIndex,\n                        dropIndex: dropIndex\n                    });\n                }\n\n                this.$refs.reorderIndicatorUp.style.display = 'none';\n                this.$refs.reorderIndicatorDown.style.display = 'none';\n                this.draggedColumn.draggable = false;\n                this.draggedColumn = null;\n                this.dropPosition = null;\n            }\n        },\n        findParentHeader(element) {\n            if(element.nodeName === 'TH') {\n                return element;\n            }\n            else {\n                let parent = element.parentElement;\n                while(parent.nodeName !== 'TH') {\n                    parent = parent.parentElement;\n                    if (!parent) break;\n                }\n                return parent;\n            }\n        },\n        findColumnByKey(columns, key) {\n            if (columns && columns.length) {\n                for (let i = 0; i < columns.length; i++) {\n                    let column = columns[i];\n                    if (this.columnProp(column, 'columnKey') === key || this.columnProp(column, 'field') === key) {\n                        return column;\n                    }\n                }\n            }\n\n            return null;\n        },\n        onRowMouseDown(event) {\n            if (DomHandler.hasClass(event.target, 'p-datatable-reorderablerow-handle'))\n                event.currentTarget.draggable = true;\n            else\n                event.currentTarget.draggable = false;\n        },\n        onRowDragStart(e) {\n            const event = e.originalEvent;\n            const index = e.index;\n            this.rowDragging = true;\n            this.draggedRowIndex = index;\n            event.dataTransfer.setData('text', 'b');    // For firefox\n        },\n        onRowDragOver(e) {\n            const event = e.originalEvent;\n            const index = e.index;\n\n            if (this.rowDragging && this.draggedRowIndex !== index) {\n                let rowElement = event.currentTarget;\n                let rowY = DomHandler.getOffset(rowElement).top + DomHandler.getWindowScrollTop();\n                let pageY = event.pageY;\n                let rowMidY = rowY + DomHandler.getOuterHeight(rowElement) / 2;\n                let prevRowElement = rowElement.previousElementSibling;\n\n                if (pageY < rowMidY) {\n                    DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\n\n                    this.droppedRowIndex = index;\n                    if (prevRowElement)\n                        DomHandler.addClass(prevRowElement, 'p-datatable-dragpoint-bottom');\n                    else\n                        DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\n                }\n                else {\n                    if (prevRowElement)\n                        DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');\n                    else\n                        DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\n\n                    this.droppedRowIndex = index + 1;\n                    DomHandler.addClass(rowElement, 'p-datatable-dragpoint-bottom');\n                }\n\n                event.preventDefault();\n            }\n        },\n        onRowDragLeave(event) {\n            let rowElement = event.currentTarget;\n            let prevRowElement = rowElement.previousElementSibling;\n            if (prevRowElement) {\n                DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');\n            }\n\n            DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\n            DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-top');\n        },\n        onRowDragEnd(event) {\n            this.rowDragging = false;\n            this.draggedRowIndex = null;\n            this.droppedRowIndex = null;\n            event.currentTarget.draggable = false;\n        },\n        onRowDrop(event) {\n            if (this.droppedRowIndex != null) {\n                let dropIndex = (this.draggedRowIndex > this.droppedRowIndex) ? this.droppedRowIndex : (this.droppedRowIndex === 0) ? 0 : this.droppedRowIndex - 1;\n                let processedData = [...this.processedData];\n                ObjectUtils.reorderArray(processedData, this.draggedRowIndex, dropIndex);\n\n                this.$emit('row-reorder', {\n                    originalEvent: event,\n                    dragIndex: this.draggedRowIndex,\n                    dropIndex: dropIndex,\n                    value: processedData\n                });\n            }\n\n            //cleanup\n            this.onRowDragLeave(event);\n            this.onRowDragEnd(event);\n            event.preventDefault();\n        },\n        toggleRow(event) {\n            let rowData = event.data;\n            let expanded;\n            let expandedRowIndex;\n            let _expandedRows = this.expandedRows ? [...this.expandedRows] : [];\n\n            if (this.dataKey) {\n                expanded = this.d_expandedRowKeys ? this.d_expandedRowKeys[ObjectUtils.resolveFieldData(rowData, this.dataKey)] !== undefined : false;\n            }\n            else {\n                expandedRowIndex = this.findIndex(rowData, this.expandedRows);\n                expanded = expandedRowIndex > -1;\n            }\n\n            if (expanded) {\n                if (expandedRowIndex == null) {\n                    expandedRowIndex = this.findIndex(rowData, this.expandedRows);\n                }\n                _expandedRows.splice(expandedRowIndex, 1);\n                this.$emit('update:expandedRows', _expandedRows);\n                this.$emit('row-collapse', event);\n            }\n            else {\n                _expandedRows.push(rowData);\n                this.$emit('update:expandedRows', _expandedRows);\n                this.$emit('row-expand', event);\n            }\n        },\n        toggleRowGroup(e) {\n            const event = e.originalEvent;\n            const data = e.data;\n            const groupFieldValue = ObjectUtils.resolveFieldData(data, this.groupRowsBy);\n            let _expandedRowGroups = this.expandedRowGroups ? [...this.expandedRowGroups] : [];\n\n            if (this.isRowGroupExpanded(data)) {\n                _expandedRowGroups = _expandedRowGroups.filter(group => group !== groupFieldValue);\n                this.$emit('update:expandedRowGroups', _expandedRowGroups);\n                this.$emit('rowgroup-collapse', {originalEvent: event, data: groupFieldValue});\n            }\n            else {\n                _expandedRowGroups.push(groupFieldValue);\n                this.$emit('update:expandedRowGroups', _expandedRowGroups);\n                this.$emit('rowgroup-expand', {originalEvent: event, data: groupFieldValue});\n            }\n        },\n        isRowGroupExpanded(rowData) {\n            if (this.expandableRowGroups && this.expandedRowGroups) {\n                let groupFieldValue = ObjectUtils.resolveFieldData(rowData, this.groupRowsBy);\n                return this.expandedRowGroups.indexOf(groupFieldValue) > -1;\n            }\n            return false;\n        },\n        isStateful() {\n            return this.stateKey != null;\n        },\n        getStorage() {\n            switch(this.stateStorage) {\n                case 'local':\n                    return window.localStorage;\n\n                case 'session':\n                    return window.sessionStorage;\n\n                default:\n                    throw new Error(this.stateStorage + ' is not a valid value for the state storage, supported values are \"local\" and \"session\".');\n            }\n        },\n        saveState() {\n            const storage = this.getStorage();\n            let state = {};\n\n            if (this.paginator) {\n                state.first = this.d_first;\n                state.rows = this.d_rows;\n            }\n\n            if (this.d_sortField) {\n                state.sortField = this.d_sortField;\n                state.sortOrder = this.d_sortOrder;\n            }\n\n            if (this.d_multiSortMeta) {\n                state.multiSortMeta = this.d_multiSortMeta;\n            }\n\n            if (this.hasFilters) {\n                state.filters = this.filters;\n            }\n\n            if (this.resizableColumns) {\n                this.saveColumnWidths(state);\n            }\n\n            if (this.reorderableColumns) {\n                state.columnOrder = this.d_columnOrder;\n            }\n\n            if (this.expandedRows) {\n                state.expandedRows = this.expandedRows;\n                state.expandedRowKeys = this.d_expandedRowKeys;\n            }\n\n            if (this.expandedRowGroups) {\n                state.expandedRowGroups = this.expandedRowGroups;\n            }\n\n            if (this.selection) {\n                state.selection = this.selection;\n                state.selectionKeys = this.d_selectionKeys;\n            }\n\n            if (Object.keys(state).length) {\n                storage.setItem(this.stateKey, JSON.stringify(state));\n            }\n\n            this.$emit('state-save', state);\n        },\n        restoreState() {\n            const storage = this.getStorage();\n            const stateString = storage.getItem(this.stateKey);\n            const dateFormat = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/;\n            const reviver = function(key, value) {\n                if (typeof value === \"string\" && dateFormat.test(value)) {\n                    return new Date(value);\n                }\n\n                return value;\n            }\n\n            if (stateString) {\n                let restoredState = JSON.parse(stateString, reviver);\n\n                if (this.paginator) {\n                    this.d_first = restoredState.first;\n                    this.d_rows = restoredState.rows;\n                }\n\n                if (restoredState.sortField) {\n                    this.d_sortField = restoredState.sortField;\n                    this.d_sortOrder = restoredState.sortOrder;\n                }\n\n                if (restoredState.multiSortMeta) {\n                    this.d_multiSortMeta = restoredState.multiSortMeta;\n                }\n\n                if (restoredState.filters) {\n                    this.$emit('update:filters', restoredState.filters);\n                }\n\n                if (this.resizableColumns) {\n                    this.columnWidthsState = restoredState.columnWidths;\n                    this.tableWidthState = restoredState.tableWidth;\n                }\n\n                if (this.reorderableColumns) {\n                    this.d_columnOrder = restoredState.columnOrder;\n                }\n\n                if (restoredState.expandedRows) {\n                    this.d_expandedRowKeys = restoredState.expandedRowKeys;\n                    this.$emit('update:expandedRows', restoredState.expandedRows);\n                }\n\n                if (restoredState.expandedRowGroups) {\n                    this.$emit('update:expandedRowGroups', restoredState.expandedRowGroups);\n                }\n\n                if (restoredState.selection) {\n                    this.d_selectionKeys = restoredState.d_selectionKeys;\n                    this.$emit('update:selection', restoredState.selection);\n                }\n\n                this.$emit('state-restore', restoredState);\n            }\n        },\n        saveColumnWidths(state) {\n            let widths = [];\n            let headers = DomHandler.find(this.$el, '.p-datatable-thead > tr > th');\n            headers.forEach(header => widths.push(DomHandler.getOuterWidth(header)));\n            state.columnWidths = widths.join(',');\n\n            if (this.columnResizeMode === 'expand') {\n                state.tableWidth = DomHandler.getOuterWidth(this.$refs.table) + 'px';\n            }\n        },\n        restoreColumnWidths() {\n            if (this.columnWidthsState) {\n                let widths = this.columnWidthsState.split(',');\n\n                if (this.columnResizeMode === 'expand' && this.tableWidthState) {\n                    this.$refs.table.style.width = this.tableWidthState;\n                    this.$refs.table.style.minWidth = this.tableWidthState;\n                    this.$el.style.width = this.tableWidthState;\n                }\n\n                this.createStyleElement();\n\n                if (this.scrollable && widths && widths.length > 0) {\n                    let innerHTML = '';\n                    widths.forEach((width,index) => {\n                        innerHTML += `\n                            .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th:nth-child(${index+1}) {\n                                flex: 0 0 ${width}px;\n                            }\n\n                            .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:nth-child(${index+1}) {\n                                flex: 0 0 ${width}px;\n                            }\n                        `\n                    });\n\n                    this.styleElement.innerHTML = innerHTML;\n                }\n                else {\n                    DomHandler.find(this.$refs.table, '.p-datatable-thead > tr > th').forEach((header, index) => header.style.width = widths[index] + 'px');\n                }\n            }\n        },\n        onCellEditInit(event) {\n            this.$emit('cell-edit-init', event);\n        },\n        onCellEditComplete(event) {\n            this.$emit('cell-edit-complete', event);\n        },\n        onCellEditCancel(event) {\n            this.$emit('cell-edit-cancel', event);\n        },\n        onRowEditInit(event) {\n            let _editingRows = this.editingRows ? [...this.editingRows] : [];\n            _editingRows.push(event.data);\n            this.$emit('update:editingRows', _editingRows);\n            this.$emit('row-edit-init', event);\n        },\n        onRowEditSave(event) {\n            let _editingRows = [...this.editingRows];\n            _editingRows.splice(this.findIndex(event.data, _editingRows), 1);\n            this.$emit('update:editingRows', _editingRows);\n            this.$emit('row-edit-save', event);\n        },\n        onRowEditCancel(event) {\n            let _editingRows = [...this.editingRows];\n            _editingRows.splice(this.findIndex(event.data, _editingRows), 1);\n            this.$emit('update:editingRows', _editingRows);\n            this.$emit('row-edit-cancel', event);\n        },\n        onEditingMetaChange(event) {\n            let { data, field, index, editing } = event;\n            let meta = this.d_editingMeta[index];\n\n            if (editing) {\n                !meta && (meta = this.d_editingMeta[index] = { data: { ...data }, fields: [] });\n                meta['fields'].push(field);\n            }\n            else if (meta) {\n                const fields = meta['fields'].filter(f => f !== field);\n                !fields.length ? (delete this.d_editingMeta[index]) : (meta['fields'] = fields);\n            }\n        },\n        clearEditingMetaData() {\n            if (this.editMode) {\n                this.d_editingMeta = {};\n            }\n        },\n        createLazyLoadEvent(event) {\n            return {\n                originalEvent: event,\n                first: this.d_first,\n                rows: this.d_rows,\n                sortField: this.d_sortField,\n                sortOrder: this.d_sortOrder,\n                multiSortMeta: this.d_multiSortMeta,\n                filters: this.d_filters\n            };\n        },\n        hasGlobalFilter() {\n            return this.filters && Object.prototype.hasOwnProperty.call(this.filters, 'global');\n        },\n        getChildren() {\n            return this.$slots.default ? this.$slots.default() : null;\n        },\n        onFilterChange(filters) {\n            this.d_filters = filters;\n        },\n        onFilterApply() {\n            this.d_first = 0;\n            this.$emit('update:first', this.d_first);\n            this.$emit('update:filters', this.d_filters);\n\n            if (this.lazy) {\n                this.$emit('filter', this.createLazyLoadEvent());\n            }\n        },\n        cloneFilters() {\n            let cloned = {};\n            if (this.filters) {\n                Object.entries(this.filters).forEach(([prop,value]) => {\n                    cloned[prop] = value.operator ? {operator: value.operator, constraints: value.constraints.map(constraint => {return {...constraint}})} : {...value};\n                });\n            }\n\n            return cloned;\n        },\n        updateReorderableColumns() {\n            let columnOrder = [];\n            this.columns.forEach(col => columnOrder.push(this.columnProp(col, 'columnKey')||this.columnProp(col, 'field')));\n            this.d_columnOrder = columnOrder;\n        },\n        createStyleElement() {\n            this.styleElement = document.createElement('style');\n            this.styleElement.type = 'text/css';\n            document.head.appendChild(this.styleElement);\n        },\n        createResponsiveStyle() {\n\t\t\tif (!this.responsiveStyleElement) {\n\t\t\t\tthis.responsiveStyleElement = document.createElement('style');\n\t\t\t\tthis.responsiveStyleElement.type = 'text/css';\n\t\t\t\tdocument.head.appendChild(this.responsiveStyleElement);\n\n                let innerHTML = `\n@media screen and (max-width: ${this.breakpoint}) {\n    .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th,\n    .p-datatable[${this.attributeSelector}] .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    .p-datatable[${this.attributeSelector}].p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`;\n\n                this.responsiveStyleElement.innerHTML = innerHTML;\n\t\t\t}\n\t\t},\n        destroyResponsiveStyle() {\n            if (this.responsiveStyleElement) {\n                document.head.removeChild(this.responsiveStyleElement);\n                this.responsiveStyleElement = null;\n            }\n        },\n        destroyStyleElement() {\n            if (this.styleElement) {\n                document.head.removeChild(this.styleElement);\n                this.styleElement = null;\n            }\n        }\n    },\n    computed: {\n        containerClass() {\n            return [\n                'p-datatable p-component', {\n                    'p-datatable-hoverable-rows': (this.rowHover || this.selectionMode),\n                    'p-datatable-auto-layout': this.autoLayout,\n                    'p-datatable-resizable': this.resizableColumns,\n                    'p-datatable-resizable-fit': this.resizableColumns && this.columnResizeMode === 'fit',\n                    'p-datatable-scrollable': this.scrollable,\n                    'p-datatable-scrollable-vertical': this.scrollable && this.scrollDirection === 'vertical',\n                    'p-datatable-scrollable-horizontal': this.scrollable && this.scrollDirection === 'horizontal',\n                    'p-datatable-scrollable-both': this.scrollable && this.scrollDirection === 'both',\n                    'p-datatable-flex-scrollable': (this.scrollable && this.scrollHeight === 'flex'),\n                    'p-datatable-responsive-stack': this.responsiveLayout === 'stack',\n                    'p-datatable-responsive-scroll': this.responsiveLayout === 'scroll',\n                    'p-datatable-striped': this.stripedRows,\n                    'p-datatable-gridlines': this.showGridlines,\n                    'p-datatable-grouped-header': this.headerColumnGroup != null,\n                    'p-datatable-grouped-footer': this.footerColumnGroup != null\n                }\n            ];\n        },\n        columns() {\n            let cols = [];\n            let children = this.getChildren();\n\n            if (!children) {\n                return;\n            }\n\n            children.forEach(child => {\n                if (child.children && child.children instanceof Array)\n                    cols = [...cols, ...child.children];\n                else if (child.type.name === 'Column')\n                    cols.push(child);\n            });\n\n            if (this.reorderableColumns && this.d_columnOrder) {\n                let orderedColumns = [];\n                for (let columnKey of this.d_columnOrder) {\n                    let column = this.findColumnByKey(cols, columnKey);\n                    if (column) {\n                        orderedColumns.push(column);\n                    }\n                }\n\n                return [...orderedColumns, ...cols.filter((item) => orderedColumns.indexOf(item) < 0)];\n            }\n\n            return cols;\n        },\n        headerColumnGroup() {\n            const children = this.getChildren();\n            if (children) {\n                for (let child of children) {\n                    if (child.type.name === 'ColumnGroup' && this.columnProp(child, 'type') === 'header') {\n                        return child;\n                    }\n                }\n            }\n\n            return null;\n        },\n        footerColumnGroup() {\n            const children = this.getChildren();\n            if (children) {\n                for (let child of children) {\n                    if (child.type.name === 'ColumnGroup' && this.columnProp(child, 'type') === 'footer') {\n                        return child;\n                    }\n                }\n            }\n\n            return null;\n        },\n        hasFilters() {\n            return this.filters && Object.keys(this.filters).length > 0 && this.filters.constructor === Object;\n        },\n        processedData() {\n            let data = this.value || [];\n\n            if (!this.lazy) {\n                if (data && data.length) {\n                    if (this.hasFilters) {\n                        data = this.filter(data);\n                    }\n\n                    if (this.sorted) {\n                        if(this.sortMode === 'single')\n                            data = this.sortSingle(data);\n                        else if(this.sortMode === 'multiple')\n                            data = this.sortMultiple(data);\n                    }\n                }\n            }\n\n            return data;\n        },\n        dataToRender() {\n            const data = this.processedData;\n\n            if (data && this.paginator) {\n                const first = this.lazy ? 0 : this.d_first;\n                return data.slice(first, first + this.d_rows);\n            }\n            else {\n                return data;\n            }\n        },\n        totalRecordsLength() {\n            if (this.lazy) {\n                return this.totalRecords;\n            }\n            else {\n                const data = this.processedData;\n                return data ? data.length : 0;\n            }\n        },\n        empty() {\n            const data = this.processedData;\n            return (!data || data.length === 0);\n        },\n        paginatorTop() {\n            return this.paginator && (this.paginatorPosition !== 'bottom' || this.paginatorPosition === 'both');\n        },\n        paginatorBottom() {\n            return this.paginator && (this.paginatorPosition !== 'top' || this.paginatorPosition === 'both');\n        },\n        sorted() {\n            return this.d_sortField || (this.d_multiSortMeta && this.d_multiSortMeta.length > 0);\n        },\n        loadingIconClass() {\n            return ['p-datatable-loading-icon pi-spin', this.loadingIcon];\n        },\n        allRowsSelected() {\n            const val = this.frozenValue ? [...this.frozenValue, ...this.processedData]: this.processedData;\n            const length = this.lazy ? this.totalRecords : (val ? val.length : 0);\n            return (val && length > 0 && this.selection && this.selection.length > 0 && this.selection.length === length);\n        },\n        attributeSelector() {\n            return UniqueComponentId();\n        },\n        groupRowSortField() {\n            return this.sortMode === 'single' ? this.sortField : (this.d_groupRowsSortMeta ? this.d_groupRowsSortMeta.field : null);\n        }\n    },\n    components: {\n        'DTPaginator': Paginator,\n        'DTTableHeader': TableHeader,\n        'DTTableBody': TableBody,\n        'DTTableFooter': TableFooter,\n    }\n}\n</script>\n\n<style>\n.p-datatable {\n    position: relative;\n}\n\n.p-datatable table {\n    border-collapse: collapse;\n    min-width: 100%;\n    table-layout: fixed;\n}\n\n.p-datatable .p-sortable-column {\n    cursor: pointer;\n    user-select: none;\n}\n\n.p-datatable .p-sortable-column .p-column-title,\n.p-datatable .p-sortable-column .p-sortable-column-icon,\n.p-datatable .p-sortable-column .p-sortable-column-badge {\n    vertical-align: middle;\n}\n\n.p-datatable .p-sortable-column .p-sortable-column-badge {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.p-datatable-responsive-scroll > .p-datatable-wrapper {\n    overflow-x: auto;\n}\n\n.p-datatable-responsive-scroll > .p-datatable-wrapper > table,\n.p-datatable-auto-layout > .p-datatable-wrapper > table {\n    table-layout: auto;\n}\n\n.p-datatable-hoverable-rows .p-selectable-row {\n    cursor: pointer;\n}\n\n/* Scrollable */\n.p-datatable-scrollable .p-datatable-wrapper {\n    position: relative;\n    overflow: auto;\n}\n\n.p-datatable-scrollable .p-datatable-thead,\n.p-datatable-scrollable .p-datatable-tbody,\n.p-datatable-scrollable .p-datatable-tfoot {\n    display: block;\n}\n\n.p-datatable-scrollable .p-datatable-thead > tr,\n.p-datatable-scrollable .p-datatable-tbody > tr,\n.p-datatable-scrollable .p-datatable-tfoot > tr {\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n}\n\n.p-datatable-scrollable .p-datatable-thead > tr > th,\n.p-datatable-scrollable .p-datatable-tbody > tr > td,\n.p-datatable-scrollable .p-datatable-tfoot > tr > td {\n    display: flex;\n    flex: 1 1 0;\n    align-items: center;\n}\n\n.p-datatable-scrollable .p-datatable-thead {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n}\n\n.p-datatable-scrollable .p-datatable-frozen-tbody {\n    position: sticky;\n    z-index: 1;\n}\n\n.p-datatable-scrollable .p-datatable-tfoot {\n    position: sticky;\n    bottom: 0;\n    z-index: 1;\n}\n\n.p-datatable-scrollable .p-frozen-column {\n    position: sticky;\n    background: inherit;\n}\n\n.p-datatable-scrollable th.p-frozen-column {\n    z-index: 1;\n}\n\n.p-datatable-scrollable-both .p-datatable-thead > tr > th,\n.p-datatable-scrollable-both .p-datatable-tbody > tr > td,\n.p-datatable-scrollable-both .p-datatable-tfoot > tr > td,\n.p-datatable-scrollable-horizontal .p-datatable-thead > tr > th\n.p-datatable-scrollable-horizontal .p-datatable-tbody > tr > td,\n.p-datatable-scrollable-horizontal .p-datatable-tfoot > tr > td {\n    flex: 0 0 auto;\n}\n\n.p-datatable-flex-scrollable {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.p-datatable-flex-scrollable .p-datatable-wrapper {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    height: 100%;\n}\n\n.p-datatable-scrollable .p-rowgroup-header {\n    position: sticky;\n    z-index: 1;\n}\n\n.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,\n.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot {\n    display: table;\n    border-collapse: collapse;\n    width: 100%;\n    table-layout: fixed;\n}\n\n.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead > tr,\n.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot > tr {\n    display: table-row;\n}\n\n.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead > tr > th,\n.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot > tr > td {\n    display: table-cell;\n}\n\n/* Resizable */\n.p-datatable-resizable > .p-datatable-wrapper {\n    overflow-x: auto;\n}\n\n.p-datatable-resizable .p-datatable-thead > tr > th,\n.p-datatable-resizable .p-datatable-tfoot > tr > td,\n.p-datatable-resizable .p-datatable-tbody > tr > td {\n    overflow: hidden;\n    white-space: nowrap;\n}\n\n.p-datatable-resizable .p-resizable-column {\n    background-clip: padding-box;\n    position: relative;\n}\n\n.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer {\n    display: none;\n}\n\n.p-datatable .p-column-resizer {\n    display: block;\n    position: absolute !important;\n    top: 0;\n    right: 0;\n    margin: 0;\n    width: .5rem;\n    height: 100%;\n    padding: 0px;\n    cursor:col-resize;\n    border: 1px solid transparent;\n}\n\n.p-datatable .p-column-header-content {\n    display: flex;\n    align-items: center;\n}\n\n.p-datatable .p-column-resizer-helper {\n    width: 1px;\n    position: absolute;\n    z-index: 10;\n    display: none;\n}\n\n.p-datatable .p-row-editor-init,\n.p-datatable .p-row-editor-save,\n.p-datatable .p-row-editor-cancel {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    position: relative;\n}\n\n/* Expand */\n.p-datatable .p-row-toggler {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    position: relative;\n}\n\n/* Reorder */\n.p-datatable-reorder-indicator-up,\n.p-datatable-reorder-indicator-down {\n    position: absolute;\n    display: none;\n}\n\n/* Loader */\n.p-datatable .p-datatable-loading-overlay {\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 2;\n}\n\n/* Filter */\n.p-column-filter-row {\n    display: flex;\n    align-items: center;\n    width: 100%;\n}\n\n.p-column-filter-menu {\n    display: inline-flex;\n    margin-left: auto;\n}\n\n.p-column-filter-row .p-column-filter-element {\n    flex: 1 1 auto;\n    width: 1%;\n}\n\n.p-column-filter-menu-button,\n.p-column-filter-clear-button {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    text-decoration: none;\n    overflow: hidden;\n    position: relative;\n}\n\n.p-column-filter-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.p-column-filter-row-items {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n}\n\n.p-column-filter-row-item {\n    cursor: pointer;\n}\n\n.p-column-filter-add-button,\n.p-column-filter-remove-button {\n    justify-content: center;\n}\n\n.p-column-filter-add-button .p-button-label,\n.p-column-filter-remove-button .p-button-label {\n    flex-grow: 0;\n}\n\n.p-column-filter-buttonbar {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.p-column-filter-buttonbar .p-button:not(.p-button-icon-only) {\n    width: auto;\n}\n\n/* Responsive */\n.p-datatable .p-datatable-tbody > tr > td > .p-column-title {\n    display: none;\n}\n</style>\n"],"sourceRoot":""}]}