{"remainingRequest":"/Users/crocslut/Desktop/Git/primevue/node_modules/babel-loader/lib/index.js!/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/crocslut/Desktop/Git/primevue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/crocslut/Desktop/Git/primevue/src/components/inputnumber/InputNumber.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/crocslut/Desktop/Git/primevue/src/components/inputnumber/InputNumber.vue","mtime":1634633311580},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js","mtime":1634631121968},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/babel-loader/lib/index.js","mtime":1634631121902},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/cache-loader/dist/cjs.js","mtime":1634631121968},{"path":"/Users/crocslut/Desktop/Git/primevue/node_modules/vue-loader-v16/dist/index.js","mtime":1634631132147}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Nyb2NzbHV0L0Rlc2t0b3AvR2l0L3ByaW1ldnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvY3JvY3NsdXQvRGVza3RvcC9HaXQvcHJpbWV2dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBlYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgSW5wdXRUZXh0IGZyb20gJ3ByaW1ldnVlL2lucHV0dGV4dCc7CmltcG9ydCBCdXR0b24gZnJvbSAncHJpbWV2dWUvYnV0dG9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdJbnB1dE51bWJlcicsCiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBlbWl0czogWyd1cGRhdGU6bW9kZWxWYWx1ZScsICdpbnB1dCddLAogIHByb3BzOiB7CiAgICBtb2RlbFZhbHVlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGZvcm1hdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgc2hvd0J1dHRvbnM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBidXR0b25MYXlvdXQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnc3RhY2tlZCcKICAgIH0sCiAgICBpbmNyZW1lbnRCdXR0b25DbGFzczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkZWNyZW1lbnRCdXR0b25DbGFzczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBpbmNyZW1lbnRCdXR0b25JY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3BpIHBpLWFuZ2xlLXVwJwogICAgfSwKICAgIGRlY3JlbWVudEJ1dHRvbkljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncGkgcGktYW5nbGUtZG93bicKICAgIH0sCiAgICBsb2NhbGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBsb2NhbGVNYXRjaGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdkZWNpbWFsJwogICAgfSwKICAgIHByZWZpeDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzdWZmaXg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgY3VycmVuY3k6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBjdXJyZW5jeURpc3BsYXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICB1c2VHcm91cGluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgbWluRnJhY3Rpb25EaWdpdHM6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICBtYXhGcmFjdGlvbkRpZ2l0czogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIG1pbjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBtYXg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgc3RlcDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBhbGxvd0VtcHR5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzdHlsZTogbnVsbCwKICAgIGNsYXNzOiBudWxsLAogICAgaW5wdXRTdHlsZTogbnVsbCwKICAgIGlucHV0Q2xhc3M6IG51bGwKICB9LAogIG51bWJlckZvcm1hdDogbnVsbCwKICBfbnVtZXJhbDogbnVsbCwKICBfZGVjaW1hbDogbnVsbCwKICBfZ3JvdXA6IG51bGwsCiAgX21pbnVzU2lnbjogbnVsbCwKICBfY3VycmVuY3k6IG51bGwsCiAgX3N1ZmZpeDogbnVsbCwKICBfcHJlZml4OiBudWxsLAogIF9pbmRleDogbnVsbCwKICBncm91cENoYXI6ICcnLAogIGlzU3BlY2lhbENoYXI6IG51bGwsCiAgcHJlZml4Q2hhcjogbnVsbCwKICBzdWZmaXhDaGFyOiBudWxsLAogIHRpbWVyOiBudWxsLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb2N1c2VkOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBsb2NhbGU6IGZ1bmN0aW9uIGxvY2FsZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy51cGRhdGVDb25zdHJ1Y3RQYXJzZXIobmV3VmFsdWUsIG9sZFZhbHVlKTsKICAgIH0sCiAgICBsb2NhbGVNYXRjaGVyOiBmdW5jdGlvbiBsb2NhbGVNYXRjaGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIG1vZGU6IGZ1bmN0aW9uIG1vZGUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIGN1cnJlbmN5RGlzcGxheTogZnVuY3Rpb24gY3VycmVuY3lEaXNwbGF5KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIHVzZUdyb3VwaW5nOiBmdW5jdGlvbiB1c2VHcm91cGluZyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy51cGRhdGVDb25zdHJ1Y3RQYXJzZXIobmV3VmFsdWUsIG9sZFZhbHVlKTsKICAgIH0sCiAgICBtaW5GcmFjdGlvbkRpZ2l0czogZnVuY3Rpb24gbWluRnJhY3Rpb25EaWdpdHMobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHRoaXMudXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICB9LAogICAgbWF4RnJhY3Rpb25EaWdpdHM6IGZ1bmN0aW9uIG1heEZyYWN0aW9uRGlnaXRzKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIHN1ZmZpeDogZnVuY3Rpb24gc3VmZml4KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfSwKICAgIHByZWZpeDogZnVuY3Rpb24gcHJlZml4KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB0aGlzLnVwZGF0ZUNvbnN0cnVjdFBhcnNlcihuZXdWYWx1ZSwgb2xkVmFsdWUpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY29uc3RydWN0UGFyc2VyKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRPcHRpb25zOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkgewogICAgICByZXR1cm4gewogICAgICAgIGxvY2FsZU1hdGNoZXI6IHRoaXMubG9jYWxlTWF0Y2hlciwKICAgICAgICBzdHlsZTogdGhpcy5tb2RlLAogICAgICAgIGN1cnJlbmN5OiB0aGlzLmN1cnJlbmN5LAogICAgICAgIGN1cnJlbmN5RGlzcGxheTogdGhpcy5jdXJyZW5jeURpc3BsYXksCiAgICAgICAgdXNlR3JvdXBpbmc6IHRoaXMudXNlR3JvdXBpbmcsCiAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiB0aGlzLm1pbkZyYWN0aW9uRGlnaXRzLAogICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogdGhpcy5tYXhGcmFjdGlvbkRpZ2l0cwogICAgICB9OwogICAgfSwKICAgIGNvbnN0cnVjdFBhcnNlcjogZnVuY3Rpb24gY29uc3RydWN0UGFyc2VyKCkgewogICAgICB0aGlzLm51bWJlckZvcm1hdCA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgdGhpcy5nZXRPcHRpb25zKCkpOwoKICAgICAgdmFyIG51bWVyYWxzID0gX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgewogICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZQogICAgICB9KS5mb3JtYXQoOTg3NjU0MzIxMCkpLnJldmVyc2UoKTsKCiAgICAgIHZhciBpbmRleCA9IG5ldyBNYXAobnVtZXJhbHMubWFwKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgcmV0dXJuIFtkLCBpXTsKICAgICAgfSkpOwogICAgICB0aGlzLl9udW1lcmFsID0gbmV3IFJlZ0V4cCgiWyIuY29uY2F0KG51bWVyYWxzLmpvaW4oJycpLCAiXSIpLCAnZycpOwogICAgICB0aGlzLl9ncm91cCA9IHRoaXMuZ2V0R3JvdXBpbmdFeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuX21pbnVzU2lnbiA9IHRoaXMuZ2V0TWludXNTaWduRXhwcmVzc2lvbigpOwogICAgICB0aGlzLl9jdXJyZW5jeSA9IHRoaXMuZ2V0Q3VycmVuY3lFeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuX2RlY2ltYWwgPSB0aGlzLmdldERlY2ltYWxFeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuX3N1ZmZpeCA9IHRoaXMuZ2V0U3VmZml4RXhwcmVzc2lvbigpOwogICAgICB0aGlzLl9wcmVmaXggPSB0aGlzLmdldFByZWZpeEV4cHJlc3Npb24oKTsKCiAgICAgIHRoaXMuX2luZGV4ID0gZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gaW5kZXguZ2V0KGQpOwogICAgICB9OwogICAgfSwKICAgIHVwZGF0ZUNvbnN0cnVjdFBhcnNlcjogZnVuY3Rpb24gdXBkYXRlQ29uc3RydWN0UGFyc2VyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgICAgdGhpcy5jb25zdHJ1Y3RQYXJzZXIoKTsKICAgICAgfQogICAgfSwKICAgIGVzY2FwZVJlZ0V4cDogZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHRleHQpIHsKICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywgJ1xcJCYnKTsKICAgIH0sCiAgICBnZXREZWNpbWFsRXhwcmVzc2lvbjogZnVuY3Rpb24gZ2V0RGVjaW1hbEV4cHJlc3Npb24oKSB7CiAgICAgIHZhciBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5nZXRPcHRpb25zKCkpLCB7fSwgewogICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZQogICAgICB9KSk7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKCJbIi5jb25jYXQoZm9ybWF0dGVyLmZvcm1hdCgxLjEpLnJlcGxhY2UodGhpcy5fY3VycmVuY3ksICcnKS50cmltKCkucmVwbGFjZSh0aGlzLl9udW1lcmFsLCAnJyksICJdIiksICdnJyk7CiAgICB9LAogICAgZ2V0R3JvdXBpbmdFeHByZXNzaW9uOiBmdW5jdGlvbiBnZXRHcm91cGluZ0V4cHJlc3Npb24oKSB7CiAgICAgIHZhciBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUsIHsKICAgICAgICB1c2VHcm91cGluZzogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5ncm91cENoYXIgPSBmb3JtYXR0ZXIuZm9ybWF0KDEwMDAwMDApLnRyaW0oKS5yZXBsYWNlKHRoaXMuX251bWVyYWwsICcnKS5jaGFyQXQoMCk7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKCJbIi5jb25jYXQodGhpcy5ncm91cENoYXIsICJdIiksICdnJyk7CiAgICB9LAogICAgZ2V0TWludXNTaWduRXhwcmVzc2lvbjogZnVuY3Rpb24gZ2V0TWludXNTaWduRXhwcmVzc2lvbigpIHsKICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgewogICAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZQogICAgICB9KTsKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoIlsiLmNvbmNhdChmb3JtYXR0ZXIuZm9ybWF0KC0xKS50cmltKCkucmVwbGFjZSh0aGlzLl9udW1lcmFsLCAnJyksICJdIiksICdnJyk7CiAgICB9LAogICAgZ2V0Q3VycmVuY3lFeHByZXNzaW9uOiBmdW5jdGlvbiBnZXRDdXJyZW5jeUV4cHJlc3Npb24oKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbmN5KSB7CiAgICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgewogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICBjdXJyZW5jeTogdGhpcy5jdXJyZW5jeSwKICAgICAgICAgIGN1cnJlbmN5RGlzcGxheTogdGhpcy5jdXJyZW5jeURpc3BsYXksCiAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDAsCiAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiWyIuY29uY2F0KGZvcm1hdHRlci5mb3JtYXQoMSkucmVwbGFjZSgvXHMvZywgJycpLnJlcGxhY2UodGhpcy5fbnVtZXJhbCwgJycpLnJlcGxhY2UodGhpcy5fZ3JvdXAsICcnKSwgIl0iKSwgJ2cnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoIltdIiwgJ2cnKTsKICAgIH0sCiAgICBnZXRQcmVmaXhFeHByZXNzaW9uOiBmdW5jdGlvbiBnZXRQcmVmaXhFeHByZXNzaW9uKCkgewogICAgICBpZiAodGhpcy5wcmVmaXgpIHsKICAgICAgICB0aGlzLnByZWZpeENoYXIgPSB0aGlzLnByZWZpeDsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlLCB7CiAgICAgICAgICBzdHlsZTogdGhpcy5tb2RlLAogICAgICAgICAgY3VycmVuY3k6IHRoaXMuY3VycmVuY3ksCiAgICAgICAgICBjdXJyZW5jeURpc3BsYXk6IHRoaXMuY3VycmVuY3lEaXNwbGF5CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wcmVmaXhDaGFyID0gZm9ybWF0dGVyLmZvcm1hdCgxKS5zcGxpdCgnMScpWzBdOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiIi5jb25jYXQodGhpcy5lc2NhcGVSZWdFeHAodGhpcy5wcmVmaXhDaGFyIHx8ICcnKSksICdnJyk7CiAgICB9LAogICAgZ2V0U3VmZml4RXhwcmVzc2lvbjogZnVuY3Rpb24gZ2V0U3VmZml4RXhwcmVzc2lvbigpIHsKICAgICAgaWYgKHRoaXMuc3VmZml4KSB7CiAgICAgICAgdGhpcy5zdWZmaXhDaGFyID0gdGhpcy5zdWZmaXg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZSwgewogICAgICAgICAgc3R5bGU6IHRoaXMubW9kZSwKICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLmN1cnJlbmN5LAogICAgICAgICAgY3VycmVuY3lEaXNwbGF5OiB0aGlzLmN1cnJlbmN5RGlzcGxheSwKICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMCwKICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3VmZml4Q2hhciA9IGZvcm1hdHRlci5mb3JtYXQoMSkuc3BsaXQoJzEnKVsxXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoIiIuY29uY2F0KHRoaXMuZXNjYXBlUmVnRXhwKHRoaXMuc3VmZml4Q2hhciB8fCAnJykpLCAnZycpOwogICAgfSwKICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGlmICh2YWx1ZSA9PT0gJy0nKSB7CiAgICAgICAgICAvLyBNaW51cyBzaWduCiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5mb3JtYXQpIHsKICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUsIHRoaXMuZ2V0T3B0aW9ucygpKTsKICAgICAgICAgIHZhciBmb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlci5mb3JtYXQodmFsdWUpOwoKICAgICAgICAgIGlmICh0aGlzLnByZWZpeCkgewogICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHRoaXMucHJlZml4ICsgZm9ybWF0dGVkVmFsdWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuc3VmZml4KSB7CiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUgKyB0aGlzLnN1ZmZpeDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHBhcnNlVmFsdWU6IGZ1bmN0aW9uIHBhcnNlVmFsdWUodGV4dCkgewogICAgICB2YXIgZmlsdGVyZWRUZXh0ID0gdGV4dC5yZXBsYWNlKHRoaXMuX3N1ZmZpeCwgJycpLnJlcGxhY2UodGhpcy5fcHJlZml4LCAnJykudHJpbSgpLnJlcGxhY2UoL1xzL2csICcnKS5yZXBsYWNlKHRoaXMuX2N1cnJlbmN5LCAnJykucmVwbGFjZSh0aGlzLl9ncm91cCwgJycpLnJlcGxhY2UodGhpcy5fbWludXNTaWduLCAnLScpLnJlcGxhY2UodGhpcy5fZGVjaW1hbCwgJy4nKS5yZXBsYWNlKHRoaXMuX251bWVyYWwsIHRoaXMuX2luZGV4KTsKCiAgICAgIGlmIChmaWx0ZXJlZFRleHQpIHsKICAgICAgICBpZiAoZmlsdGVyZWRUZXh0ID09PSAnLScpIC8vIE1pbnVzIHNpZ24KICAgICAgICAgIHJldHVybiBmaWx0ZXJlZFRleHQ7CiAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gK2ZpbHRlcmVkVGV4dDsKICAgICAgICByZXR1cm4gaXNOYU4ocGFyc2VkVmFsdWUpID8gbnVsbCA6IHBhcnNlZFZhbHVlOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICByZXBlYXQ6IGZ1bmN0aW9uIHJlcGVhdChldmVudCwgaW50ZXJ2YWwsIGRpcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGkgPSBpbnRlcnZhbCB8fCA1MDA7CiAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucmVwZWF0KGV2ZW50LCA0MCwgZGlyKTsKICAgICAgfSwgaSk7CiAgICAgIHRoaXMuc3BpbihldmVudCwgZGlyKTsKICAgIH0sCiAgICBzcGluOiBmdW5jdGlvbiBzcGluKGV2ZW50LCBkaXIpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuaW5wdXQpIHsKICAgICAgICB2YXIgc3RlcCA9IHRoaXMuc3RlcCAqIGRpcjsKICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5wYXJzZVZhbHVlKHRoaXMuJHJlZnMuaW5wdXQuJGVsLnZhbHVlKSB8fCAwOwogICAgICAgIHZhciBuZXdWYWx1ZSA9IHRoaXMudmFsaWRhdGVWYWx1ZShjdXJyZW50VmFsdWUgKyBzdGVwKTsKICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KG5ld1ZhbHVlLCBudWxsLCAnc3BpbicpOwogICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZXZlbnQsIG5ld1ZhbHVlKTsKICAgICAgICB0aGlzLmhhbmRsZU9uSW5wdXQoZXZlbnQsIGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpOwogICAgICB9CiAgICB9LAogICAgb25VcEJ1dHRvbk1vdXNlRG93bjogZnVuY3Rpb24gb25VcEJ1dHRvbk1vdXNlRG93bihldmVudCkgewogICAgICBpZiAoIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuZm9jdXMoKTsKICAgICAgICB0aGlzLnJlcGVhdChldmVudCwgbnVsbCwgMSk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSwKICAgIG9uVXBCdXR0b25Nb3VzZVVwOiBmdW5jdGlvbiBvblVwQnV0dG9uTW91c2VVcCgpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB9CiAgICB9LAogICAgb25VcEJ1dHRvbk1vdXNlTGVhdmU6IGZ1bmN0aW9uIG9uVXBCdXR0b25Nb3VzZUxlYXZlKCkgewogICAgICBpZiAoIXRoaXMuJGF0dHJzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy5jbGVhclRpbWVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBvblVwQnV0dG9uS2V5VXA6IGZ1bmN0aW9uIG9uVXBCdXR0b25LZXlVcCgpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB9CiAgICB9LAogICAgb25VcEJ1dHRvbktleURvd246IGZ1bmN0aW9uIG9uVXBCdXR0b25LZXlEb3duKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzMiB8fCBldmVudC5rZXlDb2RlID09PSAxMykgewogICAgICAgIHRoaXMucmVwZWF0KGV2ZW50LCBudWxsLCAxKTsKICAgICAgfQogICAgfSwKICAgIG9uRG93bkJ1dHRvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Eb3duQnV0dG9uTW91c2VEb3duKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy4kYXR0cnMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5mb2N1cygpOwogICAgICAgIHRoaXMucmVwZWF0KGV2ZW50LCBudWxsLCAtMSk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSwKICAgIG9uRG93bkJ1dHRvbk1vdXNlVXA6IGZ1bmN0aW9uIG9uRG93bkJ1dHRvbk1vdXNlVXAoKSB7CiAgICAgIGlmICghdGhpcy4kYXR0cnMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLmNsZWFyVGltZXIoKTsKICAgICAgfQogICAgfSwKICAgIG9uRG93bkJ1dHRvbk1vdXNlTGVhdmU6IGZ1bmN0aW9uIG9uRG93bkJ1dHRvbk1vdXNlTGVhdmUoKSB7CiAgICAgIGlmICghdGhpcy4kYXR0cnMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLmNsZWFyVGltZXIoKTsKICAgICAgfQogICAgfSwKICAgIG9uRG93bkJ1dHRvbktleVVwOiBmdW5jdGlvbiBvbkRvd25CdXR0b25LZXlVcCgpIHsKICAgICAgaWYgKCF0aGlzLiRhdHRycy5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuY2xlYXJUaW1lcigpOwogICAgICB9CiAgICB9LAogICAgb25Eb3duQnV0dG9uS2V5RG93bjogZnVuY3Rpb24gb25Eb3duQnV0dG9uS2V5RG93bihldmVudCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzIgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnJlcGVhdChldmVudCwgbnVsbCwgLTEpOwogICAgICB9CiAgICB9LAogICAgb25Vc2VySW5wdXQ6IGZ1bmN0aW9uIG9uVXNlcklucHV0KCkgewogICAgICBpZiAodGhpcy5pc1NwZWNpYWxDaGFyKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWUgPSB0aGlzLmxhc3RWYWx1ZTsKICAgICAgfQoKICAgICAgdGhpcy5pc1NwZWNpYWxDaGFyID0gZmFsc2U7CiAgICB9LAogICAgb25JbnB1dEtleURvd246IGZ1bmN0aW9uIG9uSW5wdXRLZXlEb3duKGV2ZW50KSB7CiAgICAgIHRoaXMubGFzdFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlOwoKICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSkgewogICAgICAgIHRoaXMuaXNTcGVjaWFsQ2hhciA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSBldmVudC50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7CiAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSBldmVudC50YXJnZXQuc2VsZWN0aW9uRW5kOwogICAgICB2YXIgaW5wdXRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgdmFyIG5ld1ZhbHVlU3RyID0gbnVsbDsKCiAgICAgIGlmIChldmVudC5hbHRLZXkpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CgogICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7CiAgICAgICAgLy91cAogICAgICAgIGNhc2UgMzg6CiAgICAgICAgICB0aGlzLnNwaW4oZXZlbnQsIDEpOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIC8vZG93bgoKICAgICAgICBjYXNlIDQwOgogICAgICAgICAgdGhpcy5zcGluKGV2ZW50LCAtMSk7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy9sZWZ0CgogICAgICAgIGNhc2UgMzc6CiAgICAgICAgICBpZiAoIXRoaXMuaXNOdW1lcmFsQ2hhcihpbnB1dFZhbHVlLmNoYXJBdChzZWxlY3Rpb25TdGFydCAtIDEpKSkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIC8vcmlnaHQKCiAgICAgICAgY2FzZSAzOToKICAgICAgICAgIGlmICghdGhpcy5pc051bWVyYWxDaGFyKGlucHV0VmFsdWUuY2hhckF0KHNlbGVjdGlvblN0YXJ0KSkpIHsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKICAgICAgICAvL2VudGVyCgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMudmFsaWRhdGVWYWx1ZSh0aGlzLnBhcnNlVmFsdWUoaW5wdXRWYWx1ZSkpOwogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWUgPSB0aGlzLmZvcm1hdFZhbHVlKG5ld1ZhbHVlU3RyKTsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIG5ld1ZhbHVlU3RyKTsKICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoZXZlbnQsIG5ld1ZhbHVlU3RyKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIC8vYmFja3NwYWNlCgogICAgICAgIGNhc2UgODoKICAgICAgICAgIHsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uRW5kKSB7CiAgICAgICAgICAgICAgdmFyIGRlbGV0ZUNoYXIgPSBpbnB1dFZhbHVlLmNoYXJBdChzZWxlY3Rpb25TdGFydCAtIDEpOwoKICAgICAgICAgICAgICB2YXIgX3RoaXMkZ2V0RGVjaW1hbENoYXJJID0gdGhpcy5nZXREZWNpbWFsQ2hhckluZGV4ZXMoaW5wdXRWYWx1ZSksCiAgICAgICAgICAgICAgICAgIGRlY2ltYWxDaGFySW5kZXggPSBfdGhpcyRnZXREZWNpbWFsQ2hhckkuZGVjaW1hbENoYXJJbmRleCwKICAgICAgICAgICAgICAgICAgZGVjaW1hbENoYXJJbmRleFdpdGhvdXRQcmVmaXggPSBfdGhpcyRnZXREZWNpbWFsQ2hhckkuZGVjaW1hbENoYXJJbmRleFdpdGhvdXRQcmVmaXg7CgogICAgICAgICAgICAgIGlmICh0aGlzLmlzTnVtZXJhbENoYXIoZGVsZXRlQ2hhcikpIHsKICAgICAgICAgICAgICAgIHZhciBkZWNpbWFsTGVuZ3RoID0gdGhpcy5nZXREZWNpbWFsTGVuZ3RoKGlucHV0VmFsdWUpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9ncm91cC50ZXN0KGRlbGV0ZUNoYXIpKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuX2dyb3VwLmxhc3RJbmRleCA9IDA7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCAtIDIpICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCAtIDEpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9kZWNpbWFsLnRlc3QoZGVsZXRlQ2hhcikpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwoKICAgICAgICAgICAgICAgICAgaWYgKGRlY2ltYWxMZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCAtIDEsIHNlbGVjdGlvblN0YXJ0IC0gMSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0IC0gMSkgKyBpbnB1dFZhbHVlLnNsaWNlKHNlbGVjdGlvblN0YXJ0KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZWNpbWFsQ2hhckluZGV4ID4gMCAmJiBzZWxlY3Rpb25TdGFydCA+IGRlY2ltYWxDaGFySW5kZXgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGluc2VydGVkVGV4dCA9IHRoaXMuaXNEZWNpbWFsTW9kZSgpICYmICh0aGlzLm1pbkZyYWN0aW9uRGlnaXRzIHx8IDApIDwgZGVjaW1hbExlbmd0aCA/ICcnIDogJzAnOwogICAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQgLSAxKSArIGluc2VydGVkVGV4dCArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeCA9PT0gMSkgewogICAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQgLSAxKSArICcwJyArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQpOwogICAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMucGFyc2VWYWx1ZShuZXdWYWx1ZVN0cikgPiAwID8gbmV3VmFsdWVTdHIgOiAnJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gaW5wdXRWYWx1ZS5zbGljZSgwLCBzZWxlY3Rpb25TdGFydCAtIDEpICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGV2ZW50LCBuZXdWYWx1ZVN0ciwgbnVsbCwgJ2RlbGV0ZS1zaW5nbGUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMuZGVsZXRlUmFuZ2UoaW5wdXRWYWx1ZSwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIG51bGwsICdkZWxldGUtcmFuZ2UnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgLy8gZGVsCgogICAgICAgIGNhc2UgNDY6CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uRW5kKSB7CiAgICAgICAgICAgIHZhciBfZGVsZXRlQ2hhciA9IGlucHV0VmFsdWUuY2hhckF0KHNlbGVjdGlvblN0YXJ0KTsKCiAgICAgICAgICAgIHZhciBfdGhpcyRnZXREZWNpbWFsQ2hhckkyID0gdGhpcy5nZXREZWNpbWFsQ2hhckluZGV4ZXMoaW5wdXRWYWx1ZSksCiAgICAgICAgICAgICAgICBfZGVjaW1hbENoYXJJbmRleCA9IF90aGlzJGdldERlY2ltYWxDaGFySTIuZGVjaW1hbENoYXJJbmRleCwKICAgICAgICAgICAgICAgIF9kZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeCA9IF90aGlzJGdldERlY2ltYWxDaGFySTIuZGVjaW1hbENoYXJJbmRleFdpdGhvdXRQcmVmaXg7CgogICAgICAgICAgICBpZiAodGhpcy5pc051bWVyYWxDaGFyKF9kZWxldGVDaGFyKSkgewogICAgICAgICAgICAgIHZhciBfZGVjaW1hbExlbmd0aCA9IHRoaXMuZ2V0RGVjaW1hbExlbmd0aChpbnB1dFZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuX2dyb3VwLnRlc3QoX2RlbGV0ZUNoYXIpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9ncm91cC5sYXN0SW5kZXggPSAwOwogICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KSArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQgKyAyKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2RlY2ltYWwudGVzdChfZGVsZXRlQ2hhcikpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2RlY2ltYWwubGFzdEluZGV4ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoX2RlY2ltYWxMZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQgKyAxLCBzZWxlY3Rpb25TdGFydCArIDEpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KSArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQgKyAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9kZWNpbWFsQ2hhckluZGV4ID4gMCAmJiBzZWxlY3Rpb25TdGFydCA+IF9kZWNpbWFsQ2hhckluZGV4KSB7CiAgICAgICAgICAgICAgICB2YXIgX2luc2VydGVkVGV4dCA9IHRoaXMuaXNEZWNpbWFsTW9kZSgpICYmICh0aGlzLm1pbkZyYWN0aW9uRGlnaXRzIHx8IDApIDwgX2RlY2ltYWxMZW5ndGggPyAnJyA6ICcwJzsKCiAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgX2luc2VydGVkVGV4dCArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQgKyAxKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9kZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeCA9PT0gMSkgewogICAgICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KSArICcwJyArIGlucHV0VmFsdWUuc2xpY2Uoc2VsZWN0aW9uU3RhcnQgKyAxKTsKICAgICAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5wYXJzZVZhbHVlKG5ld1ZhbHVlU3RyKSA+IDAgPyBuZXdWYWx1ZVN0ciA6ICcnOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWUuc2xpY2UoMCwgc2VsZWN0aW9uU3RhcnQpICsgaW5wdXRWYWx1ZS5zbGljZShzZWxlY3Rpb25TdGFydCArIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIG51bGwsICdkZWxldGUtYmFjay1zaW5nbGUnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld1ZhbHVlU3RyID0gdGhpcy5kZWxldGVSYW5nZShpbnB1dFZhbHVlLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShldmVudCwgbmV3VmFsdWVTdHIsIG51bGwsICdkZWxldGUtcmFuZ2UnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgb25JbnB1dEtleVByZXNzOiBmdW5jdGlvbiBvbklucHV0S2V5UHJlc3MoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGNvZGUgPSBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlOwogICAgICB2YXIgY2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7CiAgICAgIHZhciBpc0RlY2ltYWxTaWduID0gdGhpcy5pc0RlY2ltYWxTaWduKGNoYXIpOwogICAgICB2YXIgaXNNaW51c1NpZ24gPSB0aGlzLmlzTWludXNTaWduKGNoYXIpOwoKICAgICAgaWYgKDQ4IDw9IGNvZGUgJiYgY29kZSA8PSA1NyB8fCBpc01pbnVzU2lnbiB8fCBpc0RlY2ltYWxTaWduKSB7CiAgICAgICAgdGhpcy5pbnNlcnQoZXZlbnQsIGNoYXIsIHsKICAgICAgICAgIGlzRGVjaW1hbFNpZ246IGlzRGVjaW1hbFNpZ24sCiAgICAgICAgICBpc01pbnVzU2lnbjogaXNNaW51c1NpZ24KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG9uUGFzdGU6IGZ1bmN0aW9uIG9uUGFzdGUoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGRhdGEgPSAoZXZlbnQuY2xpcGJvYXJkRGF0YSB8fCB3aW5kb3dbJ2NsaXBib2FyZERhdGEnXSkuZ2V0RGF0YSgnVGV4dCcpOwoKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB2YXIgZmlsdGVyZWREYXRhID0gdGhpcy5wYXJzZVZhbHVlKGRhdGEpOwoKICAgICAgICBpZiAoZmlsdGVyZWREYXRhICE9IG51bGwpIHsKICAgICAgICAgIHRoaXMuaW5zZXJ0KGV2ZW50LCBmaWx0ZXJlZERhdGEudG9TdHJpbmcoKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWxsb3dNaW51c1NpZ246IGZ1bmN0aW9uIGFsbG93TWludXNTaWduKCkgewogICAgICByZXR1cm4gdGhpcy5taW4gPT09IG51bGwgfHwgdGhpcy5taW4gPCAwOwogICAgfSwKICAgIGlzTWludXNTaWduOiBmdW5jdGlvbiBpc01pbnVzU2lnbihjaGFyKSB7CiAgICAgIGlmICh0aGlzLl9taW51c1NpZ24udGVzdChjaGFyKSB8fCBjaGFyID09PSAnLScpIHsKICAgICAgICB0aGlzLl9taW51c1NpZ24ubGFzdEluZGV4ID0gMDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGlzRGVjaW1hbFNpZ246IGZ1bmN0aW9uIGlzRGVjaW1hbFNpZ24oY2hhcikgewogICAgICBpZiAodGhpcy5fZGVjaW1hbC50ZXN0KGNoYXIpKSB7CiAgICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaXNEZWNpbWFsTW9kZTogZnVuY3Rpb24gaXNEZWNpbWFsTW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ2RlY2ltYWwnOwogICAgfSwKICAgIGdldERlY2ltYWxDaGFySW5kZXhlczogZnVuY3Rpb24gZ2V0RGVjaW1hbENoYXJJbmRleGVzKHZhbCkgewogICAgICB2YXIgZGVjaW1hbENoYXJJbmRleCA9IHZhbC5zZWFyY2godGhpcy5fZGVjaW1hbCk7CiAgICAgIHRoaXMuX2RlY2ltYWwubGFzdEluZGV4ID0gMDsKICAgICAgdmFyIGZpbHRlcmVkVmFsID0gdmFsLnJlcGxhY2UodGhpcy5fcHJlZml4LCAnJykudHJpbSgpLnJlcGxhY2UoL1xzL2csICcnKS5yZXBsYWNlKHRoaXMuX2N1cnJlbmN5LCAnJyk7CiAgICAgIHZhciBkZWNpbWFsQ2hhckluZGV4V2l0aG91dFByZWZpeCA9IGZpbHRlcmVkVmFsLnNlYXJjaCh0aGlzLl9kZWNpbWFsKTsKICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICByZXR1cm4gewogICAgICAgIGRlY2ltYWxDaGFySW5kZXg6IGRlY2ltYWxDaGFySW5kZXgsCiAgICAgICAgZGVjaW1hbENoYXJJbmRleFdpdGhvdXRQcmVmaXg6IGRlY2ltYWxDaGFySW5kZXhXaXRob3V0UHJlZml4CiAgICAgIH07CiAgICB9LAogICAgZ2V0Q2hhckluZGV4ZXM6IGZ1bmN0aW9uIGdldENoYXJJbmRleGVzKHZhbCkgewogICAgICB2YXIgZGVjaW1hbENoYXJJbmRleCA9IHZhbC5zZWFyY2godGhpcy5fZGVjaW1hbCk7CiAgICAgIHRoaXMuX2RlY2ltYWwubGFzdEluZGV4ID0gMDsKICAgICAgdmFyIG1pbnVzQ2hhckluZGV4ID0gdmFsLnNlYXJjaCh0aGlzLl9taW51c1NpZ24pOwogICAgICB0aGlzLl9taW51c1NpZ24ubGFzdEluZGV4ID0gMDsKICAgICAgdmFyIHN1ZmZpeENoYXJJbmRleCA9IHZhbC5zZWFyY2godGhpcy5fc3VmZml4KTsKICAgICAgdGhpcy5fc3VmZml4Lmxhc3RJbmRleCA9IDA7CiAgICAgIHZhciBjdXJyZW5jeUNoYXJJbmRleCA9IHZhbC5zZWFyY2godGhpcy5fY3VycmVuY3kpOwogICAgICB0aGlzLl9jdXJyZW5jeS5sYXN0SW5kZXggPSAwOwogICAgICByZXR1cm4gewogICAgICAgIGRlY2ltYWxDaGFySW5kZXg6IGRlY2ltYWxDaGFySW5kZXgsCiAgICAgICAgbWludXNDaGFySW5kZXg6IG1pbnVzQ2hhckluZGV4LAogICAgICAgIHN1ZmZpeENoYXJJbmRleDogc3VmZml4Q2hhckluZGV4LAogICAgICAgIGN1cnJlbmN5Q2hhckluZGV4OiBjdXJyZW5jeUNoYXJJbmRleAogICAgICB9OwogICAgfSwKICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGV2ZW50LCB0ZXh0KSB7CiAgICAgIHZhciBzaWduID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7CiAgICAgICAgaXNEZWNpbWFsU2lnbjogZmFsc2UsCiAgICAgICAgaXNNaW51c1NpZ246IGZhbHNlCiAgICAgIH07CiAgICAgIHZhciBtaW51c0NoYXJJbmRleE9uVGV4dCA9IHRleHQuc2VhcmNoKHRoaXMuX21pbnVzU2lnbik7CiAgICAgIHRoaXMuX21pbnVzU2lnbi5sYXN0SW5kZXggPSAwOwoKICAgICAgaWYgKCF0aGlzLmFsbG93TWludXNTaWduKCkgJiYgbWludXNDaGFySW5kZXhPblRleHQgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25TdGFydDsKICAgICAgdmFyIHNlbGVjdGlvbkVuZCA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNlbGVjdGlvbkVuZDsKICAgICAgdmFyIGlucHV0VmFsdWUgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZS50cmltKCk7CgogICAgICB2YXIgX3RoaXMkZ2V0Q2hhckluZGV4ZXMgPSB0aGlzLmdldENoYXJJbmRleGVzKGlucHV0VmFsdWUpLAogICAgICAgICAgZGVjaW1hbENoYXJJbmRleCA9IF90aGlzJGdldENoYXJJbmRleGVzLmRlY2ltYWxDaGFySW5kZXgsCiAgICAgICAgICBtaW51c0NoYXJJbmRleCA9IF90aGlzJGdldENoYXJJbmRleGVzLm1pbnVzQ2hhckluZGV4LAogICAgICAgICAgc3VmZml4Q2hhckluZGV4ID0gX3RoaXMkZ2V0Q2hhckluZGV4ZXMuc3VmZml4Q2hhckluZGV4LAogICAgICAgICAgY3VycmVuY3lDaGFySW5kZXggPSBfdGhpcyRnZXRDaGFySW5kZXhlcy5jdXJyZW5jeUNoYXJJbmRleDsKCiAgICAgIHZhciBuZXdWYWx1ZVN0cjsKCiAgICAgIGlmIChzaWduLmlzTWludXNTaWduKSB7CiAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09PSAwKSB7CiAgICAgICAgICBuZXdWYWx1ZVN0ciA9IGlucHV0VmFsdWU7CgogICAgICAgICAgaWYgKG1pbnVzQ2hhckluZGV4ID09PSAtMSB8fCBzZWxlY3Rpb25FbmQgIT09IDApIHsKICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSB0aGlzLmluc2VydFRleHQoaW5wdXRWYWx1ZSwgdGV4dCwgMCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKGV2ZW50LCBuZXdWYWx1ZVN0ciwgdGV4dCwgJ2luc2VydCcpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzaWduLmlzRGVjaW1hbFNpZ24pIHsKICAgICAgICBpZiAoZGVjaW1hbENoYXJJbmRleCA+IDAgJiYgc2VsZWN0aW9uU3RhcnQgPT09IGRlY2ltYWxDaGFySW5kZXgpIHsKICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIGlucHV0VmFsdWUsIHRleHQsICdpbnNlcnQnKTsKICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWxDaGFySW5kZXggPiBzZWxlY3Rpb25TdGFydCAmJiBkZWNpbWFsQ2hhckluZGV4IDwgc2VsZWN0aW9uRW5kKSB7CiAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMuaW5zZXJ0VGV4dChpbnB1dFZhbHVlLCB0ZXh0LCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCB0ZXh0LCAnaW5zZXJ0Jyk7CiAgICAgICAgfSBlbHNlIGlmIChkZWNpbWFsQ2hhckluZGV4ID09PSAtMSAmJiB0aGlzLm1heEZyYWN0aW9uRGlnaXRzKSB7CiAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMuaW5zZXJ0VGV4dChpbnB1dFZhbHVlLCB0ZXh0LCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCB0ZXh0LCAnaW5zZXJ0Jyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtYXhGcmFjdGlvbkRpZ2l0cyA9IHRoaXMubnVtYmVyRm9ybWF0LnJlc29sdmVkT3B0aW9ucygpLm1heGltdW1GcmFjdGlvbkRpZ2l0czsKICAgICAgICB2YXIgb3BlcmF0aW9uID0gc2VsZWN0aW9uU3RhcnQgIT09IHNlbGVjdGlvbkVuZCA/ICdyYW5nZS1pbnNlcnQnIDogJ2luc2VydCc7CgogICAgICAgIGlmIChkZWNpbWFsQ2hhckluZGV4ID4gMCAmJiBzZWxlY3Rpb25TdGFydCA+IGRlY2ltYWxDaGFySW5kZXgpIHsKICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCArIHRleHQubGVuZ3RoIC0gKGRlY2ltYWxDaGFySW5kZXggKyAxKSA8PSBtYXhGcmFjdGlvbkRpZ2l0cykgewogICAgICAgICAgICB2YXIgY2hhckluZGV4ID0gY3VycmVuY3lDaGFySW5kZXggPj0gc2VsZWN0aW9uU3RhcnQgPyBjdXJyZW5jeUNoYXJJbmRleCAtIDEgOiBzdWZmaXhDaGFySW5kZXggPj0gc2VsZWN0aW9uU3RhcnQgPyBzdWZmaXhDaGFySW5kZXggOiBpbnB1dFZhbHVlLmxlbmd0aDsKICAgICAgICAgICAgbmV3VmFsdWVTdHIgPSBpbnB1dFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KSArIHRleHQgKyBpbnB1dFZhbHVlLnNsaWNlKHNlbGVjdGlvblN0YXJ0ICsgdGV4dC5sZW5ndGgsIGNoYXJJbmRleCkgKyBpbnB1dFZhbHVlLnNsaWNlKGNoYXJJbmRleCk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCB0ZXh0LCBvcGVyYXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXdWYWx1ZVN0ciA9IHRoaXMuaW5zZXJ0VGV4dChpbnB1dFZhbHVlLCB0ZXh0LCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoZXZlbnQsIG5ld1ZhbHVlU3RyLCB0ZXh0LCBvcGVyYXRpb24pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGluc2VydFRleHQ6IGZ1bmN0aW9uIGluc2VydFRleHQodmFsdWUsIHRleHQsIHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIHRleHRTcGxpdCA9IHRleHQgPT09ICcuJyA/IHRleHQgOiB0ZXh0LnNwbGl0KCcuJyk7CgogICAgICBpZiAodGV4dFNwbGl0Lmxlbmd0aCA9PT0gMikgewogICAgICAgIHZhciBkZWNpbWFsQ2hhckluZGV4ID0gdmFsdWUuc2xpY2Uoc3RhcnQsIGVuZCkuc2VhcmNoKHRoaXMuX2RlY2ltYWwpOwogICAgICAgIHRoaXMuX2RlY2ltYWwubGFzdEluZGV4ID0gMDsKICAgICAgICByZXR1cm4gZGVjaW1hbENoYXJJbmRleCA+IDAgPyB2YWx1ZS5zbGljZSgwLCBzdGFydCkgKyB0aGlzLmZvcm1hdFZhbHVlKHRleHQpICsgdmFsdWUuc2xpY2UoZW5kKSA6IHZhbHVlIHx8IHRoaXMuZm9ybWF0VmFsdWUodGV4dCk7CiAgICAgIH0gZWxzZSBpZiAoZW5kIC0gc3RhcnQgPT09IHZhbHVlLmxlbmd0aCkgewogICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFZhbHVlKHRleHQpOwogICAgICB9IGVsc2UgaWYgKHN0YXJ0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRleHQgKyB2YWx1ZS5zbGljZShlbmQpOwogICAgICB9IGVsc2UgaWYgKGVuZCA9PT0gdmFsdWUubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIHN0YXJ0KSArIHRleHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIHN0YXJ0KSArIHRleHQgKyB2YWx1ZS5zbGljZShlbmQpOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlUmFuZ2U6IGZ1bmN0aW9uIGRlbGV0ZVJhbmdlKHZhbHVlLCBzdGFydCwgZW5kKSB7CiAgICAgIHZhciBuZXdWYWx1ZVN0cjsKICAgICAgaWYgKGVuZCAtIHN0YXJ0ID09PSB2YWx1ZS5sZW5ndGgpIG5ld1ZhbHVlU3RyID0gJyc7ZWxzZSBpZiAoc3RhcnQgPT09IDApIG5ld1ZhbHVlU3RyID0gdmFsdWUuc2xpY2UoZW5kKTtlbHNlIGlmIChlbmQgPT09IHZhbHVlLmxlbmd0aCkgbmV3VmFsdWVTdHIgPSB2YWx1ZS5zbGljZSgwLCBzdGFydCk7ZWxzZSBuZXdWYWx1ZVN0ciA9IHZhbHVlLnNsaWNlKDAsIHN0YXJ0KSArIHZhbHVlLnNsaWNlKGVuZCk7CiAgICAgIHJldHVybiBuZXdWYWx1ZVN0cjsKICAgIH0sCiAgICBpbml0Q3Vyc29yOiBmdW5jdGlvbiBpbml0Q3Vyc29yKCkgewogICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25TdGFydDsKICAgICAgdmFyIGlucHV0VmFsdWUgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC52YWx1ZTsKICAgICAgdmFyIHZhbHVlTGVuZ3RoID0gaW5wdXRWYWx1ZS5sZW5ndGg7CiAgICAgIHZhciBpbmRleCA9IG51bGw7IC8vIHJlbW92ZSBwcmVmaXgKCiAgICAgIHZhciBwcmVmaXhMZW5ndGggPSAodGhpcy5wcmVmaXhDaGFyIHx8ICcnKS5sZW5ndGg7CiAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnJlcGxhY2UodGhpcy5fcHJlZml4LCAnJyk7CiAgICAgIHNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uU3RhcnQgLSBwcmVmaXhMZW5ndGg7CiAgICAgIHZhciBjaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoc2VsZWN0aW9uU3RhcnQpOwoKICAgICAgaWYgKHRoaXMuaXNOdW1lcmFsQ2hhcihjaGFyKSkgewogICAgICAgIHJldHVybiBzZWxlY3Rpb25TdGFydCArIHByZWZpeExlbmd0aDsKICAgICAgfSAvL2xlZnQKCgogICAgICB2YXIgaSA9IHNlbGVjdGlvblN0YXJ0IC0gMTsKCiAgICAgIHdoaWxlIChpID49IDApIHsKICAgICAgICBjaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoaSk7CgogICAgICAgIGlmICh0aGlzLmlzTnVtZXJhbENoYXIoY2hhcikpIHsKICAgICAgICAgIGluZGV4ID0gaSArIHByZWZpeExlbmd0aDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpLS07CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoaW5kZXggIT09IG51bGwpIHsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShpbmRleCArIDEsIGluZGV4ICsgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaSA9IHNlbGVjdGlvblN0YXJ0OwoKICAgICAgICB3aGlsZSAoaSA8IHZhbHVlTGVuZ3RoKSB7CiAgICAgICAgICBjaGFyID0gaW5wdXRWYWx1ZS5jaGFyQXQoaSk7CgogICAgICAgICAgaWYgKHRoaXMuaXNOdW1lcmFsQ2hhcihjaGFyKSkgewogICAgICAgICAgICBpbmRleCA9IGkgKyBwcmVmaXhMZW5ndGg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGluZGV4ICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShpbmRleCwgaW5kZXgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGluZGV4IHx8IDA7CiAgICB9LAogICAgb25JbnB1dENsaWNrOiBmdW5jdGlvbiBvbklucHV0Q2xpY2soKSB7CiAgICAgIHRoaXMuaW5pdEN1cnNvcigpOwogICAgfSwKICAgIGlzTnVtZXJhbENoYXI6IGZ1bmN0aW9uIGlzTnVtZXJhbENoYXIoY2hhcikgewogICAgICBpZiAoY2hhci5sZW5ndGggPT09IDEgJiYgKHRoaXMuX251bWVyYWwudGVzdChjaGFyKSB8fCB0aGlzLl9kZWNpbWFsLnRlc3QoY2hhcikgfHwgdGhpcy5fZ3JvdXAudGVzdChjaGFyKSB8fCB0aGlzLl9taW51c1NpZ24udGVzdChjaGFyKSkpIHsKICAgICAgICB0aGlzLnJlc2V0UmVnZXgoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHJlc2V0UmVnZXg6IGZ1bmN0aW9uIHJlc2V0UmVnZXgoKSB7CiAgICAgIHRoaXMuX251bWVyYWwubGFzdEluZGV4ID0gMDsKICAgICAgdGhpcy5fZGVjaW1hbC5sYXN0SW5kZXggPSAwOwogICAgICB0aGlzLl9ncm91cC5sYXN0SW5kZXggPSAwOwogICAgICB0aGlzLl9taW51c1NpZ24ubGFzdEluZGV4ID0gMDsKICAgIH0sCiAgICB1cGRhdGVWYWx1ZTogZnVuY3Rpb24gdXBkYXRlVmFsdWUoZXZlbnQsIHZhbHVlU3RyLCBpbnNlcnRlZFZhbHVlU3RyLCBvcGVyYXRpb24pIHsKICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnZhbHVlOwogICAgICB2YXIgbmV3VmFsdWUgPSBudWxsOwoKICAgICAgaWYgKHZhbHVlU3RyICE9IG51bGwpIHsKICAgICAgICBuZXdWYWx1ZSA9IHRoaXMucGFyc2VWYWx1ZSh2YWx1ZVN0cik7CiAgICAgICAgbmV3VmFsdWUgPSAhbmV3VmFsdWUgJiYgIXRoaXMuYWxsb3dFbXB0eSA/IDAgOiBuZXdWYWx1ZTsKICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KG5ld1ZhbHVlLCBpbnNlcnRlZFZhbHVlU3RyLCBvcGVyYXRpb24sIHZhbHVlU3RyKTsKICAgICAgICB0aGlzLmhhbmRsZU9uSW5wdXQoZXZlbnQsIGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlT25JbnB1dDogZnVuY3Rpb24gaGFuZGxlT25JbnB1dChldmVudCwgY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgewogICAgICBpZiAodGhpcy5pc1ZhbHVlQ2hhbmdlZChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgewogICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsCiAgICAgICAgICB2YWx1ZTogbmV3VmFsdWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGlzVmFsdWVDaGFuZ2VkOiBmdW5jdGlvbiBpc1ZhbHVlQ2hhbmdlZChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7CiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gbnVsbCAmJiBjdXJyZW50VmFsdWUgIT09IG51bGwpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKG5ld1ZhbHVlICE9IG51bGwpIHsKICAgICAgICB2YXIgcGFyc2VkQ3VycmVudFZhbHVlID0gdHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ3N0cmluZycgPyB0aGlzLnBhcnNlVmFsdWUoY3VycmVudFZhbHVlKSA6IGN1cnJlbnRWYWx1ZTsKICAgICAgICByZXR1cm4gbmV3VmFsdWUgIT09IHBhcnNlZEN1cnJlbnRWYWx1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHZhbGlkYXRlVmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlVmFsdWUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnLScgfHwgdmFsdWUgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBpZiAodGhpcy5taW4gIT0gbnVsbCAmJiB2YWx1ZSA8IHRoaXMubWluKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWluOwogICAgICB9CgogICAgICBpZiAodGhpcy5tYXggIT0gbnVsbCAmJiB2YWx1ZSA+IHRoaXMubWF4KSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWF4OwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAogICAgdXBkYXRlSW5wdXQ6IGZ1bmN0aW9uIHVwZGF0ZUlucHV0KHZhbHVlLCBpbnNlcnRlZFZhbHVlU3RyLCBvcGVyYXRpb24sIHZhbHVlU3RyKSB7CiAgICAgIGluc2VydGVkVmFsdWVTdHIgPSBpbnNlcnRlZFZhbHVlU3RyIHx8ICcnOwogICAgICB2YXIgaW5wdXRWYWx1ZSA9IHRoaXMuJHJlZnMuaW5wdXQuJGVsLnZhbHVlOwogICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLmZvcm1hdFZhbHVlKHZhbHVlKTsKICAgICAgdmFyIGN1cnJlbnRMZW5ndGggPSBpbnB1dFZhbHVlLmxlbmd0aDsKCiAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWVTdHIpIHsKICAgICAgICBuZXdWYWx1ZSA9IHRoaXMuY29uY2F0VmFsdWVzKG5ld1ZhbHVlLCB2YWx1ZVN0cik7CiAgICAgIH0KCiAgICAgIGlmIChjdXJyZW50TGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWUgPSBuZXdWYWx1ZTsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluaXRDdXJzb3IoKTsKICAgICAgICB2YXIgc2VsZWN0aW9uRW5kID0gaW5kZXggKyBpbnNlcnRlZFZhbHVlU3RyLmxlbmd0aDsKICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25FbmQsIHNlbGVjdGlvbkVuZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHNlbGVjdGlvblN0YXJ0ID0gdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2VsZWN0aW9uU3RhcnQ7CiAgICAgICAgdmFyIF9zZWxlY3Rpb25FbmQgPSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZWxlY3Rpb25FbmQ7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwudmFsdWUgPSBuZXdWYWx1ZTsKICAgICAgICB2YXIgbmV3TGVuZ3RoID0gbmV3VmFsdWUubGVuZ3RoOwoKICAgICAgICBpZiAob3BlcmF0aW9uID09PSAncmFuZ2UtaW5zZXJ0JykgewogICAgICAgICAgdmFyIHN0YXJ0VmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUoKGlucHV0VmFsdWUgfHwgJycpLnNsaWNlKDAsIHNlbGVjdGlvblN0YXJ0KSk7CiAgICAgICAgICB2YXIgc3RhcnRWYWx1ZVN0ciA9IHN0YXJ0VmFsdWUgIT09IG51bGwgPyBzdGFydFZhbHVlLnRvU3RyaW5nKCkgOiAnJzsKICAgICAgICAgIHZhciBzdGFydEV4cHIgPSBzdGFydFZhbHVlU3RyLnNwbGl0KCcnKS5qb2luKCIoIi5jb25jYXQodGhpcy5ncm91cENoYXIsICIpPyIpKTsKICAgICAgICAgIHZhciBzUmVnZXggPSBuZXcgUmVnRXhwKHN0YXJ0RXhwciwgJ2cnKTsKICAgICAgICAgIHNSZWdleC50ZXN0KG5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB0RXhwciA9IGluc2VydGVkVmFsdWVTdHIuc3BsaXQoJycpLmpvaW4oIigiLmNvbmNhdCh0aGlzLmdyb3VwQ2hhciwgIik/IikpOwogICAgICAgICAgdmFyIHRSZWdleCA9IG5ldyBSZWdFeHAodEV4cHIsICdnJyk7CiAgICAgICAgICB0UmVnZXgudGVzdChuZXdWYWx1ZS5zbGljZShzUmVnZXgubGFzdEluZGV4KSk7CiAgICAgICAgICBfc2VsZWN0aW9uRW5kID0gc1JlZ2V4Lmxhc3RJbmRleCArIHRSZWdleC5sYXN0SW5kZXg7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kLCBfc2VsZWN0aW9uRW5kKTsKICAgICAgICB9IGVsc2UgaWYgKG5ld0xlbmd0aCA9PT0gY3VycmVudExlbmd0aCkgewogICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2luc2VydCcgfHwgb3BlcmF0aW9uID09PSAnZGVsZXRlLWJhY2stc2luZ2xlJykgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0U2VsZWN0aW9uUmFuZ2UoX3NlbGVjdGlvbkVuZCArIDEsIF9zZWxlY3Rpb25FbmQgKyAxKTtlbHNlIGlmIChvcGVyYXRpb24gPT09ICdkZWxldGUtc2luZ2xlJykgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0U2VsZWN0aW9uUmFuZ2UoX3NlbGVjdGlvbkVuZCAtIDEsIF9zZWxlY3Rpb25FbmQgLSAxKTtlbHNlIGlmIChvcGVyYXRpb24gPT09ICdkZWxldGUtcmFuZ2UnIHx8IG9wZXJhdGlvbiA9PT0gJ3NwaW4nKSB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kLCBfc2VsZWN0aW9uRW5kKTsKICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJ2RlbGV0ZS1iYWNrLXNpbmdsZScpIHsKICAgICAgICAgIHZhciBwcmV2Q2hhciA9IGlucHV0VmFsdWUuY2hhckF0KF9zZWxlY3Rpb25FbmQgLSAxKTsKICAgICAgICAgIHZhciBuZXh0Q2hhciA9IGlucHV0VmFsdWUuY2hhckF0KF9zZWxlY3Rpb25FbmQpOwogICAgICAgICAgdmFyIGRpZmYgPSBjdXJyZW50TGVuZ3RoIC0gbmV3TGVuZ3RoOwoKICAgICAgICAgIHZhciBpc0dyb3VwQ2hhciA9IHRoaXMuX2dyb3VwLnRlc3QobmV4dENoYXIpOwoKICAgICAgICAgIGlmIChpc0dyb3VwQ2hhciAmJiBkaWZmID09PSAxKSB7CiAgICAgICAgICAgIF9zZWxlY3Rpb25FbmQgKz0gMTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWlzR3JvdXBDaGFyICYmIHRoaXMuaXNOdW1lcmFsQ2hhcihwcmV2Q2hhcikpIHsKICAgICAgICAgICAgX3NlbGVjdGlvbkVuZCArPSAtMSAqIGRpZmYgKyAxOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuX2dyb3VwLmxhc3RJbmRleCA9IDA7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZShfc2VsZWN0aW9uRW5kLCBfc2VsZWN0aW9uRW5kKTsKICAgICAgICB9IGVsc2UgaWYgKGlucHV0VmFsdWUgPT09ICctJyAmJiBvcGVyYXRpb24gPT09ICdpbnNlcnQnKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTsKCiAgICAgICAgICB2YXIgX2luZGV4ID0gdGhpcy5pbml0Q3Vyc29yKCk7CgogICAgICAgICAgdmFyIF9zZWxlY3Rpb25FbmQyID0gX2luZGV4ICsgaW5zZXJ0ZWRWYWx1ZVN0ci5sZW5ndGggKyAxOwoKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuJGVsLnNldFNlbGVjdGlvblJhbmdlKF9zZWxlY3Rpb25FbmQyLCBfc2VsZWN0aW9uRW5kMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9zZWxlY3Rpb25FbmQgPSBfc2VsZWN0aW9uRW5kICsgKG5ld0xlbmd0aCAtIGN1cnJlbnRMZW5ndGgpOwogICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuc2V0U2VsZWN0aW9uUmFuZ2UoX3NlbGVjdGlvbkVuZCwgX3NlbGVjdGlvbkVuZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLiRyZWZzLmlucHV0LiRlbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCB2YWx1ZSk7CiAgICB9LAogICAgY29uY2F0VmFsdWVzOiBmdW5jdGlvbiBjb25jYXRWYWx1ZXModmFsMSwgdmFsMikgewogICAgICBpZiAodmFsMSAmJiB2YWwyKSB7CiAgICAgICAgdmFyIGRlY2ltYWxDaGFySW5kZXggPSB2YWwyLnNlYXJjaCh0aGlzLl9kZWNpbWFsKTsKICAgICAgICB0aGlzLl9kZWNpbWFsLmxhc3RJbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIGRlY2ltYWxDaGFySW5kZXggIT09IC0xID8gdmFsMS5zcGxpdCh0aGlzLl9kZWNpbWFsKVswXSArIHZhbDIuc2xpY2UoZGVjaW1hbENoYXJJbmRleCkgOiB2YWwxOwogICAgICB9CgogICAgICByZXR1cm4gdmFsMTsKICAgIH0sCiAgICBnZXREZWNpbWFsTGVuZ3RoOiBmdW5jdGlvbiBnZXREZWNpbWFsTGVuZ3RoKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHZhciB2YWx1ZVNwbGl0ID0gdmFsdWUuc3BsaXQodGhpcy5fZGVjaW1hbCk7CgogICAgICAgIGlmICh2YWx1ZVNwbGl0Lmxlbmd0aCA9PT0gMikgewogICAgICAgICAgcmV0dXJuIHZhbHVlU3BsaXRbMV0ucmVwbGFjZSh0aGlzLl9zdWZmaXgsICcnKS50cmltKCkucmVwbGFjZSgvXHMvZywgJycpLnJlcGxhY2UodGhpcy5fY3VycmVuY3ksICcnKS5sZW5ndGg7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0sCiAgICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoZXZlbnQsIHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgdmFsdWUpOwogICAgfSwKICAgIG9uSW5wdXRGb2N1czogZnVuY3Rpb24gb25JbnB1dEZvY3VzKCkgewogICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlOwogICAgfSwKICAgIG9uSW5wdXRCbHVyOiBmdW5jdGlvbiBvbklucHV0Qmx1cihldmVudCkgewogICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTsKICAgICAgdmFyIGlucHV0ID0gZXZlbnQudGFyZ2V0OwogICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLnZhbGlkYXRlVmFsdWUodGhpcy5wYXJzZVZhbHVlKGlucHV0LnZhbHVlKSk7CiAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5mb3JtYXRWYWx1ZShuZXdWYWx1ZSk7CiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIG5ld1ZhbHVlKTsKICAgICAgdGhpcy51cGRhdGVNb2RlbChldmVudCwgbmV3VmFsdWUpOwogICAgfSwKICAgIGNsZWFyVGltZXI6IGZ1bmN0aW9uIGNsZWFyVGltZXIoKSB7CiAgICAgIGlmICh0aGlzLnRpbWVyKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRhaW5lckNsYXNzOiBmdW5jdGlvbiBjb250YWluZXJDbGFzcygpIHsKICAgICAgcmV0dXJuIFsncC1pbnB1dG51bWJlciBwLWNvbXBvbmVudCBwLWlucHV0d3JhcHBlcicsIHRoaXMuY2xhc3MsIHsKICAgICAgICAncC1pbnB1dHdyYXBwZXItZmlsbGVkJzogdGhpcy5maWxsZWQsCiAgICAgICAgJ3AtaW5wdXR3cmFwcGVyLWZvY3VzJzogdGhpcy5mb2N1c2VkLAogICAgICAgICdwLWlucHV0bnVtYmVyLWJ1dHRvbnMtc3RhY2tlZCc6IHRoaXMuc2hvd0J1dHRvbnMgJiYgdGhpcy5idXR0b25MYXlvdXQgPT09ICdzdGFja2VkJywKICAgICAgICAncC1pbnB1dG51bWJlci1idXR0b25zLWhvcml6b250YWwnOiB0aGlzLnNob3dCdXR0b25zICYmIHRoaXMuYnV0dG9uTGF5b3V0ID09PSAnaG9yaXpvbnRhbCcsCiAgICAgICAgJ3AtaW5wdXRudW1iZXItYnV0dG9ucy12ZXJ0aWNhbCc6IHRoaXMuc2hvd0J1dHRvbnMgJiYgdGhpcy5idXR0b25MYXlvdXQgPT09ICd2ZXJ0aWNhbCcKICAgICAgfV07CiAgICB9LAogICAgdXBCdXR0b25DbGFzczogZnVuY3Rpb24gdXBCdXR0b25DbGFzcygpIHsKICAgICAgcmV0dXJuIFsncC1pbnB1dG51bWJlci1idXR0b24gcC1pbnB1dG51bWJlci1idXR0b24tdXAnLCB0aGlzLmluY3JlbWVudEJ1dHRvbkNsYXNzXTsKICAgIH0sCiAgICBkb3duQnV0dG9uQ2xhc3M6IGZ1bmN0aW9uIGRvd25CdXR0b25DbGFzcygpIHsKICAgICAgcmV0dXJuIFsncC1pbnB1dG51bWJlci1idXR0b24gcC1pbnB1dG51bWJlci1idXR0b24tZG93bicsIHRoaXMuZGVjcmVtZW50QnV0dG9uQ2xhc3NdOwogICAgfSwKICAgIGZpbGxlZDogZnVuY3Rpb24gZmlsbGVkKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlbFZhbHVlICE9IG51bGwgJiYgdGhpcy5tb2RlbFZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID4gMDsKICAgIH0sCiAgICB1cEJ1dHRvbkxpc3RlbmVyczogZnVuY3Rpb24gdXBCdXR0b25MaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uIG1vdXNlZG93bihldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5vblVwQnV0dG9uTW91c2VEb3duKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIG1vdXNldXA6IGZ1bmN0aW9uIG1vdXNldXAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIub25VcEJ1dHRvbk1vdXNlVXAoZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgbW91c2VsZWF2ZTogZnVuY3Rpb24gbW91c2VsZWF2ZShldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5vblVwQnV0dG9uTW91c2VMZWF2ZShldmVudCk7CiAgICAgICAgfSwKICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiBrZXlkb3duKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLm9uVXBCdXR0b25LZXlEb3duKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIGtleXVwOiBmdW5jdGlvbiBrZXl1cChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5vblVwQnV0dG9uS2V5VXAoZXZlbnQpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBkb3duQnV0dG9uTGlzdGVuZXJzOiBmdW5jdGlvbiBkb3duQnV0dG9uTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiB7CiAgICAgICAgbW91c2Vkb3duOiBmdW5jdGlvbiBtb3VzZWRvd24oZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMub25Eb3duQnV0dG9uTW91c2VEb3duKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIG1vdXNldXA6IGZ1bmN0aW9uIG1vdXNldXAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMub25Eb3duQnV0dG9uTW91c2VVcChldmVudCk7CiAgICAgICAgfSwKICAgICAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbiBtb3VzZWxlYXZlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLm9uRG93bkJ1dHRvbk1vdXNlTGVhdmUoZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAga2V5ZG93bjogZnVuY3Rpb24ga2V5ZG93bihldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5vbkRvd25CdXR0b25LZXlEb3duKGV2ZW50KTsKICAgICAgICB9LAogICAgICAgIGtleXVwOiBmdW5jdGlvbiBrZXl1cChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5vbkRvd25CdXR0b25LZXlVcChldmVudCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbiBmb3JtYXR0ZWRWYWx1ZSgpIHsKICAgICAgdmFyIHZhbCA9ICF0aGlzLm1vZGVsVmFsdWUgJiYgIXRoaXMuYWxsb3dFbXB0eSA/IDAgOiB0aGlzLm1vZGVsVmFsdWU7CiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFZhbHVlKHZhbCk7CiAgICB9LAogICAgZ2V0Rm9ybWF0dGVyOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLm51bWJlckZvcm1hdDsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICdJTklucHV0VGV4dCc6IElucHV0VGV4dCwKICAgICdJTkJ1dHRvbic6IEJ1dHRvbgogIH0KfTs="},{"version":3,"sources":["/Users/crocslut/Desktop/Git/primevue/src/components/inputnumber/InputNumber.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <span :class=\"containerClass\" :style=\"style\">\n        <INInputText ref=\"input\" :class=\"['p-inputnumber-input', inputClass]\" :style=\"inputStyle\" :value=\"formattedValue\" v-bind=\"$attrs\" :aria-valumin=\"min\" :aria-valuemax=\"max\"\n           @input=\"onUserInput\" @keydown=\"onInputKeyDown\" @keypress=\"onInputKeyPress\" @paste=\"onPaste\" @click=\"onInputClick\" @focus=\"onInputFocus\" @blur=\"onInputBlur\"/>\n        <span class=\"p-inputnumber-button-group\" v-if=\"showButtons && buttonLayout === 'stacked'\">\n            <INButton :class=\"upButtonClass\" :icon=\"incrementButtonIcon\" v-on=\"upButtonListeners\" :disabled=\"$attrs.disabled\" />\n            <INButton :class=\"downButtonClass\" :icon=\"decrementButtonIcon\" v-on=\"downButtonListeners\" :disabled=\"$attrs.disabled\" />\n        </span>\n        <INButton :class=\"upButtonClass\" :icon=\"incrementButtonIcon\" v-on=\"upButtonListeners\" v-if=\"showButtons && buttonLayout !== 'stacked'\" :disabled=\"$attrs.disabled\" />\n        <INButton :class=\"downButtonClass\" :icon=\"decrementButtonIcon\" v-on=\"downButtonListeners\" v-if=\"showButtons && buttonLayout !== 'stacked'\" :disabled=\"$attrs.disabled\" />\n    </span>\n</template>\n\n<script>\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\n\nexport default {\n    name: 'InputNumber',\n    inheritAttrs: false,\n    emits: ['update:modelValue', 'input'],\n    props: {\n        modelValue: {\n            type: Number,\n            default: null\n        },\n        format: {\n            type: Boolean,\n            default: true\n        },\n        showButtons: {\n            type: Boolean,\n            default: false\n        },\n        buttonLayout: {\n            type: String,\n            default: 'stacked'\n        },\n        incrementButtonClass: {\n            type: String,\n            default: null,\n        },\n        decrementButtonClass: {\n            type: String,\n            default: null,\n        },\n        incrementButtonIcon: {\n            type: String,\n            default: 'pi pi-angle-up',\n        },\n        decrementButtonIcon: {\n            type: String,\n            default: 'pi pi-angle-down',\n        },\n        locale: {\n            type: String,\n            default: undefined\n        },\n        localeMatcher: {\n            type: String,\n            default: undefined\n        },\n        mode: {\n            type: String,\n            default: 'decimal'\n        },\n        prefix: {\n            type: String,\n            default: null\n        },\n        suffix: {\n            type: String,\n            default: null\n        },\n        currency: {\n            type: String,\n            default: undefined\n        },\n        currencyDisplay: {\n            type: String,\n            default: undefined\n        },\n        useGrouping: {\n            type: Boolean,\n            default: true\n        },\n        minFractionDigits: {\n            type: Number,\n            default: undefined\n        },\n        maxFractionDigits: {\n            type: Number,\n            default: undefined\n        },\n        min: {\n            type: Number,\n            default: null\n        },\n        max: {\n            type: Number,\n            default: null\n        },\n        step: {\n            type: Number,\n            default: 1\n        },\n        allowEmpty: {\n            type: Boolean,\n            default: true\n        },\n        style: null,\n        class: null,\n        inputStyle: null,\n        inputClass: null\n    },\n    numberFormat: null,\n    _numeral: null,\n    _decimal: null,\n    _group: null,\n    _minusSign: null,\n    _currency: null,\n    _suffix: null,\n    _prefix: null,\n    _index: null,\n    groupChar: '',\n    isSpecialChar: null,\n    prefixChar: null,\n    suffixChar: null,\n    timer: null,\n    data() {\n        return {\n            focused: false\n        }\n    },\n    watch: {\n\t\tlocale(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        localeMatcher(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        mode(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        currency(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        currencyDisplay(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        useGrouping(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        minFractionDigits(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        maxFractionDigits(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        suffix(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        },\n        prefix(newValue, oldValue) {\n            this.updateConstructParser(newValue, oldValue);\n        }\n    },\n    created() {\n        this.constructParser();\n    },\n    methods: {\n        getOptions() {\n            return {\n                localeMatcher: this.localeMatcher,\n                style: this.mode,\n                currency: this.currency,\n                currencyDisplay: this.currencyDisplay,\n                useGrouping: this.useGrouping,\n                minimumFractionDigits: this.minFractionDigits,\n                maximumFractionDigits: this.maxFractionDigits\n            };\n        },\n        constructParser() {\n            this.numberFormat = new Intl.NumberFormat(this.locale, this.getOptions());\n            const numerals = [...new Intl.NumberFormat(this.locale, {useGrouping: false}).format(9876543210)].reverse();\n            const index = new Map(numerals.map((d, i) => [d, i]));\n            this._numeral = new RegExp(`[${numerals.join('')}]`, 'g');\n            this._group = this.getGroupingExpression();\n            this._minusSign = this.getMinusSignExpression();\n            this._currency = this.getCurrencyExpression();\n            this._decimal = this.getDecimalExpression();\n            this._suffix = this.getSuffixExpression();\n            this._prefix = this.getPrefixExpression();\n            this._index = d => index.get(d);\n        },\n        updateConstructParser(newValue, oldValue) {\n            if (newValue !== oldValue) {\n                this.constructParser();\n            }\n        },\n        escapeRegExp(text) {\n            return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n        },\n        getDecimalExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {...this.getOptions(), useGrouping: false});\n            return new RegExp(`[${formatter.format(1.1).replace(this._currency, '').trim().replace(this._numeral, '')}]`, 'g');\n        },\n        getGroupingExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {useGrouping: true});\n            this.groupChar = formatter.format(1000000).trim().replace(this._numeral, '').charAt(0);\n            return new RegExp(`[${this.groupChar}]`, 'g');\n        },\n        getMinusSignExpression() {\n            const formatter = new Intl.NumberFormat(this.locale, {useGrouping: false});\n            return new RegExp(`[${formatter.format(-1).trim().replace(this._numeral, '')}]`, 'g');\n        },\n        getCurrencyExpression() {\n            if (this.currency) {\n                const formatter = new Intl.NumberFormat(this.locale, {style: 'currency', currency: this.currency, currencyDisplay: this.currencyDisplay,\n                    minimumFractionDigits: 0, maximumFractionDigits: 0});\n                return new RegExp(`[${formatter.format(1).replace(/\\s/g, '').replace(this._numeral, '').replace(this._group, '')}]`, 'g');\n            }\n\n            return new RegExp(`[]`,'g');\n        },\n        getPrefixExpression() {\n            if (this.prefix) {\n                this.prefixChar = this.prefix;\n            }\n            else {\n                const formatter = new Intl.NumberFormat(this.locale, {style: this.mode, currency: this.currency, currencyDisplay: this.currencyDisplay});\n                this.prefixChar = formatter.format(1).split('1')[0];\n            }\n\n            return new RegExp(`${this.escapeRegExp(this.prefixChar||'')}`, 'g');\n        },\n        getSuffixExpression() {\n            if (this.suffix) {\n                this.suffixChar = this.suffix;\n            }\n            else {\n                const formatter = new Intl.NumberFormat(this.locale, {style: this.mode, currency: this.currency, currencyDisplay: this.currencyDisplay,\n                    minimumFractionDigits: 0, maximumFractionDigits: 0});\n                this.suffixChar = formatter.format(1).split('1')[1];\n            }\n\n            return new RegExp(`${this.escapeRegExp(this.suffixChar||'')}`, 'g');\n        },\n        formatValue(value) {\n            if (value != null) {\n                if (value === '-') { // Minus sign\n                    return value;\n                }\n\n                if (this.format) {\n                    let formatter = new Intl.NumberFormat(this.locale, this.getOptions());\n                    let formattedValue = formatter.format(value);\n                    if (this.prefix) {\n                        formattedValue = this.prefix + formattedValue;\n                    }\n\n                    if (this.suffix) {\n                        formattedValue = formattedValue + this.suffix;\n                    }\n\n                    return formattedValue;\n                }\n\n                return value.toString();\n            }\n\n            return '';\n        },\n        parseValue(text) {\n            let filteredText = text\n                                .replace(this._suffix, '')\n                                .replace(this._prefix, '')\n                                .trim()\n                                .replace(/\\s/g, '')\n                                .replace(this._currency, '')\n                                .replace(this._group, '')\n                                .replace(this._minusSign, '-')\n                                .replace(this._decimal, '.')\n                                .replace(this._numeral, this._index);\n\n            if (filteredText) {\n                if (filteredText === '-') // Minus sign\n                    return filteredText;\n\n                let parsedValue = +filteredText;\n                return isNaN(parsedValue) ? null : parsedValue;\n            }\n\n            return null;\n        },\n        repeat(event, interval, dir) {\n            let i = interval || 500;\n\n            this.clearTimer();\n            this.timer = setTimeout(() => {\n                this.repeat(event, 40, dir);\n            }, i);\n\n            this.spin(event, dir);\n        },\n        spin(event, dir) {\n            if (this.$refs.input) {\n                let step = this.step * dir;\n                let currentValue = this.parseValue(this.$refs.input.$el.value) || 0;\n                let newValue = this.validateValue(currentValue + step);\n\n                this.updateInput(newValue, null, 'spin');\n                this.updateModel(event, newValue);\n\n                this.handleOnInput(event, currentValue, newValue);\n            }\n        },\n        onUpButtonMouseDown(event) {\n            if (!this.$attrs.disabled) {\n                this.$refs.input.$el.focus();\n                this.repeat(event, null, 1);\n                event.preventDefault();\n            }\n        },\n        onUpButtonMouseUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonMouseLeave() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonKeyUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onUpButtonKeyDown(event) {\n            if (event.keyCode === 32 || event.keyCode === 13) {\n                this.repeat(event, null, 1);\n            }\n        },\n        onDownButtonMouseDown(event) {\n            if (!this.$attrs.disabled) {\n                this.$refs.input.$el.focus();\n                this.repeat(event, null, -1);\n                event.preventDefault();\n            }\n        },\n        onDownButtonMouseUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonMouseLeave() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonKeyUp() {\n            if (!this.$attrs.disabled) {\n                this.clearTimer();\n            }\n        },\n        onDownButtonKeyDown(event) {\n            if (event.keyCode === 32 || event.keyCode === 13) {\n                this.repeat(event, null, -1);\n            }\n        },\n        onUserInput() {\n            if (this.isSpecialChar) {\n                this.$refs.input.$el.value = this.lastValue;\n            }\n            this.isSpecialChar = false;\n        },\n        onInputKeyDown(event) {\n            this.lastValue = event.target.value;\n            if (event.shiftKey || event.altKey) {\n                this.isSpecialChar = true;\n                return;\n            }\n\n            let selectionStart = event.target.selectionStart;\n            let selectionEnd = event.target.selectionEnd;\n            let inputValue = event.target.value;\n            let newValueStr = null;\n\n            if (event.altKey) {\n                event.preventDefault();\n            }\n\n            switch (event.which) {\n                //up\n                case 38:\n                    this.spin(event, 1);\n                    event.preventDefault();\n                break;\n\n                //down\n                case 40:\n                    this.spin(event, -1);\n                    event.preventDefault();\n                break;\n\n                //left\n                case 37:\n                    if (!this.isNumeralChar(inputValue.charAt(selectionStart - 1))) {\n                        event.preventDefault();\n                    }\n                break;\n\n                //right\n                case 39:\n                    if (!this.isNumeralChar(inputValue.charAt(selectionStart))) {\n                        event.preventDefault();\n                    }\n                break;\n\n                //enter\n                case 13:\n                    newValueStr = this.validateValue(this.parseValue(inputValue));\n                    this.$refs.input.$el.value = this.formatValue(newValueStr);\n                    this.$refs.input.$el.setAttribute('aria-valuenow', newValueStr);\n                    this.updateModel(event, newValueStr);\n                break;\n\n                //backspace\n                case 8: {\n                    event.preventDefault();\n\n                    if (selectionStart === selectionEnd) {\n                        const deleteChar = inputValue.charAt(selectionStart - 1);\n                        const { decimalCharIndex, decimalCharIndexWithoutPrefix } = this.getDecimalCharIndexes(inputValue);\n\n                        if (this.isNumeralChar(deleteChar)) {\n                            const decimalLength = this.getDecimalLength(inputValue);\n\n                            if (this._group.test(deleteChar)) {\n                                this._group.lastIndex = 0;\n                                newValueStr = inputValue.slice(0, selectionStart - 2) + inputValue.slice(selectionStart - 1);\n                            }\n                            else if (this._decimal.test(deleteChar)) {\n                                this._decimal.lastIndex = 0;\n\n                                if (decimalLength) {\n                                    this.$refs.input.$el.setSelectionRange(selectionStart - 1, selectionStart - 1);\n                                }\n                                else {\n                                    newValueStr = inputValue.slice(0, selectionStart - 1) + inputValue.slice(selectionStart);\n                                }\n                            }\n                            else if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                                const insertedText = this.isDecimalMode() && (this.minFractionDigits || 0) < decimalLength ? '' : '0';\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + insertedText + inputValue.slice(selectionStart);\n                            }\n                            else if (decimalCharIndexWithoutPrefix === 1) {\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + '0' + inputValue.slice(selectionStart);\n                                newValueStr = this.parseValue(newValueStr) > 0 ? newValueStr : '';\n                            }\n                            else {\n                                newValueStr = inputValue.slice(0, selectionStart - 1) + inputValue.slice(selectionStart);\n                            }\n                        }\n\n                        this.updateValue(event, newValueStr, null, 'delete-single');\n                    }\n                    else {\n                        newValueStr = this.deleteRange(inputValue, selectionStart, selectionEnd);\n                        this.updateValue(event, newValueStr, null, 'delete-range');\n                    }\n\n                    break;\n                }\n\n                // del\n                case 46:\n                    event.preventDefault();\n\n                    if (selectionStart === selectionEnd) {\n                        const deleteChar = inputValue.charAt(selectionStart);\n                        const { decimalCharIndex, decimalCharIndexWithoutPrefix } = this.getDecimalCharIndexes(inputValue);\n\n                        if (this.isNumeralChar(deleteChar)) {\n                            const decimalLength = this.getDecimalLength(inputValue);\n\n                            if (this._group.test(deleteChar)) {\n                                this._group.lastIndex = 0;\n                                newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 2);\n                            }\n                            else if (this._decimal.test(deleteChar)) {\n                                this._decimal.lastIndex = 0;\n\n                                if (decimalLength) {\n                                    this.$refs.input.$el.setSelectionRange(selectionStart + 1, selectionStart + 1);\n                                }\n                                else {\n                                    newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 1);\n                                }\n                            }\n                            else if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                                const insertedText = this.isDecimalMode() && (this.minFractionDigits || 0) < decimalLength ? '' : '0';\n                                newValueStr = inputValue.slice(0, selectionStart) + insertedText + inputValue.slice(selectionStart + 1);\n                            }\n                            else if (decimalCharIndexWithoutPrefix === 1) {\n                                newValueStr = inputValue.slice(0, selectionStart) + '0' + inputValue.slice(selectionStart + 1);\n                                newValueStr = this.parseValue(newValueStr) > 0 ? newValueStr : '';\n                            }\n                            else {\n                                newValueStr = inputValue.slice(0, selectionStart) + inputValue.slice(selectionStart + 1);\n                            }\n                        }\n\n                        this.updateValue(event, newValueStr, null, 'delete-back-single');\n                    }\n                    else {\n                        newValueStr = this.deleteRange(inputValue, selectionStart, selectionEnd);\n                        this.updateValue(event, newValueStr, null, 'delete-range');\n                    }\n                break;\n\n                default:\n                break;\n            }\n        },\n        onInputKeyPress(event) {\n            event.preventDefault();\n            let code = event.which || event.keyCode;\n            let char = String.fromCharCode(code);\n            const isDecimalSign = this.isDecimalSign(char);\n            const isMinusSign = this.isMinusSign(char);\n\n            if ((48 <= code && code <= 57) || isMinusSign || isDecimalSign) {\n                this.insert(event, char, { isDecimalSign, isMinusSign });\n            }\n        },\n        onPaste(event) {\n            event.preventDefault();\n            let data = (event.clipboardData || window['clipboardData']).getData('Text');\n            if (data) {\n                let filteredData = this.parseValue(data);\n                if (filteredData != null) {\n                    this.insert(event, filteredData.toString());\n                }\n            }\n        },\n        allowMinusSign() {\n            return this.min === null || this.min < 0;\n        },\n        isMinusSign(char) {\n            if (this._minusSign.test(char) || char === '-') {\n                this._minusSign.lastIndex = 0;\n                return true;\n            }\n\n            return false;\n        },\n        isDecimalSign(char) {\n            if (this._decimal.test(char)) {\n                this._decimal.lastIndex = 0;\n                return true;\n            }\n\n            return false;\n        },\n        isDecimalMode() {\n            return this.mode === 'decimal';\n        },\n        getDecimalCharIndexes(val) {\n            let decimalCharIndex = val.search(this._decimal);\n            this._decimal.lastIndex = 0;\n\n            const filteredVal = val.replace(this._prefix, '').trim().replace(/\\s/g, '').replace(this._currency, '');\n            const decimalCharIndexWithoutPrefix = filteredVal.search(this._decimal);\n            this._decimal.lastIndex = 0;\n\n            return { decimalCharIndex, decimalCharIndexWithoutPrefix };\n        },\n        getCharIndexes(val) {\n            const decimalCharIndex = val.search(this._decimal);\n            this._decimal.lastIndex = 0;\n            const minusCharIndex = val.search(this._minusSign);\n            this._minusSign.lastIndex = 0;\n            const suffixCharIndex = val.search(this._suffix);\n            this._suffix.lastIndex = 0;\n            const currencyCharIndex = val.search(this._currency);\n            this._currency.lastIndex = 0;\n\n            return { decimalCharIndex, minusCharIndex, suffixCharIndex, currencyCharIndex };\n        },\n        insert(event, text, sign = { isDecimalSign: false, isMinusSign: false }) {\n            const minusCharIndexOnText = text.search(this._minusSign);\n            this._minusSign.lastIndex = 0;\n            if (!this.allowMinusSign() && minusCharIndexOnText !== -1) {\n                return;\n            }\n\n            const selectionStart = this.$refs.input.$el.selectionStart;\n            const selectionEnd = this.$refs.input.$el.selectionEnd;\n            let inputValue = this.$refs.input.$el.value.trim();\n            const { decimalCharIndex, minusCharIndex, suffixCharIndex, currencyCharIndex } = this.getCharIndexes(inputValue);\n            let newValueStr;\n\n            if (sign.isMinusSign) {\n                if (selectionStart === 0) {\n                    newValueStr = inputValue;\n                    if (minusCharIndex === -1 || selectionEnd !== 0) {\n                        newValueStr = this.insertText(inputValue, text, 0, selectionEnd);\n                    }\n\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n            }\n            else if (sign.isDecimalSign) {\n                if (decimalCharIndex > 0 && selectionStart === decimalCharIndex) {\n                    this.updateValue(event, inputValue, text, 'insert');\n                }\n                else if (decimalCharIndex > selectionStart && decimalCharIndex < selectionEnd) {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n                else if (decimalCharIndex === -1 && this.maxFractionDigits) {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, 'insert');\n                }\n            }\n            else {\n                const maxFractionDigits = this.numberFormat.resolvedOptions().maximumFractionDigits;\n                const operation = selectionStart !== selectionEnd ? 'range-insert' : 'insert';\n\n                if (decimalCharIndex > 0 && selectionStart > decimalCharIndex) {\n                    if ((selectionStart + text.length - (decimalCharIndex + 1)) <= maxFractionDigits) {\n                        const charIndex = currencyCharIndex >= selectionStart ? currencyCharIndex - 1 : (suffixCharIndex >= selectionStart ? suffixCharIndex : inputValue.length);\n\n                        newValueStr = inputValue.slice(0, selectionStart) + text + inputValue.slice(selectionStart + text.length, charIndex) + inputValue.slice(charIndex);\n                        this.updateValue(event, newValueStr, text, operation);\n                    }\n                }\n                else {\n                    newValueStr = this.insertText(inputValue, text, selectionStart, selectionEnd);\n                    this.updateValue(event, newValueStr, text, operation);\n                }\n            }\n        },\n        insertText(value, text, start, end) {\n            let textSplit = text === '.' ? text : text.split('.');\n\n            if (textSplit.length === 2) {\n                const decimalCharIndex = value.slice(start, end).search(this._decimal);\n                this._decimal.lastIndex = 0;\n                return (decimalCharIndex > 0) ? value.slice(0, start) + this.formatValue(text) + value.slice(end) : (value || this.formatValue(text));\n            }\n            else if ((end - start) === value.length) {\n                return this.formatValue(text);\n            }\n            else if (start === 0) {\n                return text + value.slice(end);\n            }\n            else if (end === value.length) {\n                return value.slice(0, start) + text;\n            }\n            else {\n                return value.slice(0, start) + text + value.slice(end);\n            }\n        },\n        deleteRange(value, start, end) {\n            let newValueStr;\n\n            if ((end - start) === value.length)\n                newValueStr = '';\n            else if (start === 0)\n                newValueStr = value.slice(end);\n            else if (end === value.length)\n                newValueStr = value.slice(0, start);\n            else\n                newValueStr = value.slice(0, start) + value.slice(end);\n\n            return newValueStr;\n        },\n        initCursor() {\n            let selectionStart = this.$refs.input.$el.selectionStart;\n            let inputValue = this.$refs.input.$el.value;\n            let valueLength = inputValue.length;\n            let index = null;\n\n            // remove prefix\n            let prefixLength = (this.prefixChar || '').length;\n            inputValue = inputValue.replace(this._prefix, '');\n            selectionStart = selectionStart - prefixLength;\n\n            let char = inputValue.charAt(selectionStart);\n            if (this.isNumeralChar(char)) {\n                return selectionStart + prefixLength;\n            }\n\n            //left\n            let i = selectionStart - 1;\n            while (i >= 0) {\n                char = inputValue.charAt(i);\n                if (this.isNumeralChar(char)) {\n                    index = i + prefixLength;\n                    break;\n                }\n                else {\n                    i--;\n                }\n            }\n\n            if (index !== null) {\n                this.$refs.input.$el.setSelectionRange(index + 1, index + 1);\n            }\n            else {\n                i = selectionStart;\n                while (i < valueLength) {\n                    char = inputValue.charAt(i);\n                    if (this.isNumeralChar(char)) {\n                        index = i + prefixLength;\n                        break;\n                    }\n                    else {\n                        i++;\n                    }\n                }\n\n                if (index !== null) {\n                    this.$refs.input.$el.setSelectionRange(index, index);\n                }\n            }\n\n            return index || 0;\n        },\n        onInputClick() {\n            this.initCursor();\n        },\n        isNumeralChar(char) {\n            if (char.length === 1 && (this._numeral.test(char) || this._decimal.test(char) || this._group.test(char) || this._minusSign.test(char))) {\n                this.resetRegex();\n                return true;\n            }\n\n            return false;\n        },\n        resetRegex() {\n            this._numeral.lastIndex =  0;\n            this._decimal.lastIndex =  0;\n            this._group.lastIndex =  0;\n            this._minusSign.lastIndex =  0;\n        },\n        updateValue(event, valueStr, insertedValueStr, operation) {\n            let currentValue = this.$refs.input.$el.value;\n            let newValue = null;\n\n            if (valueStr != null) {\n                newValue = this.parseValue(valueStr);\n                newValue = !newValue && !this.allowEmpty ? 0 : newValue;\n                this.updateInput(newValue, insertedValueStr, operation, valueStr);\n\n                this.handleOnInput(event, currentValue, newValue);\n            }\n        },\n        handleOnInput(event, currentValue, newValue) {\n            if (this.isValueChanged(currentValue, newValue)) {\n                this.$emit('input', { originalEvent: event, value: newValue });\n            }\n        },\n        isValueChanged(currentValue, newValue) {\n            if (newValue === null && currentValue !== null) {\n                return true;\n            }\n\n            if (newValue != null) {\n                let parsedCurrentValue = (typeof currentValue === 'string') ? this.parseValue(currentValue) : currentValue;\n                return newValue !== parsedCurrentValue;\n            }\n\n            return false;\n        },\n        validateValue(value) {\n            if (value === '-' || value == null) {\n                return null;\n            }\n\n            if (this.min != null && value < this.min) {\n                return this.min;\n            }\n\n            if (this.max != null && value > this.max) {\n                return this.max;\n            }\n\n            return value;\n        },\n        updateInput(value, insertedValueStr, operation, valueStr) {\n            insertedValueStr = insertedValueStr || '';\n\n            let inputValue = this.$refs.input.$el.value;\n            let newValue = this.formatValue(value);\n            let currentLength = inputValue.length;\n\n            if (newValue !== valueStr) {\n                newValue = this.concatValues(newValue, valueStr);\n            }\n\n            if (currentLength === 0) {\n                this.$refs.input.$el.value = newValue;\n                this.$refs.input.$el.setSelectionRange(0, 0);\n                const index = this.initCursor();\n                const selectionEnd = index + insertedValueStr.length;\n                this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n            }\n            else {\n                let selectionStart = this.$refs.input.$el.selectionStart;\n                let selectionEnd = this.$refs.input.$el.selectionEnd;\n                this.$refs.input.$el.value = newValue;\n                let newLength = newValue.length;\n\n                if (operation === 'range-insert') {\n                    const startValue = this.parseValue((inputValue || '').slice(0, selectionStart));\n                    const startValueStr = startValue !== null ? startValue.toString() : '';\n                    const startExpr = startValueStr.split('').join(`(${this.groupChar})?`);\n                    const sRegex = new RegExp(startExpr, 'g');\n                    sRegex.test(newValue);\n\n                    const tExpr = insertedValueStr.split('').join(`(${this.groupChar})?`);\n                    const tRegex = new RegExp(tExpr, 'g');\n                    tRegex.test(newValue.slice(sRegex.lastIndex));\n\n                    selectionEnd = sRegex.lastIndex + tRegex.lastIndex;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (newLength === currentLength) {\n                    if (operation === 'insert' || operation === 'delete-back-single')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd + 1, selectionEnd + 1);\n                    else if (operation === 'delete-single')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd - 1, selectionEnd - 1);\n                    else if (operation === 'delete-range' || operation === 'spin')\n                        this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (operation === 'delete-back-single') {\n                    let prevChar = inputValue.charAt(selectionEnd - 1);\n                    let nextChar = inputValue.charAt(selectionEnd);\n                    let diff = currentLength - newLength;\n                    let isGroupChar = this._group.test(nextChar);\n\n                    if (isGroupChar && diff === 1) {\n                        selectionEnd += 1;\n                    }\n                    else if (!isGroupChar && this.isNumeralChar(prevChar)) {\n                        selectionEnd += (-1 * diff) + 1;\n                    }\n\n                    this._group.lastIndex = 0;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else if (inputValue === '-' && operation === 'insert') {\n                    this.$refs.input.$el.setSelectionRange(0, 0);\n                    const index = this.initCursor();\n                    const selectionEnd = index + insertedValueStr.length + 1;\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n                else {\n                    selectionEnd = selectionEnd + (newLength - currentLength);\n                    this.$refs.input.$el.setSelectionRange(selectionEnd, selectionEnd);\n                }\n            }\n\n            this.$refs.input.$el.setAttribute('aria-valuenow', value);\n        },\n        concatValues(val1, val2) {\n            if (val1 && val2) {\n                let decimalCharIndex = val2.search(this._decimal);\n                this._decimal.lastIndex = 0;\n\n                return decimalCharIndex !== -1 ? (val1.split(this._decimal)[0] + val2.slice(decimalCharIndex)) : val1;\n            }\n\n            return val1;\n        },\n        getDecimalLength(value) {\n            if (value) {\n                const valueSplit = value.split(this._decimal);\n\n                if (valueSplit.length === 2) {\n                    return valueSplit[1].replace(this._suffix, '')\n                                .trim()\n                                .replace(/\\s/g, '')\n                                .replace(this._currency, '').length;\n                }\n            }\n\n            return 0;\n        },\n        updateModel(event, value) {\n            this.$emit('update:modelValue', value);\n        },\n        onInputFocus() {\n            this.focused = true;\n        },\n        onInputBlur(event) {\n            this.focused = false;\n\n            let input = event.target;\n            let newValue = this.validateValue(this.parseValue(input.value));\n            input.value = this.formatValue(newValue);\n            input.setAttribute('aria-valuenow', newValue);\n            this.updateModel(event, newValue);\n        },\n        clearTimer() {\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n        }\n    },\n    computed: {\n        containerClass() {\n            return ['p-inputnumber p-component p-inputwrapper', this.class, {\n                'p-inputwrapper-filled': this.filled,\n                'p-inputwrapper-focus': this.focused,\n                'p-inputnumber-buttons-stacked': this.showButtons && this.buttonLayout === 'stacked',\n                'p-inputnumber-buttons-horizontal': this.showButtons && this.buttonLayout === 'horizontal',\n                'p-inputnumber-buttons-vertical': this.showButtons && this.buttonLayout === 'vertical'\n            }];\n        },\n        upButtonClass() {\n            return ['p-inputnumber-button p-inputnumber-button-up', this.incrementButtonClass];\n        },\n        downButtonClass() {\n            return ['p-inputnumber-button p-inputnumber-button-down', this.decrementButtonClass];\n        },\n        filled() {\n            return (this.modelValue != null && this.modelValue.toString().length > 0)\n        },\n        upButtonListeners() {\n            return {\n                mousedown: event => this.onUpButtonMouseDown(event),\n                mouseup: event => this.onUpButtonMouseUp(event),\n                mouseleave: event => this.onUpButtonMouseLeave(event),\n                keydown: event => this.onUpButtonKeyDown(event),\n                keyup: event => this.onUpButtonKeyUp(event)\n            }\n        },\n        downButtonListeners() {\n            return {\n                mousedown: event => this.onDownButtonMouseDown(event),\n                mouseup: event => this.onDownButtonMouseUp(event),\n                mouseleave: event => this.onDownButtonMouseLeave(event),\n                keydown: event => this.onDownButtonKeyDown(event),\n                keyup: event => this.onDownButtonKeyUp(event)\n            }\n        },\n        formattedValue() {\n            const val = !this.modelValue && !this.allowEmpty ? 0 : this.modelValue;\n            return this.formatValue(val);\n        },\n        getFormatter() {\n            return this.numberFormat;\n        }\n    },\n    components: {\n        'INInputText': InputText,\n        'INButton': Button\n    }\n}\n</script>\n\n<style>\n.p-inputnumber {\n    display: inline-flex;\n}\n\n.p-inputnumber-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex: 0 0 auto;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label {\n    display: none;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    padding: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-input {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 0;\n    padding: 0;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-button-group {\n    display: flex;\n    flex-direction: column;\n}\n\n.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button {\n    flex: 1 1 auto;\n}\n\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up {\n    order: 3;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n}\n\n.p-inputnumber-buttons-horizontal .p-inputnumber-input {\n    order: 2;\n    border-radius: 0;\n}\n\n.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down {\n    order: 1;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-inputnumber-buttons-vertical {\n    flex-direction: column;\n}\n\n.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up {\n    order: 1;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    width: 100%;\n}\n\n.p-inputnumber-buttons-vertical .p-inputnumber-input {\n    order: 2;\n    border-radius: 0;\n    text-align: center;\n}\n\n.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down {\n    order: 3;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    width: 100%;\n}\n\n.p-inputnumber-input {\n    flex: 1 1 auto;\n}\n\n.p-fluid .p-inputnumber {\n    width: 100%;\n}\n\n.p-fluid .p-inputnumber .p-inputnumber-input {\n    width: 1%;\n}\n\n.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input {\n    width: 100%;\n}\n</style>\n"],"sourceRoot":""}]}